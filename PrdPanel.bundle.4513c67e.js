(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{1184:function(e,t){e.exports=function(e){var t=e.anchorNode,n=e.anchorOffset,r=e.focusNode,o=e.focusOffset,a=t.compareDocumentPosition(r);return!(4===a||0===a&&n<o)}},1185:function(e,t,n){var r=n(1219),o=n(133),a="Expected a function";e.exports=function(e,t,n){var i=!0,l=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(i="leading"in n?!!n.leading:i,l="trailing"in n?!!n.trailing:l),r(e,t,{leading:i,maxWait:t,trailing:l})}},1191:function(e,t,n){"use strict";var r,o,a,i=l(n(317));l(n(82));function l(e){return e&&e.__esModule?e:{"default":e}}o=[],(a="function"==typeof(r=function(){var e=null;return function t(n,r){var o=r||{preventDefault:!1};if(n.Manager){var a=n,l=function(e,n){var r=(0,i["default"])(o);return n&&a.assign(r,n),t(new a(e,r),r)};return a.assign(l,a),l.Manager=function(e,n){var r=(0,i["default"])(o);return n&&a.assign(r,n),t(new a.Manager(e,r),r)},l}var s=(0,i["default"])(n),u=n.element;function c(e){return e.match(/[^ ]+/g)}function d(t){if("hammer.input"!==t.type){if(t.srcEvent._handled||(t.srcEvent._handled={}),t.srcEvent._handled[t.type])return;t.srcEvent._handled[t.type]=!0}var n=!1;t.stopPropagation=function(){n=!0};var r=t.srcEvent.stopPropagation.bind(t.srcEvent);"function"==typeof r&&(t.srcEvent.stopPropagation=function(){r(),t.stopPropagation()}),t.firstTarget=e;for(var o=e;o&&!n;){var a=o.hammer;if(a)for(var i,l=0;l<a.length;l++)if(i=a[l]._handlers[t.type])for(var s=0;s<i.length&&!n;s++)i[s](t);o=o.parentNode}}return u.hammer||(u.hammer=[]),u.hammer.push(s),n.on("hammer.input",function(t){!0!==o.preventDefault&&o.preventDefault!==t.pointerType||t.preventDefault(),t.isFirst&&(e=t.target)}),s._handlers={},s.on=function(e,t){return c(e).forEach(function(e){var r=s._handlers[e];r||(s._handlers[e]=r=[],n.on(e,d)),r.push(t)}),s},s.off=function(e,t){return c(e).forEach(function(e){var r=s._handlers[e];r&&((r=t?r.filter(function(e){return e!==t}):[]).length>0?s._handlers[e]=r:(n.off(e,d),delete s._handlers[e]))}),s},s.emit=function(t,r){e=r.target,n.emit(t,r)},s.destroy=function(){var e=n.element.hammer,t=e.indexOf(s);-1!==t&&e.splice(t,1),e.length||delete n.element.hammer,s._handlers={},n.destroy()},s}})?r.apply(t,o):r)===undefined||(e.exports=a)},1192:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(17),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(13),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(16),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(14),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(15),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(12),_classnames2=_interopRequireDefault(_classnames),_Contr=__webpack_require__(1267),_Contr2=_interopRequireDefault(_Contr),_Note=__webpack_require__(1281),_Note2=_interopRequireDefault(_Note),_DataHandle=__webpack_require__(408),_DataHandle2=_interopRequireDefault(_DataHandle),_EventHandle=__webpack_require__(954),_EventHandle2=_interopRequireDefault(_EventHandle),_ProtoPreviewStore=__webpack_require__(40),_ProtoPreviewStore2=_interopRequireDefault(_ProtoPreviewStore),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}enterModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).enterModule,enterModule&&enterModule(module);var PageComp=function(_React$Component){function PageComp(){(0,_classCallCheck3["default"])(this,PageComp);var e=(0,_possibleConstructorReturn3["default"])(this,(PageComp.__proto__||(0,_getPrototypeOf2["default"])(PageComp)).call(this));return e.state={renderChange:1},e}return(0,_inherits3["default"])(PageComp,_React$Component),(0,_createClass3["default"])(PageComp,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.state.renderChange==t.renderChange;return"page"==e.updateType?"web"==$.getPlatform(window.platform)?e.active&&n:e.active&&(!(window.loadPages&&window.loadPages[e.page.key])||!!e.reset||_EventHandle2["default"].hasTmEvents(e.page.key))&&n:"contr"==e.updateType&&(e.active&&n)}},{key:"componentDidMount",value:function(){this.initPage(),_ProtoPreviewStore2["default"].emitNoteChange()}},{key:"componentWillUpdate",value:function(e){"page"==e.updateType&&this.offEvents()}},{key:"componentDidUpdate",value:function(){"page"==this.props.updateType&&this.initPage(),_ProtoPreviewStore2["default"].emitNoteChange()}},{key:"render",value:function(){var e=this,t=e.props.page,n=[],r=window.pages[e.props.index].stateCache,o={},a=void 0;if((t.active||window.isInPrd)&&(window.loadPages&&(window.loadPages[t.key]=!0),t.contrs.forEach(function(o){var a=$.getContrId(o),i=o,l=!!window.isInPrd||-1!==e.props.updateParent.indexOf(a),s=e.props.updateContrId==a;if(("page"==e.props.updateType||l||s)&&(i=_DataHandle2["default"].getAllValsContr({contrKey:o,pageKey:t.key})),i.isDelete)return!1;n.push(_react2["default"].createElement(_Contr2["default"],{key:a,contr:i,page:t,pageIndex:e.props.index,updateType:e.props.updateType,updateContrId:e.props.updateContrId,updateParent:e.props.updateParent,isUpdateParent:l,mustChange:s,parentStateCache:r,select:""}))}),t.pageHeight&&(a=_react2["default"].createElement("div",{className:"page-placeholder"}))),window.isInPrd){var i=t.pageHeight?t.pageHeight*window.ss:t.pageHeight;o={width:window.previewFrameSize[t.isLandscape?"height":"width"],height:i||window.previewFrameSize[t.isLandscape?"width":"height"],transform:"scale("+e.props.scale+")"}}return _react2["default"].createElement("div",{key:"page"+t.key,id:"page"+t.key,"data-islandscape":t.isLandscape?"true":"false",ref:"page",className:(0,_classnames2["default"])("page",{current:t.active,isLandscape:t.isLandscape,"container-height":"web"==$.getPlatform(window.platform)}),style:o,"data-key":t.key,"data-direction":"y"},a,n,!window.isMobile&&t.note&&t.note.length>0?_react2["default"].createElement(_Note2["default"],{noteList:t.note,pageId:t.key||"1"}):undefined)}},{key:"setEvents",value:function(){var e=this.props.page.events;e&&0!==$.objLength(e)&&_EventHandle2["default"].setEvents({events:e,updateParent:this.props.updateParent,pageIndex:this.props.pageIndex,pageKey:this.props.page.key,targetId:"page"+this.props.page.key,type:"page"})}},{key:"offEvents",value:function(){this.props.page.events&&$("#page"+this.props.page.key).children(".gesture-tag").remove()}},{key:"initPage",value:function(){if(window.isInPrd)return!1;var e=this.props.page.key,t=["page"+e];if("mobile"==$.getPlatform(window.platform))new PreventOverScroll({list:t});if($.fixPageScroll(e),this.props.page.active&&(this.setEvents(),!window.isMobile)){var n=$.isUndefined(this.props.page.pageHeight)?$.getElById("page"+e).scrollHeight:this.props.page.pageHeight*window.ss;$.getElById("page"+e).style.height=n+"px"}}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),PageComp}(_react2["default"].Component),_default=PageComp,reactHotLoader,leaveModule;exports["default"]=_default,reactHotLoader=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0))["default"],reactHotLoader&&(reactHotLoader.register(PageComp,"PageComp","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Page.react.js"),reactHotLoader.register(_default,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Page.react.js")),leaveModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).leaveModule,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(7)(module))},1218:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i=1,l="383838",s="ffffff",u=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getTextColorIdx=function(){return i},t.prototype.setTextColorIdx=function(e,t){void 0===t&&(t=!1),i=e,t||u.emitChange()},t.prototype.getTableTextColor=function(){return l},t.prototype.setTableTextColor=function(e,t){void 0===t&&(t=!1),l=e,t||u.emitChange()},t.prototype.getTableBgColor=function(){return s},t.prototype.setTableBgColor=function(e,t){void 0===t&&(t=!1),s=e,t||u.emitChange()},t.prototype.emitChange=function(){this.emit("change")},t.prototype.addChangeListener=function(e){this.on("change",e)},t.prototype.removeChangeListener=function(e){this.removeListener("change",e)},t}(a.EventEmitter));t["default"]=u},1219:function(e,t,n){var r=n(133),o=n(1228),a=n(912),i="Expected a function",l=Math.max,s=Math.min;e.exports=function(e,t,n){var u,c,d,p,f,h,y=0,g=!1,m=!1,v=!0;if("function"!=typeof e)throw new TypeError(i);function _(t){var n=u,r=c;return u=c=undefined,y=t,p=e.apply(r,n)}function b(e){var n=e-h;return h===undefined||n>=t||n<0||m&&e-y>=d}function w(){var e=o();if(b(e))return C(e);f=setTimeout(w,function(e){var n=t-(e-h);return m?s(n,d-(e-y)):n}(e))}function C(e){return f=undefined,v&&u?_(e):(u=c=undefined,p)}function P(){var e=o(),n=b(e);if(u=arguments,c=this,h=e,n){if(f===undefined)return function(e){return y=e,f=setTimeout(w,t),g?_(e):p}(h);if(m)return f=setTimeout(w,t),_(h)}return f===undefined&&(f=setTimeout(w,t)),p}return t=a(t)||0,r(n)&&(g=!!n.leading,d=(m="maxWait"in n)?l(a(n.maxWait)||0,t):d,v="trailing"in n?!!n.trailing:v),P.cancel=function(){f!==undefined&&clearTimeout(f),y=0,u=h=c=f=undefined},P.flush=function(){return f===undefined?p:C(o())},P}},1221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window.isPc;t.fontSizeList=[{text:"正文",value:14},{text:"标题 1",value:28},{text:"标题 2",value:24},{text:"标题 3",value:22},{text:"标题 4",value:18},{text:"标题 5",value:16}],t.colorPickerList=[{value:"ffffff"},{value:"383838"},{value:"F74343"},{value:"FF860B"},{value:"FFD801"},{value:"A5D640"},{value:"0DE6D6"},{value:"258CFF"},{value:"8C5AFF"},{value:"E5E5E5"},{value:"6D6D6D"},{value:"FFC8C8"},{value:"FFCF9F"},{value:"FFEA77"},{value:"C6F16F"},{value:"71FAF0"},{value:"72B5FF"},{value:"D8C7FF"},{value:"A6A6A6"},{value:"505050"},{value:"D43030"},{value:"E67F16"},{value:"DEBF13"},{value:"8AB82D"},{value:"00BAAD"},{value:"1573DC"},{value:"763AFF"},{value:"808080"},{value:"161616"},{value:"AD2121"},{value:"A96116"},{value:"BBA009"},{value:"618319"},{value:"058279"},{value:"1255A1"},{value:"5C2CC9"}],t.textAlignModeList=[{type:"left"},{type:"center"},{type:"right"},{type:"justify"}],t.insertBtnList=[{type:"text",tips:"文本 [T]"},{type:"table",tips:"表格 [S]"},{type:"image",hasLine:!0,tips:"图片 [P]"},{type:"line",hasLine:!0,tips:"连线 [L]"},{type:"page",tips:"页面快照"},{type:"contr",hasLine:!0,tips:"组件快照"},{type:"preview",tips:"交互原型"}].concat(r?[]:[{type:"pageflow",tips:"页面流程图"}],r?[]:[{type:"projectView",hasLine:!0,tips:"项目总览"}],[{type:"webView",tips:"网页"}]),t["default"]={fontSizeList:t.fontSizeList,colorPickerList:t.colorPickerList,textAlignModeList:t.textAlignModeList}},1222:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38));function a(){var e=o["default"].getSelectStructKey(),t=o["default"].getAllSelectArr();(t.length>1||-1==t.indexOf(e))&&(o["default"].setTemporarySelectArr([],!0),o["default"].setSelectStructArr([e]))}t.clearSelectArr=a,t["default"]={clearSelectArr:a}},1228:function(e,t,n){var r=n(81);e.exports=function(){return r.Date.now()}},1230:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(958)),p=l(n(1283)),f=l(n(1284)),h=l(n(1285)),y=l(n(38)),g=n(985),m=n(918),v=n(828),_=n(858),b=n(919),w=window.$,C=_.structBaseVal.ONEDEEPWIDTH,P=_.structBaseVal.BASEMARGINLEFT,O=_.structBaseVal.TOPDISTANCE,x=_.structBaseVal.DOMHEIGHT,E=_.structBaseVal.PREVIEW_ONEDEEPWIDTH,k=_.structBaseVal.PREVIEW_BASEMARGINLEFT,D=n(10)["default"];var S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleChangeName=function(e){var t=this.props.data.id;g.changeValById({key:"title",val:e,id:t}),D.createData({type:"reNamePrd",name:"PRD 重命名prd",autoSaveType:"prd"})},t.prototype.handleMouseMove=function(e){var t=this.props.data,n=t.id,r=t.type;if(y["default"].getIsDraging()){var o=e.clientX,a=e.clientY;v.changeDragChangePosi({clientX:o,clientY:a},function(){var e=w(".prd-page-list .show-drag-page-comp.drag-page-comp")[0],t=e&&w.offset(e,!0)?w.offset(e,!0).top:O,i=(a-t)%x;y["default"].setMoveOption({x:o,y:a});var l=w('.drag-page-comp[data-id="'+n+'"]')[0],s=m.testIsVaild(l),u=s.isVaild,c=s.isLast;if(u&&c&&i<=x/2&&(u=!1),u){var d=m.getMouseEndTarget(o,i,r,n),p=d.targetId,f=d.targetPosi,h=d.lineId,g=d.linePosi,v=d.lineDeep;y["default"].setDragOption({targetId:p,targetPosi:f,lineId:h,linePosi:g,lineDeep:v})}else y["default"].setDragOption({targetId:"",targetPosi:"",lineId:"",linePosi:"",lineDeep:-1})})}},t.prototype.clickPage=function(e){if(this.props.clickFunc)this.props.clickFunc(e);else{b.handleMouseDown(e);var t=w.query(".prd-preview-container>.right-content-panel");t&&0!=t.scrollTop&&(t.scrollTop=0)}},t.prototype.render=function(){var e=this.props,t=e.data,n=t.id,r=t.title,o=t.pageHierarchy,a=t.isFold,i=t.type,l=e.isSelect,c=e.isDeepColor,y=e.deep,g=e.isCurrent,m=e.idx,v=e.isParentSelect,_=e.searchText,w=e.searchShowKeyArr,O=e.isPreview,x=e.isContainer,D=e.isLink,S=e.isOnlyShow,j=o&&o.length,M=function(e,t){var n=t?E:C;return{paddingLeft:e*n+(t?k:P),iconLeft:e*n}}(y,O),T=M.paddingLeft,A=M.iconLeft;return s["default"].createElement("div",{style:{paddingLeft:T},"data-idx":m,"data-id":n,onMouseMove:this.handleMouseMove,"data-ispreview":O,"data-iscontainer":x,onMouseDown:this.clickPage,onContextMenu:b.handleContextMenu,className:u["default"]("show-drag-page-comp",{"deep-drag-page-comp":c,"current-page-comp":l,"is-showing-page-comp":g,"is-parent-select":v,"is-preview-folder":"folder"==i&&(O||x),"drag-page-comp":!S})},s["default"].createElement(h["default"],{isParentSelect:v,isCurrent:g,id:n}),s["default"].createElement(p["default"],{paddingLeft:T,id:n,deep:y,isPreview:O}),j?s["default"].createElement(f["default"],{hasChild:j,isFold:a,pageHierarchy:o,iconLeft:A,searchShowKeyArr:w,id:n,idx:m,isContainer:!!x,isLink:!!D}):undefined,s["default"].createElement("div",{className:u["default"]("page-icon",{"fold-icon":o})}),s["default"].createElement(d["default"],{name:r,alwaysReadOnly:x,updateFunc:this.handleChangeName,needDivision:!0,noLimit:!1,limitNum:200,searchText:_,toastName:a?"文件夹名称":"文档名称"}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleChangeName",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseMove",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"clickPage",null),t}(s["default"].Component);t["default"]=S},1231:function(e,t,n){"use strict";function r(e,t){void 0===t&&(t=0);var n=$(e).prev()[0];return n?r(n,t+=$(n).find('span[data-slate-content="true"')[0].childNodes[0].length):t}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrevLength=r,t["default"]={getPrevLength:r}},1232:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(1306)),s=n(33),u=["lt","rt","rb","lb"],c=["l","r"],d={lb:"l",rt:"r",lt:"t",rb:"b"};function p(e){var t=e.type,n=e.dragFunc;return("all"!=e.dragType?c:u).map(function(e){var r="spot"==t?e:d[e]||e;return i["default"].createElement("div",{key:r,"data-dragtype":t,"data-dragkey":r,className:"prd-drag-"+r+"-"+t+" prd-drag-"+t,onMouseDown:n})})}var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.stylePos,n=e.noDragSpot,r=void 0!==n&&n,o=e.dragType,a=void 0===o?"all":o,u=e.dragFunc,c=void 0===u?$.noop:u,d=s.findSelectElement()[0]||{},f=0,h="",y=!1;return d!={}&&(f=d.width,h=d.type,y=d.isShowName),i["default"].createElement("div",{className:"prd-drag-container",style:t},r?undefined:i["default"].createElement(i["default"].Fragment,null,i["default"].createElement(p,{dragType:a,type:"line",dragFunc:c}),i["default"].createElement(p,{dragType:a,type:"spot",dragFunc:c})),i["default"].createElement(l["default"],{stylePos:t,width:f,type:h,showName:y}))},t}(i["default"].Component);t.PrdBaseDragContainerComp=f,t["default"]=f},1233:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),i=o(n(913)),l=o(n(5)),s=o(n(6)),u=o(n(10)),c=o(n(827)),d=n(33),p=n(995),f=n(342),h=n(828),y=n(304),g=n(153),m=o(n(236)),v=100;function _(e){var t=e.oldPosi,n=e.limitPosi,r=e.dragKey,o=e.changeXY,a=e.element,i=t.width,l=t.height,s=n.minWidth,u=void 0===s?1:s,c=n.maxWidth,d=n.minHeight,p=void 0===d?1:d,f=n.maxHeight;if("table"==a.type){var h=a.columnPosi,y=a.linePosi;u=20*h.length,p=20*y.length}else if("page"==a.type){var g=n.minWebW,m=n.minWebH,v=n.minMobileW,_=n.minMobileH,b=window.isPc;u=b?g:v,p=b?m:_}-1!=r.indexOf("l")?i-o.x<u?o.x=i-u:!$.isUndefined(c)&&i-o.x>c&&(o.x=i-c):-1!=r.indexOf("r")&&(i+o.x<u?o.x=u-i:!$.isUndefined(c)&&i+o.x>c&&(o.x=c-i)),-1!=r.indexOf("t")?l-o.y<p?o.y=l-p:!$.isUndefined(f)&&l-o.y>f&&(o.y=l-f):-1!=r.indexOf("b")&&(l+o.y<p?o.y=p-l:!$.isUndefined(f)&&l+o.y>f&&(o.y=f-l))}function b(e){var t=e.oldPosi,n=e.changeXY,o=e.dragKey,a=e.returnPos,i=e.dragLineKeyObj,l=t.width,s=t.height,u=t.x,c=t.y;return o.split("").forEach(function(e){switch(e){case"l":i.x="xLeft",a=r({},a,{x:u+n.x,width:l-n.x});break;case"r":i.x="xRight",a=r({},a,{width:l+n.x});break;case"t":i.y="yTop",a=r({},a,{y:c+n.y,height:s-n.y});break;case"b":i.y="yBottom",a=r({},a,{height:s+n.y})}}),a}function w(e){var t=e.oldPosi,n=e.changeXY,o=(e.isDragLine,e.dragKey),a=e.WHproportion,i=e.element,l=i.type,s=i.cutVals,u={};o=function(e){var t=e.oldPosi,n=e.changeXY,r=e.dragKey,o=e.WHproportion;if(!$.isUndefined(o))switch(r){case"rt":case"lb":case"lt":case"rb":var a=t.width,i=t.height,l={lt:[!1,!1],rt:[!0,!1],lb:[!1,!0],rb:[!0,!0]};l[r][0]||(n.x=-n.x),l[r][1]||(n.y=-n.y);var s=Math.pow(a+n.x,2)+Math.pow(i+n.y,2),u=Math.sqrt(s/(1+Math.pow(o,2))),c=s>Math.pow(a,2)+Math.pow(i,2)?1:-1;n.x=(l[r][0]?1:-1)*c*Math.abs(u*o-a),n.y=(l[r][1]?1:-1)*c*Math.abs(u-i);break;case"l":n.y=-n.x/o,r="lb";break;case"r":n.y=n.x/o,r="rb";break;case"t":n.x=-n.y*o,r="rt";break;case"b":n.x=n.y*o,r="rb"}return r}({oldPosi:t,changeXY:n,dragKey:o,WHproportion:a}),_({oldPosi:t,limitPosi:g.elementBaseVal[l],dragKey:o,changeXY:n,element:i});var c={};u=function(e){var t=e.pos,n=e.oldPosi,r=m["default"].width;return P({pos:t,oldPosi:n,limitPosi:{width:r-v}})}({pos:u=b({oldPosi:t,changeXY:n,dragKey:o,returnPos:u,dragLineKeyObj:c}),oldPosi:t});var d=r({},t,u);!function(e){var t=e.WHproportion,n=e.dragAllPosi,r=e.returnPos,o=e.dragKey;if(!$.isUndefined(t)){var a=n.width,i=n.height;a/i<t?("lt"==o&&(n.y+=n.height-a/t,r.y=n.y),n.height=a/t,r.height=n.height):a/i>t&&("lt"==o&&(n.x+=n.width-i*t,r.x=n.x),n.width=i*t,r.width=n.width)}}({WHproportion:a,dragAllPosi:d,returnPos:u,dragKey:o});var f=p.dragMoveAdhereFunc({dragPosi:d,dragLineKeyObj:c}),h=f.adhereX,y=f.adhereY;if(!$.isUndefined(a)){var w="lt"==o||"rb"==o?1:-1;0!=h&&0!=y?Math.abs(h)<Math.abs(y)?y=w*h/a:h=w*y*a:0!=h?y=w*h/a:0!=y&&(h=w*y*a)}return 0!=h&&("xLeft"==c.x?(u.x=d.x-h,u.width=d.width+h):u.width=d.width-h),0!=y&&("yTop"==c.y?(u.y=d.y-y,u.height=d.height+y):u.height=d.height-y),u=C({elementType:l,element:i,returnPos:u=function(e){var t=e.elementType,n=e.cutVals,o=e.returnPos,a=e.oldPosi;if("image"==t&&n&&n.boxWidth){var i=r({},n),l=o.width/a.width;for(var s in i)i[s]*=l;o.cutVals=i}return o}({elementType:l,cutVals:s,returnPos:u,oldPosi:t}),oldPosi:t})}function C(e){var t=e.elementType,n=(e.element,e.returnPos),r=e.oldPosi;if("table"==t){var o=Math.round((n.width||r.width)-r.width),a=Math.round((n.height||r.height)-r.height);if(r.columnPosi){var i=$.getChangePosiArr(o,r.columnPosi);n.columnPosi=i}if(r.linePosi){var l=$.getChangePosiArr(a,r.linePosi);n.linePosi=l}}return n}function P(e){var t=e.pos,n=e.oldPosi,o=e.limitPosi,a=o.width,i=o.height,l=o.x,s=void 0===l?0:l,u=o.y,c=void 0===u?0:u,d=o.minWidth,p=void 0===d?1:d,f=o.minHeight,h=void 0===f?1:f,y=r({},n,t),g=y.x,m=y.y;return!$.isUndefined(t.x)&&t.x<s&&(t.width+=t.x,t.x=s),!$.isUndefined(t.y)&&t.y<c&&(t.height+=t.y,t.y=c),$.isUndefined(t.width)||(t.width=Math.max(Math.min(t.width,a-g),p)),$.isUndefined(t.height)||(t.height=Math.max(i?Math.min(t.height,i-m):t.height,h)),t}function O(e){var t=e.clientX,n=e.clientY,r="line"==e.currentTarget.getAttribute("data-dragtype"),o=e.currentTarget.getAttribute("data-dragkey"),p=d.findSelectElement()[0],g=p.id,m=p.width,v=p.height,_=p.x,b=p.y,C=p.columnPosi,P=void 0===C?[]:C,O=p.linePosi,x=void 0===O?[]:O,E={width:m,height:v,x:_,y:b,columnPosi:$.extend(!0,[],P),linePosi:$.extend(!0,[],x)},k=$.extend(!0,{},p),D={},S=function(e){var t,n=e.element,r=e.dragKey,o=e.elementOtherVal,a=n.width,i=n.height,u=n.type,c=n.src,d=n.symbolKey,p=n.pageKey,f=n.hasBorder,h=void 0!==f&&f,y=n.borderType,g=void 0===y?"":y;if("image"==u&&c)t=a/i;else if("contr"==u){var m=d&&l["default"].getOneSymbolByLib(d);m&&(t=m.width/m.height)}else if("page"==u){var v=s["default"].getPages()[p];(v||h&&"phone-border"==g)&&(o.page=v,"t"!=r&&"b"!=r&&(t=a/i))}return t}({element:p,dragKey:o,elementOtherVal:D});h.initDragChangePosi({autoChangeFunc:function(e){return f.getDragScrollRatio(e,!1)},arriveCriticalFunc:function(){var e=c["default"].getDragChangePosiSet().ratio,t=$(".prd-content-panel")[0].scrollTop,n=t<=0&&-1==e;return n||($(".prd-content-panel")[0].scrollTop=Math.max(t+20*e,0)),n}}),$.setDrag({name:"prdElementDragMove",posi:[t,n],target:e.target,moveFunc:function(e){var i=e.clientX,l=e.clientY,s=e.shiftKey;h.changeDragChangePosi({clientX:i,clientY:l,shiftKey:s},function(e){var u=e.autoChangePosi,c=(e.ratio,u.autoChangePosiX),d=void 0===c?0:c,p=u.autoChangePosiY,f=w({oldPosi:E,changeXY:{x:i-t+d,y:l-n+(void 0===p?0:p)},isDragLine:r,dragKey:o,WHproportion:S||(s?m/v:undefined),element:k});D.page&&(f=function(e){var t=e.changeVal,n=e.element,r=e.dragKey,o=e.elementOtherVal,a=n.cutTop,i=void 0===a?0:a;if("t"==r||"b"==r){"t"==r&&(t.cutTop=Math.max(i+t.y-n.y,0));var l=n.width,s=window.phoneSize.width,u=o.page.pageHeight,c=l/s;u=u||window.phoneSize.height,t.height=Math.min(t.height,Math.max(u,window.phoneSize.height)*c-i)}return t.width&&0!=i&&Math.round(t.width)!=Math.round(n.width)&&(t.cutTop=t.width*i/n.width),t}({changeVal:f,element:k,dragKey:o,elementOtherVal:D})),a["default"].updateValById({id:g,updateVal:f}),a["default"].emitElementContentChange()})},endFunc:function(e){h.endDragChangePosi(),y.calcContainerHeight(),i["default"].setPrdAdhereLineData({x:{},y:{}}),e.clientY==n&&e.clientX==t||u["default"].createData({type:"prdDragSpotChange",name:"PRD 拖拽组件宽高改变",autoSaveType:"prd"})}}),$.stopPropagation(e)}t.reviseChangeXY=_,t.dragBasePosChange=b,t.getChangePos=w,t.changeTableVals=C,t.limitPosScope=P,t.prdDragSpotFunc=O,t["default"]={prdDragSpotFunc:O}},1234:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(1313)),s=n(33),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=s.findSelectElement()[0];return e?i["default"].createElement("div",{className:"prd-inner-link-list-panel"},i["default"].createElement(l["default"],{id:e.id})):null},t}(i["default"].Component);t["default"]=u},1235:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),i=o(n(10)),l=n(33);function s(e,t){void 0===t&&(t="");var n=t||l.findSelectElement()[0].id;a["default"].updateValById({id:n,updateVal:r({},e,{isEdit:!1})}),i["default"].createData({type:"saveLinkUrl",name:"PRD 保存添加的链接地址",autoSaveType:"prd"})}function u(){var e=l.findSelectElement()[0].id;a["default"].updateValById({id:e,updateVal:{linkUrl:""}}),i["default"].createData({type:"clearLinkUrl",name:"PRD 清除添加的链接地址",autoSaveType:"prd"})}t.setPrdWebUrl=s,t.clearPrdWebUrl=u,t["default"]={setPrdWebUrl:s,clearPrdWebUrl:u}},1267:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _getOwnPropertyDescriptor=__webpack_require__(123),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_extends2=__webpack_require__(36),_extends3=_interopRequireDefault(_extends2),_getPrototypeOf=__webpack_require__(17),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(13),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(16),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(14),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(15),_inherits3=_interopRequireDefault(_inherits2),_desc,_value,_class,_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_classnames=__webpack_require__(12),_classnames2=_interopRequireDefault(_classnames),_autobindDecorator=__webpack_require__(4),_autobindDecorator2=_interopRequireDefault(_autobindDecorator),_DataHandle=__webpack_require__(408),_DataHandle2=_interopRequireDefault(_DataHandle),_EventHandle=__webpack_require__(954),_EventHandle2=_interopRequireDefault(_EventHandle),_getContrHandle=__webpack_require__(1270),_getContrHandle2=_interopRequireDefault(_getContrHandle),_ContrStyleHandle=__webpack_require__(307),_ContrStyleHandle2=_interopRequireDefault(_ContrStyleHandle),_ExtraBaseContrHandle=__webpack_require__(171),_ExtraBaseContrHandle2=_interopRequireDefault(_ExtraBaseContrHandle),_getExtraBaseViewContr=__webpack_require__(1275),_getExtraBaseViewContr2=_interopRequireDefault(_getExtraBaseViewContr),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _applyDecoratedDescriptor(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=undefined),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}enterModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).enterModule,enterModule&&enterModule(module);var ContrComp=(_class=function(_React$Component){function ContrComp(e){(0,_classCallCheck3["default"])(this,ContrComp);var t=(0,_possibleConstructorReturn3["default"])(this,(ContrComp.__proto__||(0,_getPrototypeOf2["default"])(ContrComp)).call(this,e));return t.state={timers:[],eventHammers:{},eTypeClass:"",renderChange:1},t}return(0,_inherits3["default"])(ContrComp,_React$Component),(0,_createClass3["default"])(ContrComp,[{key:"componentDidMount",value:function(){var e=this.props.contr,t=$("#"+$.getContrId(e)+">.childrenBox");(e.scrollX||e.scrollY)&&t.on("touchmove",function(e){e.stopPropagation()}),this.setEvents()}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.state.renderChange==t.renderChange,r="page"==e.updateType;return n&&(r||e.isUpdateParent||e.mustChange)}},{key:"componentWillUpdate",value:function(){this.offEvents()}},{key:"componentDidUpdate",value:function(){this.setEvents()}},{key:"_noteMouseEnter",value:function(e){if(window.addListNoteHoverClass){var t=e.currentTarget.getAttribute("data-pageid"),n=e.currentTarget.getAttribute("data-key"),r=e.currentTarget.getAttribute("data-note");window.addListNoteHoverClass(t,n,r)}}},{key:"_noteMouseLeave",value:function(e){if(window.removeListNoteHoverClass){var t=e.currentTarget.getAttribute("data-pageid"),n=e.currentTarget.getAttribute("data-key");window.removeListNoteHoverClass(t,n)}}},{key:"focus",value:function(){$("#"+$.getContrId(this.props.contr)+" p").focus()}},{key:"render",value:function(){var e=this,t=e.props.contr,n=$.getContrId(t),r=e.props.symbolChild&&e.props.symbolChild[n],o={text:"textC",hotspot:"hotspotC",icon:"iconC",image:"imageC",wrapbox:"wrapBox",symbol:"symbol",table:"tableC"},a={onMouseDown:function(e){["sH","sV","sT","sD","sL","sR"].some(function(t){return!!$.hasClass(e.currentTarget,t)})&&e.stopPropagation()}},i=$.getContrEndState(t),l="symbol"==t.type?"symbol_"+t.symbolKey:"";"contr"!=e.props.updateType&&r&&!$.isUndefined(r.endState)&&(i=r.endState);var s=t.scrollX||t.scrollY,u=(o[t.type]?o[t.type]:"")+" "+(e.props.isMergeBox?"mDiv":"cDiv")+(t.isDepend?" fixed":"")+" state"+(+i+1)+" "+l+" "+n,c=null,d=e.props.parentStateCache,p=e.props.stateAncestor,f=$.extend(!0,{},e.props.ancestorState)||{},h=void 0,y={},g={};t.isDepend&&window.fixedData&&(window.fixedData[e.props.page.key]=!0,window.isLocal&&(g={"data-ori-left":t.left,"data-ori-top":t.top})),s&&window.innerScrollData&&(window.innerScrollData[e.props.page.key]=!0),t.states&&!$.isEmptyObj(t.states)&&($.isEmptyObj(d)&&(p=n),d[n]||(d[n]={}),d[n][i]||(d[n][i]={}),h=d[n][i],f[n]=i);var m=_react2["default"].createElement("div",{className:"outerBorderBox stretch-wrapper"}),v=t.noteContent&&!window.isMobile?_react2["default"].createElement("div",{className:"note-box contr-note-box page"+e.props.page.key+"Note"+n,"data-note":t.noteContent,"data-key":n,"data-name":t.name,"data-pageid":e.props.page.key,id:"page"+e.props.page.key+"Note"+n,onMouseEnter:e._noteMouseEnter,onMouseLeave:e._noteMouseLeave},_react2["default"].createElement("div",{className:"note"},"N")):undefined;switch(a["data-select"]=e.props.select+(e.props.select?" .":".")+n,window.__c&&(window.__c[a["data-select"]]=t),t.type){case"text":r&&!$.isUndefined(r.content)&&((t=$.extend(!0,{},t)).content=r.content,window.__c&&(window.__c[a["data-select"]]=t));var _="inputText"==t.baseContrType,b={},w={};"inputText"==t.baseContrType?(b={contentEditable:!0,placeholder:t.content,onClick:e.stopPropagation},w={onClick:e.focus}):b={dangerouslySetInnerHTML:{__html:t.content.replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;").replace("\b","")}},t.autoW&&y.width&&delete y.width;var C=_react2["default"].createElement("p",(0,_extends3["default"])({className:"content "+(_?"isInput ":"")+t.vertical+" "+t.horizontal+(t.isB?" tB":"")+(t.isI?" tI":"")+(t.isU?" tU":"")+(t.isS?" tS":"")},b));c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u+("inputText"==t.baseContrType?" editable":"")+(t.autoW?" auto-width":"")+(t.fontSize<12?" minFont":""),style:y,ref:"contr","data-state":i},w,g,a),v,C,m);break;case"hotspot":c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,ref:"contr"},a),v);break;case"icon":r&&!$.isUndefined(r.iconKey)&&((t=$.extend(!0,{},t)).iconKey=r.iconKey,window.__c&&(window.__c[a["data-select"]]=t)),c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,style:y,ref:"contr","data-state":i},g,a),v,_react2["default"].createElement("i",{className:"material-icons icon iconfont"},t.iconKey));break;case"image":r&&r.src&&((t=$.extend(!0,{},t)).src=r.src,window.__c&&(window.__c[a["data-select"]]=t));var P={},O=void 0,x=!t.src||t.src&&-1!=t.src.indexOf("defaultImg"),E=window.h5ImgUrl+t.src;if(window.isLocal)try{E="images/"+/\/([^\/]*?\.(jpg|png|svg|jpeg|gif|webp|bmp|ico))/i.exec(t.src)[1]}catch(L){console.log(L)}x?O="cImg default-img material-icons":(P.backgroundImage="url("+E+")",O="cImg"),c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,style:y,ref:"contr","data-state":i},g,a),v,_react2["default"].createElement("div",{className:"cutImgOutBox"},x?_react2["default"].createElement("div",{className:O,style:P}):_react2["default"].createElement("img",{className:O,src:E})),_react2["default"].createElement("div",{className:"insetBorder"}),m);break;case"tableCell":var k=void 0;if(t.content){var D={__html:t.content.replace(/\n/g,"<br/>").replace(/\s/g,"&nbsp;")};k=_react2["default"].createElement("span",{dangerouslySetInnerHTML:D})}c=_react2["default"].createElement("td",(0,_extends3["default"])({key:n,id:t.tableId+"_"+n,className:(0,_classnames2["default"])(n+" "+t.vertical+" "+t.horizontal,{tB:t.isB,tI:t.isI,tU:t.isU,tS:t.isS,"no-border-top":t.noBorderTop,"no-border-right":t.noBorderRight,"no-border-bottom":t.noBorderBottom,"no-border-left":t.noBorderLeft}),colSpan:t.colSpan,rowSpan:t.rowSpan,width:Math.round(t.width),height:Math.round(t.height)},a),k);break;case"table":var S=[],j="table-style-"+t.styleIndex,M={},T=[];t.linePosi.forEach(function(r,o){var i=[];t.columnPosi.forEach(function(l,s){if(!M[s+"_"+o]){var u=$.getOneCellData(t.child[s+"_"+o]),c=u&&u.mergeColumn?+u.mergeColumn+1:1,d=u&&u.mergeLine?+u.mergeLine+1:1;if(c>1&&d>1)for(var y=c-1;y>=0;y--)for(var g=d-1;g>=0;g--)M[y+s+"_"+(o+g)]=!0;else if(c>1)for(var m=c-1;m>0;m--)M[m+s+"_"+o]=!0;else if(d>1)for(var v=d-1;v>0;v--)M[s+"_"+(o+v)]=!0;i.push(_react2["default"].createElement(ContrComp,(0,_extends3["default"])({key:s+"_"+o,contr:$.extend(!0,$.extend(!0,{type:"tableCell",id:s+"_"+o,colSpan:c,rowSpan:d,width:l,height:r,noBorderTop:0==o,noBorderRight:s+c==t.columnPosi.length,noBorderBottom:o+d==t.linePosi.length,noBorderLeft:0==s,tableId:n},u),u.text),page:e.props.page,pageIndex:e.props.pageIndex,isMergeBox:!0,updateType:e.props.updateType,updateContrId:e.props.updateContrId,updateParent:e.props.updateParent,parentStateCache:h||e.props.parentStateCache,stateAncestor:p,ancestorState:f,symbolChild:A,symbolParent:F},a)))}}),S.push(_react2["default"].createElement("tr",{key:o},i))}),t.columnPosi.forEach(function(e){T.push(_react2["default"].createElement("col",{style:{width:e}}))}),c=_react2["default"].createElement("table",(0,_extends3["default"])({key:n,id:n,className:u+" "+j,ref:"contr",cellPadding:"0"},g,a),v,T,_react2["default"].createElement("tbody",null,S));break;case"symbol":case"wrapbox":var A=e.props.symbolChild,F=e.props.symbolParent;"symbol"==t.type&&(A=A?$.extend(!0,$.extend(!0,{},t.children),A):$.extend(!0,{},t.children),(F=F?F.concat():[]).push(n));var I=[];t.hierarchy&&t.hierarchy.concat().reverse().forEach(function(r){var o=t.contrs[r];if(!o)return!1;var i=$.getContrId(o),l=!!window.isInPrd||-1!==e.props.updateParent.indexOf(n),s=e.props.mustChange||e.props.updateContrId==r;("page"==e.props.updateType||l||s)&&(o=_DataHandle2["default"].getAllValsContr({contrKey:o,symbolChild:A})),I.push(_react2["default"].createElement(ContrComp,(0,_extends3["default"])({key:i,contr:o,page:e.props.page,pageIndex:e.props.pageIndex,isMergeBox:!0,updateType:e.props.updateType,updateContrId:e.props.updateContrId,updateParent:e.props.updateParent,isUpdateParent:l,mustChange:s,parentStateCache:h||e.props.parentStateCache,stateAncestor:p,ancestorState:f,symbolChild:A,symbolParent:F,select:e.props.select+(e.props.select?" .":".")+n},a)))}),c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,style:y,ref:"contr","data-state":i},g,a),v,_react2["default"].createElement("div",{className:"childrenBox"+(!window.isMobile&&s?" dragscroll":""),"data-direction":t.scrollX&&t.scrollY?"":t.scrollX?"x":"y",onWheel:!window.isMobile&&s?e.stopPropagation:null},I),_react2["default"].createElement("div",{className:"insetBorder"}),m)}if($.isAdvancedAllContr(t.type)){var R=_ContrStyleHandle2["default"].getStyles({contr:t,type:"box"});u+=" advanced-contr",c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,ref:"contr","data-state":i},g,a),v,_getContrHandle2["default"].getAdvancedContr(t,R))}else if(_ExtraBaseContrHandle2["default"].isExtraBaseContr(t.type)){var N=_getExtraBaseViewContr2["default"].getContr(t.type);c=_react2["default"].createElement("div",(0,_extends3["default"])({key:n,id:n,className:u,ref:"contr","data-state":i},g,a),v,_react2["default"].createElement(N,{contr:t,contrId:$.getContrId(t)}),m)}return c}},{key:"setAdvancedContrEvents",value:function(e,t,n){var r=this,o=e||r.props.contr,a=o.data||o.child,i=$.isUndefined(n)?0:n+1;if(!a||!$.isArray(a))return!1;a.forEach(function(e,n){var a=t||[];if(a[i]=n,a.length-1>i&&a.splice(i+1,a.length-1-i),"menu"==o.type&&!1!==o.allowRouter&&e.child&&0==e.child.length&&!e.events){var l=_DataHandle2["default"].getPageByName(e.title);$.isUndefined(l)||(e.events={tA:{actions:[{page:l,type:"page"}],disable:!1,name:null,type:"tA"}})}e.events&&r.setEvents($.extend({id:o.id,type:o.type},e),a),e.child&&r.setAdvancedContrEvents($.extend({id:o.id,type:o.type,allowRouter:o.allowRouter},e),a,i)})}},{key:"setEvents",value:function(e,t){if(window.isInPrd)return!1;var n=e||this.props.contr,r=n.events,o=n.tableId?n.tableId+"_"+$.getContrId(n):$.getContrId(n);if(!e&&$.isAdvancedAllContr(n.type)&&this.setAdvancedContrEvents(),r&&0!==$.objLength(r)){var a=_EventHandle2["default"].setEvents({events:r,updateParent:this.props.updateParent,pageIndex:this.props.pageIndex,pageKey:this.props.page.key,targetId:o,childrenIndex:t,type:n.type,symbolParent:this.props.symbolParent});this.setState({timers:a.timers,eventHammers:a.eventHammers,eTypeClass:a.eTypeClass,renderChange:this.state.renderChange+1})}}},{key:"offEvents",value:function(){var e=this.props.contr,t=e.tableId?e.tableId+"_"+$.getContrId(e):$.getContrId(e);if($.isAdvancedAllContr(this.props.contr.type)||_ExtraBaseContrHandle2["default"].isExtraBaseContr(e.type))return!1;_EventHandle2["default"].offEvents({pageKey:this.props.page.key,targetId:t,eventHammers:this.state.eventHammers,eTypeClass:this.state.eTypeClass,type:this.props.contr.type,timers:this.state.timers,symbolParent:this.props.symbolParent})}},{key:"stopPropagation",value:function(e){e.stopPropagation()}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),ContrComp}(_react2["default"].Component),_applyDecoratedDescriptor(_class.prototype,"focus",[_autobindDecorator2["default"]],(0,_getOwnPropertyDescriptor2["default"])(_class.prototype,"focus"),_class.prototype),_class),_default=ContrComp,reactHotLoader,leaveModule;exports["default"]=_default,reactHotLoader=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0))["default"],reactHotLoader&&(reactHotLoader.register(ContrComp,"ContrComp","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Contr.react.js"),reactHotLoader.register(_default,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Contr.react.js")),leaveModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).leaveModule,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(7)(module))},1268:function(e,t,n){"use strict";(function(e){var r;Object.defineProperty(t,"__esModule",{value:!0}),(r=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).enterModule)&&r(e);var o,a,i={},l={getTimeline:function(e,t,n){return i[e+"_"+t+"_"+n]},setTimeline:function(e,t,n,r){i[e+"_"+t+"_"+n]=r}},s=l;t["default"]=s,(o=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0))["default"])&&(o.register(i,"timelines","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/stores/AnimStore.js"),o.register(l,"AnimStore","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/stores/AnimStore.js"),o.register(s,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/stores/AnimStore.js")),(a=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).leaveModule)&&a(e)}).call(this,n(7)(e))},1269:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=i(n(140)),a=i(n(408));function i(e){return e&&e.__esModule?e:{"default":e}}(r=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).enterModule)&&r(e),CSSPlugin.defaultForce3D=!0;var l,s,u=void 0,c=void 0,d=void 0,p=void 0,f={delay:0,time:.5,count:1},h=void 0,y={getTimeline:function(e,t,n){var r=new window.TimelineMax({paused:!0}),o={},i=n||1,l=!$.isUndefined(n),s={};d={start:e.next,end:e.curr},u=a["default"].getAllValsContr({contrKey:t||e.contrId}),c=y.getTransition();var f=y.getTrProps();if(p||(p=$.extend(!0,{},d)),y.setChangedContrs(e),y.getDisabled()){if(!l)return"disabled";f.time=0,f.delay=0}if(c||console.log("warning"),!c||!c[d.end]||!c[d.end].contrs)return"noChange";for(var g in c[d.end].contrs)if(h[g]){var m=a["default"].getStartEndContrs(g,e.contrId,p.start),v=m.start,_=m.end,b=c[d.end].contrs[g],w=[],C=[];for(var P in b.units[0].keyframes)C.push(P),w[P]=b.units[0].keyframes[P].frame;C=C.sort(function(e,t){return parseInt(e)-parseInt(t)}),s[g]={keyArr:C,keyframes:w,props:b.units[0].props||{},startContr:v,endContr:_}}var O=function(t){var n=s[t].keyArr,r=s[t].props.time||f.time,a=s[t].props.delay?s[t].props.delay-f.delay:0,l=s[t].props.easing||f.easing,u=s[t].keyframes["0%"];if(o[t]||(o[t]={}),o[t+"_start"]||(o[t+"_start"]={}),n.forEach(function(u,c){if(0!==c)for(var d=s[t].keyframes[u],p=$.extend(!0,$.extend(!0,{},s[t].startContr),d),f=c-1;f>=0;f--){var h=s[t].keyframes[n[f]],g=$.extend(!0,$.extend(!0,{},s[t].startContr),h);for(var m in d){if("state"==m){var v=y.getTimeline({contrId:e.contrId,next:$.isUndefined(p[m].endState)?"-1":p[m].endState,curr:g[m].endState},t,i+1);$.isObject(v)&&$.extend(!0,o,v)}"100%"!=u&&$.isUndefined(s[t].keyframes["100%"][m])&&(s[t].keyframes["100%"][m]=s[t].endContr[m])}o[t][i]={contrId:t,styles:d,curData:p,prevData:g,time:r*(parseInt(u)-parseInt(n[f]))/100,delay:a+parseInt(n[f])/100*r,easing:l,symbolParent:e.symbolParent}}}),!$.isUndefined(u.rotate)||!$.isUndefined(u.filter)){var c={};$.isUndefined(u.rotate)||(c.rotate=u.rotate),$.isUndefined(u.filter)||(c.filter=u.filter),o[t+"_start"][i]={contrId:t,styles:c,curData:$.extend(!0,$.extend(!0,{},s[t].endContr),u),symbolParent:e.symbolParent},o[t+"_start"][i].prevData=o[t+"_start"][i].curData}};for(var x in s)O(x);if(!l){var E=[],k=[],D={};for(var S in o)for(var j in o[S])-1==S.indexOf("_start")?k=k.concat(y.dataToStyle(o[S][j])):E=E.concat(y.dataToStyle(o[S][j]));E.forEach(function(e){"self"==e.type&&(D[e.contrId]=!0),r.set(e.element,$.extend(!0,"self"==e.type?{transformOrigin:"50% 50%",x:0,y:0}:{},e.props),0)}),k.forEach(function(e){var t=e.props;e.start&&r.set(e.element,e.start,e.delay),D[e.contrId]||"self"!=e.type||(r.set(e.element,{x:0,y:0},0),e.rotation&&r.set(e.element,{transformOrigin:"50% 50%"},0)),e.easing&&(t=$.extend(!0,{ease:$.getEasingFuncName(e.easing)},t)),r.to(e.element,e.time,t,e.delay),e.end&&r.set(e.element,e.end)}),p=null}return l?o:r},unrepeatedContrProps:function(e){for(var t in e){var n=e[t];$.objLength(n)>1&&y.unrepeatedProps(n)}},unrepeatedProps:function(e){var t=(0,o["default"])(e),n=[];t.sort(function(e,t){return+t-+e}),t.forEach(function(t){for(var r in e[t].styles)-1!=n.indexOf(r)?delete e[t].styles[r]:n.push(r);0===$.objLength(e[t].styles)&&delete e[t]})},setChangedContrs:function(e){var t={};for(var n in h={},t[d.start]={},t[d.end]={},(-1!=d.start&&!u.states[d.start]||-1!=d.end&&!u.states[d.end])&&console.log("warning"),-1!=d.start&&u.states[d.start]&&(t[d.start]=y.unrepeatedContrs(u,u.states[d.start].contrs)),-1!=d.end&&u.states[d.end]&&(t[d.end]=y.unrepeatedContrs(u,u.states[d.end].contrs)),t[d.end]){var r=$.filterState(t[d.end][n]),o=$.filterState(t[d.start][n]),i={},l={},s=a["default"].getStartEndContrs(n,e.contrId,p.start),c=s.start,f=s.end;for(var g in r)c||console.log("warning:未获取到startContr"),c&&r&&!$.isPropEqual(c[g],r[g],"state"==g)&&(h[n]=!0,y.compareProps({prop:g,startContr:c,endContr:r,reverse:!0,startData:i,endData:l}));for(var m in o)$.isPropEqual(o[m],f[m],"state"==m)||(h[n]=!0,y.compareProps({prop:m,startContr:o,endContr:f,reverse:!1,startData:i,endData:l}));(l.isDelete||i.isDelete)&&(l={isDelete:l.isDelete},i={isDelete:i.isDelete}),y.editFrame(l,n,"0%",!0),y.editFrame(i,n,"100%",!0)}for(var v in t[d.start])if(!t[d.end][v]){var _=$.filterState(t[d.start][v]),b={},w={},C=a["default"].getStartEndContrs(v,e.contrId,p.start).end;for(var P in _)C||console.log("warning:未获取到endContr"),_&&C&&!$.isPropEqual(_[P],C[P],"state"==P)&&(h[v]=!0,y.compareProps({prop:P,startContr:_,endContr:C,reverse:!1,startData:b,endData:w}));(w.isDelete||b.isDelete)&&(w={isDelete:w.isDelete},b={isDelete:b.isDelete}),y.editFrame(w,v,"0%",!0),y.editFrame(b,v,"100%",!0)}},unrepeatedContrs:function(e,t,n){var r=n?t:$.extend(!0,{},t),o=$.getContrId(e);for(var i in r){var l=r[i];a["default"].getAllValsContr({contrKey:i,parentSaveContrVals:l,parentSaveContrId:o})}return r},compareProps:function(e){var t=e.startContr[e.prop],n=e.endContr[e.prop];if("cutVals"==e.prop){var r=e.reverse?n:t;for(var o in t||(t=$.getDefaultCutVals(e.startContr)),n||(n=$.getDefaultCutVals(e.endContr)),r)t[o]!=n[o]&&($.isUndefined(e.startData[e.prop])&&(e.startData[e.prop]={}),$.isUndefined(e.endData[e.prop])&&(e.endData[e.prop]={}),e.startData[e.prop][o]=t[o],e.endData[e.prop][o]=n[o])}else e.reverse?(e.startData[e.prop]=$.isUndefined(t)?null:t,"filter"==e.prop?e.endData[e.prop]=$.extend(!0,$.extend(!0,{},t),n):e.endData[e.prop]=n):(e.endData[e.prop]=$.isUndefined(n)?null:n,"filter"==e.prop?e.startData[e.prop]=$.extend(!0,$.extend(!0,{},n),t):e.startData[e.prop]=t)},editFrame:function(e,t,n,r){var o=void 0,a=void 0;if(r&&$.isEmptyObj(e)&&(!c[d.end]||!c[d.end].contrs||!c[d.end].contrs[t]))return!1;t?((a=y.getContrAnim(t,!0)).keyframes[n]||y.createFrame(n,t,{},!0),o=a.keyframes[n].frame):o=curInfo.keyframe.frame,r?t?a.keyframes[n].frame=e:curInfo.keyframe.frame=e:$.extend(o,e)},getContrAnim:function(e,t){if(c&&c[d.end]&&c[d.end].contrs&&c[d.end].contrs[e]&&c[d.end].contrs[e].units){var n=c[d.end].contrs[e].units[0];return $.isUndefined(n.keyframes)&&(n.keyframes={}),$.isUndefined(n.props)&&(n.props={}),n}return t?(y.setContrAnim(e),c[d.end].contrs[e].units[0]):y.getContrAnimData()},setContrAnim:function(e){c[d.end]||(c[d.end]={});var t=c[d.end];t.contrs||(t.contrs={}),t.contrs[e]||(t.contrs[e]={units:[{index:0,props:{},keyframes:{}}]})},getContrAnimData:function(e){var t={};return e&&c&&c[d.end]&&c[d.end].contrs&&(t=c[d.end].contrs[e]),$.extend(!0,{units:[{index:0,props:{},keyframes:{}}]},t)},createFrame:function(e,t,n,r){var o=y.getContrAnim(t);return o.keyframes[e]={frame:n||{},show:!0,active:!r},o},getTransition:function(){var e=void 0;return $.objLength(u.states)>0&&(-1!=d.start?(u.states[d.start].transition||(u.states[d.start].transition={}),e=u.states[d.start].transition):(u.transition||(u.transition={}),e=u.transition)),e},getTrProps:function(){var e=$.extend({},f);return c||console.log("warning"),c&&c[d.end]&&c[d.end].props&&$.extend(e,c[d.end].props),e},getDisabled:function(){return!(!c||!c[d.end])&&c[d.end].disabled},dataToStyle:function(e){var t={},n=[],r=e.contrId.split("_")[0],a=y.getStyleCategory(r),i=e.curData,l=function(n){a[n].stylesArr.forEach(function(r){if(!$.isUndefined(e.styles[r])){var o="#"+e.contrId;e.symbolParent&&(o="#"+e.symbolParent.join(" #")+" "+o),$.isUndefined(t[n])&&(t[n]={element:$.query(o+" "+a[n]["class"]),process:{},ins:{},startData:{}}),function l(t,n,r,o){var a=y.styleDict(t);var s=e.styles[t];switch(t){case"textShadow":n.process[a]="rgba(0,0,0,0.5) 0px "+$.convertNum(s,"px")+" "+$.convertNum(s,"px");break;case"opacity":n.process[a]=s/100;break;case"insetBorder":n.process[a]=$.convertNum(s)+" "+$.getBorderStyle("style",s[2])+" "+s[0];break;case"content":n.ins[a]=s;break;case"vertical":case"horizontal":n.ins[t]=s;break;case"isB":n.ins[a]=s?"bold":"normal";break;case"isI":n.ins[a]=s?"italic":"normal";break;case"isU":n.ins[a]=s?"underline":"none";break;case"isS":n.ins[a]=s?"line-through":"none";break;case"isShow":case"isDelete":var u=!1!==i.isShow&&!i.isDelete;u&&(n.ins[a]="block"),n.process.opacity=u?i.opacity/100:0;break;case"border":"outerBorderBox"==r?(n.process.border=i.border&&null!==(i.border&&i.border[0])?$.convertNum(Math.ceil(i.border[1]))+" "+$.getBorderStyle("style",i.border[2])+" "+i.border[0]:"none",n.process.left=$.convertNum(-Math.ceil(i.border[1]+(i.insetBorder?i.insetBorder[1]:0))),n.process.top=$.convertNum(-Math.ceil(i.border[1]+(i.insetBorder?i.insetBorder[1]:0))),n.process.width="calc(100% + "+$.convertNum(2*Math.ceil(i.insetBorder[1]))+")",n.process.height="calc(100% + "+$.convertNum(2*Math.ceil(i.insetBorder[1]))+")"):l("shadow",n,r);break;case"shadow":if(!n.process[a]){var c="";!i.border&&"table"!=i.type||$.isUndefined(i.shadow)||"0"==i.shadow||(c=$.isArray(i.shadow)?i.shadow[0]+"px "+i.shadow[1]+"px "+i.shadow[2]+"px "+i.shadow[3]+"px "+i.shadow[4]+(i.shadow[5]?" inset":""):"0px "+i.shadow+"px "+i.shadow+"px "+(i.border&&i.border[1]?i.border[1]:0)+"px rgba(0,0,0,0.5)"),n.process[a]=c?""+c:"none"}break;case"rotate":n.process[a]=s,l("left",n,r,t),l("top",n,r,t);break;case"cutVals":$.extend(!0,n.process,{width:$.convertNum(i.cutVals.boxWidth),height:$.convertNum(i.cutVals.boxHeight),"margin-left":$.convertNum(s.boxLeft),"margin-top":$.convertNum(s.boxTop)});break;case"filter":n.process.webkitFilter=$.getFilter(s),n.process.filter=$.getFilter(s);break;case"radius":case"isMaxRadius":n.process[a]||("outerBorderBox"==r&&i.border[1]?n.process[a]=i.isMaxRadius?$.convertNum(Math.ceil(Math.min(i.width,i.height))+$.getRadiusAddValue(i.radius,i.border[1]),"px"):$.isArray(i.radius)?i.radius.map(function(e){return""+$.convertNum(Math.ceil(e)+$.getRadiusAddValue(e,i.border[1]),"px")}).join(" "):$.convertNum(Math.ceil(i.radius)+$.getRadiusAddValue(i.radius,i.border[1]),"px"):n.process[a]=i.isMaxRadius?$.convertNum(Math.ceil(Math.min(i.width,i.height)),"px"):$.isArray(i.radius)?i.radius.map(function(e){return e+"px"}).join(" "):$.convertNum(Math.ceil(i.radius),"px"));break;case"backColor":case"hasBackColor":n.process[a]||(n.process[a]=i.hasBackColor?i.backColor:"transparent");break;case"left":case"top":var d="rotate"==o?$.getRotatePosiDiff({rotate:i.rotate,width:i.width,height:i.height,type:t}):0;n.process[a]=e.prevData?$.convertNum(i[t]-e.prevData[t]-d,"px"):0;break;case"width":case"height":if("icon"==r){if($.isUndefined(n.process.fontSize)){var p=1,f=1;n.process.fontSize=$.convertNum(Math.max(Math.max(i.width,i.height),12)),i.width!=i.height&&(i.width>i.height?f=i.height/i.width:p=i.width/i.height),n.process.transform=1!=p||1!=f?(1!=p?"scaleX("+p+")":"")+(1!=f?" scaleY("+f+")":""):"none"}}else"textBox"==r?l("fontSize",n,r):"self"!=r?l("radius",n,r):(n.process[a]=$.convertNum(s,"px"),l("radius",n,r));break;case"independWH":case"outerHidden":n.process.overflow=!i.independWH&&i.outerHidden?"hidden":"visible";break;case"textColor":case"iconColor":n.process[a]=s;break;case"fontSize":(s<12||e.prevData.fontSize<12)&&window.fromIframe&&(n.ins.width="100%",n.ins.scale=1,"vM"==i.vertical?n.ins.y="-50%":n.ins.y=0,s=Math.max(s,12)),n.process[a]=$.convertNum(s);break;case"scale":n.process.transform="scale("+s/10+")";break;default:n.process[a]=$.convertNum(s)}}(r,t[n],n)}})};for(var s in a)l(s);var u=function(r){if((0,o["default"])(t[r].process).length>0){var a={},i={};n.push({element:t[r].element,props:t[r].process,time:e.time,delay:e.delay,start:0!==$.objLength(a)&&a,end:0!==$.objLength(i)&&i,easing:e.easing,type:r,contrId:e.contrId})}if((0,o["default"])(t[r].ins).length>0){if("textBox"==r){var l="";[["horizontal",t[r].ins.horizontal],["vertical",t[r].ins.vertical]].forEach(function(e){$.isUndefined(t[r].ins[e[0]])||(l+=(""!==l?" ":"")+e[1],delete t[r].ins[e[0]])}),""!==l&&(e.prevData?t[r].ins.className="+="+l:t[r].ins.className="-="+l)}n.push({element:t[r].element,props:t[r].ins,time:0,delay:e.delay,type:r,contrId:e.contrId})}};for(var c in t)u(c);return n},styleDict:function(e){return{width:"width",height:"height",left:"x",top:"y",rotate:"rotation",radius:"borderRadius",isMaxRadius:"borderRadius",shadow:"box-shadow",opacity:"opacity",backColor:"backgroundColor",hasBackColor:"backgroundColor",iconColor:"color",insetBorder:"border",adjaceney:"letterSpacing",textColor:"color",fontSize:"fontSize",textShadow:"textShadow",lineHeight:"lineHeight",indent:"textIndent",content:"value",border:"boxShadow",isShow:"display",isDelete:"display",outerHidden:"overflow",scrollX:"overflow-x",scrollY:"overflow-y",isDepend:"position"}[e]},getStyleCategory:function(e){var t={"class":"",stylesArr:"hotspot"==e||"icon"==e?["width","height","left","top","opacity","rotate","isShow","isDelete","isDepend"]:["width","height","left","top","backColor","hasBackColor","radius","isMaxRadius","border","shadow","opacity","rotate","isShow","isDelete","isDepend"]},n={"class":">.outerBorderBox",stylesArr:["radius","isMaxRadius","width","height","border"]};switch(e){case"text":return t.stylesArr.push("insetBorder"),{self:t,textBox:{"class":" .content",stylesArr:["width","adjaceney","indent","textColor","lineHeight","textShadow","fontSize"]},outerBorderBox:n};case"hotspot":return{self:t};case"icon":return{self:t,icon:{"class":" i",stylesArr:["iconColor","width","height"]}};case"image":return{self:t,insetBorder:{"class":" .insetBorder",stylesArr:["insetBorder","radius","isMaxRadius","width","height"]},imgBox:{"class":" .cutImgOutBox",stylesArr:["radius","isMaxRadius","width","height"]},img:{"class":" .cImg",stylesArr:["cutVals","filter"]},outerBorderBox:n};case"wrapbox":return t.stylesArr.push("outerHidden","scrollX","scrollY"),{self:t,insetBorder:{"class":">.insetBorder",stylesArr:["insetBorder","radius","isMaxRadius","width","height"]},childrenBox:{"class":">.childrenBox",stylesArr:["radius","isMaxRadius","outerHidden","scrollX","scrollY"]},outerBorderBox:n};case"symbol":return{self:{"class":"",stylesArr:["left","top"]},childrenBox:{"class":">.childrenBox",stylesArr:["scale"]}}}}},g=y;t["default"]=g,(l=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0))["default"])&&(l.register(u,"curContr","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(c,"curTr","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(d,"curState","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(p,"parentState","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(f,"defaultProps","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(h,"changedContrs","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(y,"AnimHandle","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js"),l.register(g,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/AnimHandle.js")),(s=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).leaveModule)&&s(e)}).call(this,n(7)(e))},1270:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1)),a=r(n(12)),i=r(n(429)),l=r(n(1271)),s=r(n(1272)),u=r(n(138)),c=r(n(307)),d=n(310),p=window.$,f=new(function(){function e(){}return e.prototype.getAdvancedContr=function(e,t){var n,r=u["default"].getType(e.type)+"-box",i=f.getAdvancedBaseContr(e.type),l=c["default"].getStyles({_contr:e,type:"selectBox"});return o["default"].createElement("div",{className:a["default"](""+r,(n={},n[p.getAdvancedStyleClass(e.type)]=!0,n)),style:l},i?o["default"].createElement(i,{contr:d.fixDefaultData(e),contrId:p.getContrId(e),boxStyle:t}):undefined)},e.prototype.getAdvancedBaseContr=function(e){var t;return p.isAdvancedContr(e)?t=s["default"].getContr(e):p.isMobileContr(e)?t=l["default"].getContr(e):p.isChartContr(e)&&(t=i["default"].getContr(e)),t},e}());t["default"]=f},1271:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(498)),a=r(n(499)),i=r(n(500)),l=r(n(501)),s=r(n(502)),u=r(n(445)),c=r(n(503)),d=r(n(504)),p=r(n(505)),f=r(n(506)),h=r(n(446)),y=r(n(507)),g=r(n(508)),m=r(n(509)),v=r(n(510)),_=new(function(){function e(){}return e.prototype.getContr=function(e){var t;switch(e){case"carouselM":t=o["default"];break;case"carouselTextM":t=a["default"];break;case"sliderM":t=u["default"];break;case"rangeM":t=c["default"];break;case"stepperM":t=d["default"];break;case"paginationM":t=i["default"];break;case"radioM":t=p["default"];break;case"checkboxM":t=f["default"];break;case"switchM":t=h["default"];break;case"menuM":t=y["default"];break;case"pickerM":t=g["default"];break;case"segmentedControlM":t=m["default"];break;case"calendarM":t=l["default"];break;case"datePickerM":t=s["default"];break;case"accordionM":t=v["default"]}return t},e}());t["default"]=_},1272:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(484)),a=r(n(485)),i=r(n(486)),l=r(n(482)),s=r(n(483)),u=r(n(487)),c=r(n(488)),d=r(n(1273)),p=r(n(490)),f=r(n(491)),h=r(n(492)),y=r(n(445)),g=r(n(446)),m=r(n(493)),v=r(n(1274)),_=r(n(495)),b=r(n(496)),w=r(n(497)),C=new(function(){function e(){}return e.prototype.getContr=function(e){var t;switch(e){case"dropdown":t=l["default"];break;case"menu":t=s["default"];break;case"pagination":t=o["default"];break;case"cascader":t=u["default"];break;case"checkbox":t=c["default"];break;case"datePicker":t=d["default"];break;case"rate":t=p["default"];break;case"radio":t=f["default"];break;case"select":t=h["default"];break;case"slider":t=y["default"];break;case"switch":t=g["default"];break;case"treeSelect":t=m["default"];break;case"timePicker":t=v["default"];break;case"transfer":t=_["default"];break;case"calendar":t=a["default"];break;case"carousel":t=i["default"];break;case"collapse":t=b["default"];break;case"tree":t=w["default"]}return t},e}());t["default"]=C},1273:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(489)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:undefined},n}return o(t,e),t.prototype.handleChange=function(e,t){this.setState({value:t})},t.prototype.render=function(){var e=this.props,t=this.handleChange,n=this.state.value;return u["default"].createElement(d["default"],a({},e,{changeFunc:t,dateVal:n}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[Object,Object]),l("design:returntype",void 0)],t.prototype,"handleChange",null),t}(u["default"].Component);t.DatePickerContrComp=p,t["default"]=p},1274:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(494)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={value:undefined},n}return o(t,e),t.prototype.handleChange=function(e,t){this.setState({value:t})},t.prototype.render=function(){var e=this.props,t=this.state.value,n=this.handleChange;return u["default"].createElement(d["default"],a({},e,{timeVal:t,changeFunc:n}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[Object,Object]),l("design:returntype",void 0)],t.prototype,"handleChange",null),t}(u["default"].Component);t.TimePickerViewContrComp=p,t["default"]=p},1275:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(1276)),a=r(n(1277)),i=r(n(1278)),l=r(n(1280)),s=new(function(){function e(){}return e.prototype.getContr=function(e){var t;switch(e){case"map":t=o["default"];break;case"audio":t=i["default"];break;case"video":t=a["default"];break;case"webPage":t=l["default"]}return t},e}());t["default"]=s},1276:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(1008)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={title:"",inputValue:""},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.contr,n=t.location,r=t.zoom,o=t.isZoomIn,a=t.isDrag,s=t.isHaveInput,u=t.width,c=t.height,d=t.address,p=e.contrId;return i["default"].createElement(l["default"],{contrId:p,isEdit:!1,mapData:{},center:n,zoom:r+1,isZoomIn:o,isDrag:a,isHaveInput:s,width:u,height:c,defaultAddress:d})},t}(i["default"].Component);t.MapContrViewComp=s,t["default"]=s},1277:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.contr,t=(e.width,e.height,e.image,e.videoUrl);return i["default"].createElement("div",{className:"extra-contr-container stretch-wrapper"},""==t?i["default"].createElement("video",{className:"video-view-container",poster:"https://img.xiaopiu.com/images/default-video-image-f0d45e825c.jpg",controls:!0,controlsList:"nodownload",preload:"auto",autoPlay:!1},i["default"].createElement("source",{src:"https://img.xiaopiu.com/video/default-video.mp4",type:"video/mp4"})):i["default"].createElement("iframe",{frameBorder:"0",allowFullScreen:!0,scrolling:"no",sandbox:"allow-scripts allow-forms allow-pointer-lock allow-same-origin",src:"https://player.youku.com/embed/"+t},i["default"].createElement("p",null,"您的浏览器不支持 iframe 标签，请切换到 chrome 浏览器")))},t}(i["default"].Component);t.VideoContrViewComp=l,t["default"]=l},1278:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(511)),d=l(n(1279)),p=window,f=p.$,h=p.isPrototypeTool,y=function(e){function t(t){var n=e.call(this,t)||this;return n.player=null,n.state={isPlaying:t.contr.isAutoPlay,progress:{played:0},duration:0,played:0,seeking:!1,reactPlayer:null},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;d["default"](function(t){e.setState({reactPlayer:t["default"]})})},t.prototype.handlePlay=function(){var e=this.state.isPlaying;this.setState({isPlaying:!e})},t.prototype.onDuration=function(e){this.setState({duration:e})},t.prototype.onProgress=function(e){this.state.progress;this.setState({progress:e})},t.prototype.onSeekMouseDown=function(e){this.setState({seeking:!0})},t.prototype.onSeekChange=function(e){this.setState({played:parseFloat(e.target.value)})},t.prototype.onSeekMouseUp=function(e){this.setState({seeking:!1}),this.player.seekTo(parseFloat(e.target.value))},t.prototype.onEnded=function(){this.setState({isPlaying:!1})},t.prototype.render=function(){var e=this,t=this.state.reactPlayer;if(!t)return null;var n=this.state,r=n.isPlaying,o=n.duration,a=n.progress,i=n.played,l=this.props.contr,u=l.width,d=l.height,p=l.isLoop,y=l.audioUrl,g=l.audioName,m=l.defaultName,v="",_=f.getScaleRatio(),b=h?u:Math.round(u*_),w=h?d:Math.round(d*_);return(w<64||b<64)&&(v+=" xxsmall"),w<64&&b<100&&(v+=" xxxsmall"),b<140&&(v+=" xsmall"),b<240&&(v+=" small"),s["default"].createElement("div",{className:"audio-player-container "+v+" middle-advanced-box"},s["default"].createElement(t,{ref:function(t){return[e.player=t]},url:"https://img.xiaopiu.com/"+y,playing:r,loop:p,controls:!0,width:0,height:0,onDuration:this.onDuration,onProgress:this.onProgress,onEnded:this.onEnded,className:"react-player"}),s["default"].createElement("div",{className:"audio-wrapper"},s["default"].createElement("div",{className:"audio-play-btn",onClick:this.handlePlay},s["default"].createElement("div",{className:"expand-icon material-icons audio-play-icon"},r?"pause":"play_arrow")),s["default"].createElement("div",{className:"audio-right-info"},s["default"].createElement("div",{className:"audio-info-container clearfix"},s["default"].createElement("div",{className:"audio-title-container"},s["default"].createElement("span",{className:"audio-info-title  text-ellipsis"},"/userAudio/默认音频.mp3"!=y?g.substring(0,g.length-5):m.substring(0,m.length-5)),s["default"].createElement("span",{className:"audio-file-format"},"/userAudio/默认音频.mp3"!=y?g.substring(g.length-5):m.substring(m.length-5))),s["default"].createElement("div",{className:"audio-info-time"},s["default"].createElement("div",null,s["default"].createElement(c["default"],{seconds:a.played*o}),"/",s["default"].createElement(c["default"],{seconds:o})))),s["default"].createElement("div",{className:"audio-progress-container"},s["default"].createElement("div",{className:"audio-progress-bar",style:{width:100*a.played+"%"}}),s["default"].createElement("div",{className:"audio-progress-bg"}),s["default"].createElement("input",{className:"audio-progress-input",type:"range",min:0,max:1,step:"any",value:i,onMouseDown:this.onSeekMouseDown,onChange:this.onSeekChange,onMouseUp:this.onSeekMouseUp})))))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handlePlay",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",void 0)],t.prototype,"onDuration",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"onProgress",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"onSeekMouseDown",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"onSeekChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"onSeekMouseUp",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onEnded",null),t}(s["default"].Component);t.AudioContrViewComp=y,t["default"]=y},1279:function(e,t,n){e.exports=function(e){n.e(46).then(function(t){e(n(1546))}.bind(null,n))["catch"](n.oe)}},1280:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(512)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.contr,n=e.contr,r=(n.width,n.height,n.webUrl),o=n.isScroll;return console.log(t,"contrcontrcontr"),""==r?i["default"].createElement(l["default"],{contr:t}):i["default"].createElement("div",{className:"extra-contr-container stretch-wrapper"},i["default"].createElement("iframe",{src:"https://"+r,scrolling:o?"auto":"no",className:"webpage-show-wrapper",frameBorder:"none"}))},t}(i["default"].Component);t.WebPageViewContrComp=s,t["default"]=s},1281:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _getPrototypeOf=__webpack_require__(17),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(13),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(16),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(14),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(15),_inherits3=_interopRequireDefault(_inherits2),_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_NoteItem=__webpack_require__(1282),_NoteItem2=_interopRequireDefault(_NoteItem),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}enterModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).enterModule,enterModule&&enterModule(module);var NoteComp=function(_React$Component){function NoteComp(){return(0,_classCallCheck3["default"])(this,NoteComp),(0,_possibleConstructorReturn3["default"])(this,(NoteComp.__proto__||(0,_getPrototypeOf2["default"])(NoteComp)).apply(this,arguments))}return(0,_inherits3["default"])(NoteComp,_React$Component),(0,_createClass3["default"])(NoteComp,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var e=this,t=[];return e.props.noteList.forEach(function(n,r){t.push(_react2["default"].createElement(_NoteItem2["default"],{key:r,info:n,pageId:e.props.pageId}))}),_react2["default"].createElement("div",{className:"note-layer"},t)}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),NoteComp}(_react2["default"].Component),_default=NoteComp,reactHotLoader,leaveModule;exports["default"]=_default,reactHotLoader=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0))["default"],reactHotLoader&&(reactHotLoader.register(NoteComp,"NoteComp","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Note.react.js"),reactHotLoader.register(_default,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/Note.react.js")),leaveModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).leaveModule,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(7)(module))},1282:function(module,exports,__webpack_require__){"use strict";(function(module){Object.defineProperty(exports,"__esModule",{value:!0});var _getOwnPropertyDescriptor=__webpack_require__(123),_getOwnPropertyDescriptor2=_interopRequireDefault(_getOwnPropertyDescriptor),_getPrototypeOf=__webpack_require__(17),_getPrototypeOf2=_interopRequireDefault(_getPrototypeOf),_classCallCheck2=__webpack_require__(13),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(16),_createClass3=_interopRequireDefault(_createClass2),_possibleConstructorReturn2=__webpack_require__(14),_possibleConstructorReturn3=_interopRequireDefault(_possibleConstructorReturn2),_inherits2=__webpack_require__(15),_inherits3=_interopRequireDefault(_inherits2),_desc,_value,_class,_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_autobindDecorator=__webpack_require__(4),_autobindDecorator2=_interopRequireDefault(_autobindDecorator),enterModule;function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _applyDecoratedDescriptor(e,t,n,r,o){var a={};return Object.keys(r).forEach(function(e){a[e]=r[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=undefined),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}enterModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).enterModule,enterModule&&enterModule(module);var NoteItemComp=(_class=function(_React$Component){function NoteItemComp(){return(0,_classCallCheck3["default"])(this,NoteItemComp),(0,_possibleConstructorReturn3["default"])(this,(NoteItemComp.__proto__||(0,_getPrototypeOf2["default"])(NoteItemComp)).call(this))}return(0,_inherits3["default"])(NoteItemComp,_React$Component),(0,_createClass3["default"])(NoteItemComp,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"_noteMouseEnter",value:function(){window.addListNoteHoverClass&&window.addListNoteHoverClass(this.props.pageId,this.props.info.id,this.props.info.text)}},{key:"_noteMouseLeave",value:function(){window.removeListNoteHoverClass&&window.removeListNoteHoverClass(this.props.pageId,this.props.info.id)}},{key:"render",value:function(){var e=this.props.info;return _react2["default"].createElement("div",{className:"note-box",style:{left:$.convertNum(e.left),top:$.convertNum(e.top)},id:"page"+this.props.pageId+"Note"+e.id,onMouseEnter:this._noteMouseEnter,onMouseLeave:this._noteMouseLeave},e.hasArea?_react2["default"].createElement("div",{className:"note-area",style:{width:$.convertNum(e.width),height:$.convertNum(e.height)}}):undefined,_react2["default"].createElement("div",{className:"note"},e.index))}},{key:"__reactstandin__regenerateByEval",value:function __reactstandin__regenerateByEval(key,code){this[key]=eval(code)}}]),NoteItemComp}(_react2["default"].Component),_applyDecoratedDescriptor(_class.prototype,"_noteMouseEnter",[_autobindDecorator2["default"]],(0,_getOwnPropertyDescriptor2["default"])(_class.prototype,"_noteMouseEnter"),_class.prototype),_applyDecoratedDescriptor(_class.prototype,"_noteMouseLeave",[_autobindDecorator2["default"]],(0,_getOwnPropertyDescriptor2["default"])(_class.prototype,"_noteMouseLeave"),_class.prototype),_class),_default=NoteItemComp,reactHotLoader,leaveModule;exports["default"]=_default,reactHotLoader=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0))["default"],reactHotLoader&&(reactHotLoader.register(NoteItemComp,"NoteItemComp","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/NoteItem.react.js"),reactHotLoader.register(_default,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/components/NoteItem.react.js")),leaveModule=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:__webpack_require__(0)).leaveModule,leaveModule&&leaveModule(module)}).call(this,__webpack_require__(7)(module))},1283:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(38)),c=n(858),d=l(n(4)),p=(window.$,c.structBaseVal.DOMWIDTH),f=c.structBaseVal.PREVIEW_ONEDEEPWIDTH,h=c.structBaseVal.ONEDEEPWIDTH;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dragData:u["default"].getDragOption()},n}return o(t,e),t.prototype.componentDidMount=function(){u["default"].addDragChangeListener(this.onchange)},t.prototype.componentWillUnmount=function(){u["default"].removeDragChangeListener(this.onchange)},t.prototype.onchange=function(){this.setState({dragData:u["default"].getDragOption()})},t.prototype.render=function(){var e=this.props,t=e.paddingLeft,n=function(e,t,n){var r=n?f:h,o=u["default"].getDragOption(),a=o.lineId,i=o.linePosi,l=o.lineDeep,s="",c=0;if(-1!=l&&l!=t&&(c=(t-l)*r),a==e)switch(i){case"top":s="is-drag-target-top";break;case"inner":s="is-drag-target-inner";break;case"bottom":s="is-drag-target-bottom"}return{targetClass:s,offset:c}}(e.id,e.deep,e.isPreview),r=n.targetClass,o=n.offset;return r?s["default"].createElement("div",{className:"tip-line "+r,style:{left:t-o,width:p-t+o}}):null},a([d["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onchange",null),t}(s["default"].Component);t["default"]=y},1284:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=n(235),p=n(858),f=l(n(96)),h=p.structBaseVal.DOMHEIGHT,y=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleChildShowFunc=function(e){var t=this.props,n=t.isFold,r=t.id;t.isContainer||(f["default"].changeFoldById({updateVal:{isFold:!n},id:r}),e.stopPropagation(),e.preventDefault())},t.prototype.calcAllChildLength=function(e,t,n){var r=this,o=r.props,a=o.searchShowKeyArr,i=o.isContainer;return(n?d.getPrdAllStructDataArr(e):e).forEach(function(e){var o=i?e.id:e,l=!1;if(a?-1!=a.indexOf(o)&&(t++,l=!0):(t++,l=!0),l){var s=i?e:f["default"].getPrdStructById(e),u=s.pageHierarchy,c=s.isFold;u&&u.length&&!c&&(t=r.calcAllChildLength(u,t,n))}}),t},t.prototype.render=function(){var e=this.props,t=e.isFold,n=e.pageHierarchy,r=e.iconLeft,o=e.id,a=e.idx,i=e.isLink;if(!n)return null;var l=(!t&&this.calcAllChildLength(n,0,i)||0)*h;return s["default"].createElement("div",{style:{left:r},onMouseDown:this.handleChildShowFunc,"data-id":o,"data-idx":a,className:u["default"]("has-child-icon",{"hide-child-icon":t})},!!l&&s["default"].createElement("div",{style:{height:l},className:"fold-line"}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleChildShowFunc",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object,Object,Object]),i("design:returntype",void 0)],t.prototype,"calcAllChildLength",null),t}(s["default"].Component));t["default"]=y},1285:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(38)),c=n(235),d=l(n(4));var p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dragData:u["default"].getDragOption()},n}return o(t,e),t.prototype.componentDidMount=function(){u["default"].addDragChangeListener(this.onchange)},t.prototype.componentWillUnmount=function(){u["default"].removeDragChangeListener(this.onchange)},t.prototype.onchange=function(){this.setState({dragData:u["default"].getDragOption()})},t.prototype.render=function(){var e=this.props,t=e.id,n=e.isParentSelect,r=e.isCurrent;return function(e){var t=u["default"].getDragOption(),n=t.targetId,r=t.targetPosi,o=!1;n==e&&"inner"==r&&(o=!0);var a=$('.drag-page-comp[data-id="'+n+'"]')[0];if(a&&"inner"!=r){var i=a.getAttribute("data-idx");c.findAllParentByIdx({idx:i,isNear:!0})==e&&(o=!0)}return o}(t)||n&&r?s["default"].createElement("div",{className:"inner-page-border"}):null},a([d["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onchange",null),t}(s["default"].Component);t["default"]=p},1286:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=window,a=o.$,i=(o.isMac,n(10)["default"]),l=n(1287),s=n(1288),u=n(1289),c=n(857),d=r(n(96));function p(e,t){var n=[["复制并粘贴",function(){u.duplicateStructById({id:t}),i.createData({type:"copyAndPastePrd",name:"PRD 复制并粘贴目录",autoSaveType:"prd"})}],["删除",function(){s.deleteSelectStruct(t),i.createData({type:"deletePrd",name:"PRD 删除目录",autoSaveType:"prd"})},undefined,!0],["创建文件夹",function(){l.createFoldByPosi(t),i.createData({type:"createPrdFolder",name:"PRD 创建文件夹",autoSaveType:"prd"})}]],r=["重命名",function(){var e=a('.drag-page-comp[data-id="'+t+'"] .readonly-input')[0];e&&setTimeout(function(){a(e).dblclick()},0)},undefined,!0],o=["创建页面",function(){l.createPageByPosi(t),i.createData({type:"contextCreatePrd",name:"PRD 右键创建文档",autoSaveType:"prd"})}],p=["添加子文件夹",function(){c.createChildFolder({},t),i.createData({type:"createChildrenPrdFolder",name:"PRD 创建子文件夹",autoSaveType:"prd"})}],f=["添加子页面",function(){c.createChildPage({},t),i.createData({type:"createChildrenPrd",name:"PRD 创建子页面",autoSaveType:"prd"})}],h=["用选中项创建文件夹("+e+")",function(){l.createFoldAsParent(t),i.createData({type:"createFolderBySelectPrd",name:"PRD 根据选中项创建文件夹",autoSaveType:"prd"})}];1==e?(n.splice(2,0,r),"page"==d["default"].getPrdStructById(t).type?n.push(o):n.push(p,o,f)):n.splice(3,1,h);return n}t.getContentArr=p,t["default"]={getContentArr:p}},1287:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window,o=r.$,a=(r.isMac,n(857)),i=n(235),l=n(832),s=n(832);function u(e){a.createFolder({vals:{},changeHierarchyFunc:function(t){l.createInHierarchyPosiAfter({id:e,createId:t})}})}function c(e){a.createPage({vals:{},changeHierarchyFunc:function(t){l.createInHierarchyPosiAfter({id:e,createId:t})}})}function d(e){a.createFolder({vals:{},changeHierarchyFunc:function(t){l.createInHierarchyPosiAfter({id:e,createId:t}),o(".drag-page-comp.current-page-comp:not(.is-parent-select)").forEach(function(e){var n=e.getAttribute("data-id"),r=i.findStructInHierarchy({structId:n}),o=r.indexOf(n);r.splice(o,1),s.addKeyToStructHierarchy({structId:t,createId:n})})}})}t.createFoldByPosi=u,t.createPageByPosi=c,t.createFoldAsParent=d,t["default"]={createFoldByPosi:u,createPageByPosi:c,createFoldAsParent:d}},1288:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),a=r(n(96)),i=n(235),l=n(305),s=n(857);function u(e){var t=$(".drag-page-comp"),n=e.length,r=0,o="",i="";return t.forEach(function(e,t){var l=e.className,s=e.getAttribute("data-id"),u=a["default"].getPrdStructById(s).type;-1!=l.indexOf("current-page-comp")?r++:"page"==u&&-1==l.indexOf("is-parent-select")&&(i||(i=s),r!=n||o||(o=s))}),{nextId:o,firstId:i}}function c(e){var t=e.id,n=e.noEmit,r=void 0!==n&&n,o=a["default"].getPrdStructById(t);if(o){var i=o.type;"page"==i?d({id:t,noEmit:r}):"folder"==i&&p({id:t,noEmit:r})}}function d(e){var t=e.id,n=e.noEmit,r=void 0!==n&&n,o=i.findStructInHierarchy({structId:t});l.deleteAllLineByPageId({pageId:t,noEmit:!0}),l.deleteAllElementByPageId({pageId:t,noEmit:!0}),o&&o.length&&o.remove(t),a["default"].deleteStructById({id:t,noEmit:r})}function p(e){var t=e.id,n=e.noEmit,r=void 0!==n&&n,o=i.findStructInHierarchy({structId:t});f({id:t,noEmit:!0}),o&&o.length&&o.remove(t),a["default"].deleteStructById({id:t,noEmit:r})}function f(e){var t=e.id;e.noEmit;a["default"].getPrdStructById(t).pageHierarchy.forEach(function(e){c({id:e})})}t.getNewStructKey=u,t.deleteSelectStruct=function(e){var t=o["default"].getAllSelectArr();-1==t.indexOf(e)&&t.push(e);var n=u(t),r=n.nextId,a=n.firstId;t.forEach(function(e){c({id:e,noEmit:!0})}),r?(o["default"].setSelectStructKey(r,!0),o["default"].setSelectStructArr([r])):a?(o["default"].setSelectStructKey(a,!0),o["default"].setSelectStructArr([a])):s.createPage();var i=r||a;if(i){var l=$('.drag-page-comp[data-id="'+i+'"] .readonly-input')[0];l&&$(l).dblclick()}},t.deleteStructById=c,t.deletePageById=d,t.deleteFolderById=p,t.deleteAllPageByFolderId=f,t["default"]={deleteStructById:c,deletePageById:d,deleteFolderById:p}},1289:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(162),a=r(n(38)),i=r(n(96)),l=r(n(30)),s=r(n(79)),u=n(832),c=n(33);function d(e){var t=1,n=[],r=i["default"].getAllPrdStruct();for(var o in r){var a=r[o].title;n.push(a)}var l=/\((\d+)\)/.exec(e),s="";return s=l?e.replace(l[0],""):e,n.forEach(function(e){var n=e.split(s);if(n.length>1){var r=n[1].slice(1,n[1].length-1);Number(r)&&r>=t&&(t=Number(r)+1)}}),{title:s,times:t}}function p(e){var t=e.id,n=(e.noEmit,$(".drag-page-comp.current-page-comp:not(.is-parent-select)")),r=t,o=[];n.forEach(function(e,t){var n=e.getAttribute("data-id"),a=i["default"].getPrdStructById(n),l=a.type,s={},c=d(a.title),p=c.title,y=c.times;"page"==l?f({id:n,newIdObj:s,noEmit:!0,needNum:!0,times:y,actualTitle:p}):"folder"==l&&h({id:n,newIdObj:s,noEmit:!0,needNum:!0,times:y,actualTitle:p});var g=s[n];o.push(g),u.createInHierarchyPosiAfter({id:r,createId:g,noEmit:!0}),r=g}),a["default"].setTemporarySelectArr([],!0),a["default"].setSelectStructKey(o[0],!0),a["default"].setSelectStructArr(o,!0),i["default"].emitChange()}function f(e){var t=e.id,n=e.newIdObj,r=e.noEmit,a=void 0!==r&&r,u=e.needNum,d=void 0!==u&&u,p=e.times,f=void 0===p?0:p,h=e.actualTitle,y=void 0===h?"":h,g=$.extend(!0,{},i["default"].getPrdStructById(t)),m=o.generateUUID(),v=(g.title,g.elementHierarchy),_=[];v.forEach(function(e){var t=$.extend(!0,{},l["default"].getPrdElementById(e)),r=t.id,a=o.generateUUID();n[t.id]=a,t.id=a,t.pageId=m,l["default"].createElement(t,!0),_.push({oldId:r,newId:a})}),function(e,t){c.getAllLineByStructKey().forEach(function(n){var r=n.startKey,a=n.endKey,i=$.extend(!0,{},n),l=o.generateUUID();i.id=l,i.structKey=e,r&&t.some(function(e){var t=e.oldId,n=e.newId;return t==r&&(i.startKey=n,i.pageKey=n,!0)}),a&&t.some(function(e){var t=e.oldId,n=e.newId;return t==a&&(i.endKey=n,!0)}),s["default"].setLineLink(i)})}(m,_),n[g.id]=m,g.id=m,g.elementHierarchy=v.map(function(e){return n[e]}),d&&(g.title=y+"("+f+")"),i["default"].createStruct(g,a)}function h(e){var t=e.id,n=e.newIdObj,r=e.noEmit,a=void 0!==r&&r,l=e.needNum,s=void 0!==l&&l,u=e.times,c=void 0===u?0:u,d=e.actualTitle,p=void 0===d?"":d,y=$.extend(!0,{},i["default"].getPrdStructById(t)),g=o.generateUUID(),m=y.pageHierarchy;m.forEach(function(e){var t=i["default"].getPrdStructById(e).type;"page"==t?f({id:e,newIdObj:n,noEmit:a}):"folder"==t&&h({id:e,newIdObj:n,noEmit:a})}),n[y.id]=g,y.id=g,y.pageHierarchy=m.map(function(e){return n[e]}),s&&(y.title=p+"("+c+")"),i["default"].createStruct(y,a)}t.findCopyTimes=d,t.duplicateStructById=p,t.duplicatePageById=f,t.duplicateFolderById=h,t["default"]={duplicateStructById:p,findCopyTimes:d}},1290:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(96));function a(e){var t=e.id,n=e.childArr,r=void 0===n?[]:n,i=e.data,l=void 0===i?null:i,s=l||o["default"].getPrdStructById(t);if(s&&"folder"==s.type){var u=s.pageHierarchy;(void 0===u?[]:u).forEach(function(e){r.push(l?e.id:e),a({id:e,childArr:r,data:l?e:null})})}return r}function i(e){var t={};e.length?function i(e,t){e.forEach(function(e,n){var r=e.type,o=e.id,a=e.pageHierarchy;if("folder"==r&&(t[o]=e),a)return i(a,t)})}(e,t):t=o["default"].getPrdFolders();var n={};for(var r in t)n[r]=a({id:r,data:e.length?t[r]:null});return n}function l(e){var t=e.searchTitle,n=e.arr,r=o["default"].getAllPrdStruct(),a=[];if(n.length)!function l(e,n){e.forEach(function(e,r){var o=e.title,a=e.id,i=e.pageHierarchy;if(-1!=o.indexOf(t)&&n.push(a),i)return l(i,n)})}(n,a);else for(var i in r){-1!=o["default"].getPrdStructById(i).title.indexOf(t)&&a.push(i)}return a}function s(e){var t=e.searchTitle,n=e.arr,r=void 0===n?[]:n,o=i(r),a=l({searchTitle:t,arr:r}),s=a.slice(),u=function(e){o[e].some(function(t){return-1!=a.indexOf(t)&&(-1==s.indexOf(s)&&s.push(e),!0)})};for(var c in o)u(c);return s}t.findFolderAllChildKey=a,t.findAllFolderAllChildKey=i,t.getAllSearchFindKeyArr=l,t.getAllSearchShowKeyArr=s,t["default"]={findFolderAllChildKey:a,findAllFolderAllChildKey:i,getAllSearchFindKeyArr:l,getAllSearchShowKeyArr:s}},1291:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(12)),d=l(n(38)),p=l(n(1292)),f=l(n(1295)),h=l(n(1323)),y=window,g=y.$,m=y.isPrototypeTool,v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype._getContainerStyle=function(){var e=this.props.element,t=e.x,n=e.y,r=e.width,o=e.height;return{left:Math.round(t),top:Math.round(n),width:r,height:o}},t.prototype.render=function(){var e=this.props,t=e.element,n=e.element,r=n.id,o=n.isEdit,a=void 0!==o&&o;return s["default"].createElement("div",{className:c["default"]("element-container",{"element-edit":a,"element-select":-1!=d["default"].getSelectElementArr().indexOf(r)}),style:this._getContainerStyle(),"data-id":r,onMouseDown:g.stopPropagation},s["default"].createElement(f["default"],{element:t}),m?s["default"].createElement(p["default"],{element:t}):undefined,s["default"].createElement(h["default"],{element:t}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_getContainerStyle",null),t}(s["default"].Component);t["default"]=v},1292:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(1)),c=l(n(12)),d=l(n(4)),p=l(n(38)),f=l(n(79)),h=l(n(39)),y=l(n(198)),g=s(n(925)),m=n(1293),v=n(1294),_=n(306),b=n(812),w=n(831),C=n(237),P=n(335),O=n(1222),x=n(33),E=n(152),k=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleContextMenu=function(e){var t=this.props.element.type,n=p["default"].getSelectElementArr(),r=m.baseContextMenuConfig.concat(v.hierarchyContextMenuConfig);r=n.length>1?r.concat(g.multipleContextMenuConfig):r.concat(g["default"][t+"ContextMenuConfig"]||[]),y["default"].rightMenuUpdate({left:e.clientX,top:e.clientY,content:r}),$.preventDefault(e)},t.prototype.handleDoubleClick=function(e){var t=this.props.element,n=t.type,r=t.id;if("image"==n)E.changeImageFunc();else if(-1==["preview","projectView"].indexOf(n)){if("table"==n){C.tableDataInit(!0);var o=e.nativeEvent;P.selectTableCellByPosi({x:o.offsetX,y:o.offsetY}),h["default"].setTableDataContr(x.findSelectElement()[0])}else"text"==n&&setTimeout(function(){var e=$('.element-container.element-edit .editor-pre>div span[data-slate-content="true"]')[0].childNodes[0],t=window.document.createRange();t.selectNodeContents(e),t.collapse(!0),t.setEnd(e,e.length),t.setStart(e,e.length);var n=window.getSelection();n.removeAllRanges(),n.addRange(t)},0);_.changeEditById({id:r})}},t.prototype.handleMouseDown=function(e){var t=e.currentTarget.getAttribute("data-id");if("line"==p["default"].getCursor())b.prdLineCreate(e);else{var n=f["default"].getPrdSelectArr();O.clearSelectArr();var r=p["default"].getSelectElementArr();n.length&&-1==r.indexOf(t)&&f["default"].setPrdSelectArr([]),w.dragElementCoverMove(e)}},t.prototype.render=function(){var e=this.props.element,t=e.id,n=e.isEdit;e.type;if(n)return!1;var r=p["default"].getSelectElementArr(),o=r.some(function(e){return e==t});return u["default"].createElement("div",{"data-id":t,className:c["default"]("element-cover",{isSelect:o,isSelectOnlyOne:o&&1==r.length}),"data-eventkey":"element",onMouseDown:this.handleMouseDown,onContextMenu:this.handleContextMenu,onDoubleClick:this.handleDoubleClick})},a([d["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleContextMenu",null),a([d["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleDoubleClick",null),a([d["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(u["default"].Component);t["default"]=k},1293:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window,o=r.Mousetrap,a=r.hotKey,i=a.command,l=a.comKey;t.baseContextMenuConfig=[["复制",function(){o.trigger(i+"+c")},l+"+C"],["粘贴",function(){$("body").trigger("paste")},l+"+V"],["剪切",function(){o.trigger(i+"+x")},l+"+X"],["删除",function(){o.trigger("del")},"Delete",!0]],t["default"]={baseContextMenuConfig:t.baseContextMenuConfig}},1294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=window,o=r.Mousetrap,a=r.hotKey,i=a.command,l=a.comKey;t.hierarchyContextMenuConfig=[["置于顶层",function(){o.trigger(i+"+]")},l+"+]"],["置于底层",function(){o.trigger(i+"+[")},l+"+[",!0]],t["default"]={hierarchyContextMenuConfig:t.hierarchyContextMenuConfig}},1295:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(1296)),d=l(n(1302)),p=l(n(1304)),f=l(n(1310)),h=l(n(1316)),y=l(n(1317)),g=l(n(1319)),m=l(n(1320)),v=l(n(1321)),_=l(n(1322)),b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype._getElementComp=function(){var e,t=this.props,n=t.element,r=t.element,o=(r.id,r.type),a=r.name;switch(o){case"text":e=s["default"].createElement(c["default"],{element:n});break;case"table":e=s["default"].createElement(d["default"],{element:n});break;case"image":e=s["default"].createElement(p["default"],{element:n});break;case"webView":var i=n.webMode,l=void 0===i?"web":i,u=n.url;e=s["default"].createElement(f["default"],{element:n,isCard:"card"==l,url:u});break;case"contr":e=s["default"].createElement(h["default"],{element:n});break;case"page":e=s["default"].createElement(y["default"],{element:n});break;case"pageflow":e=s["default"].createElement(m["default"],{element:n});break;case"preview":e=s["default"].createElement(g["default"],{element:n});break;case"projectView":e=s["default"].createElement(v["default"],{element:n});break;case"pageRemark":e=s["default"].createElement(_["default"],{element:n});break;default:e=s["default"].createElement("div",{className:o+"-element-container"},a)}return e},t.prototype.render=function(){return this._getElementComp()},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_getElementComp",null),t}(s["default"].Component);t["default"]=b},1296:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=n(914),d=n(88),p=s(n(4)),f=n(3),h=n(1221),y=n(981),g=n(153),m=s(n(30)),v=s(n(241)),_=s(n(1218)),b=s(n(1299)),w=s(n(1300)),C=n(443),P=n(33),O=n(1301),x=n(10)["default"],E=window.isPrototypeTool,k=null,D=null;function S(e,t){k&&(clearTimeout(k),k=null),D||(D=t),k=setTimeout(function(){!function(e,t){var n=m["default"].getPrdElementById(e);if(n){var r=n.content;f.is(r,t)||(t=null,x.createData({type:"changeEditContent",name:"PRD 修改富文本内容",autoSaveType:"prd"}))}}(e,D)},500)}var j=function(e){function t(t){var n=e.call(this,t)||this;return n.editor=null,n.containerDom=null,n.lastSaveData={},n.lastEditorVal=null,n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){this.fixDomHeight()},t.prototype.componentDidUpdate=function(){this.fixDomHeight()},t.prototype.fixDomHeight=function(){if(this.containerDom){var e=this.props.element,t=e.id,n=e.height,r=$.offset(this.containerDom,!0).height;Math.round(r)!=Math.round(n)&&m["default"].updateValById({id:t,updateVal:{height:Math.round(r)}})}},t.prototype.editChangeFunc=function(e){var t=e.value;this._changeValFunc(t)},t.prototype.editFocusFunc=function(e,t,n){var r=this;window.Mousetrap.pause(),v["default"].initRichText({comp:this,editor:this.editor}),setTimeout(function(){var e=window.getSelection(),t=c.findRange(e,r.editor);r.editor.focus(),r.editor.select(t)},0)},t.prototype._changeValFunc=function(e){var t=this.props.element,n=t.id,r=t.content;v["default"].setAllEditorVals({selection:e.selection,decorations:e.decorations,data:e.decorations},n),this.lastEditorVal=e,f.is(r,e.document)?(this.setState({}),_["default"].emitChange()):(m["default"].updateValById({id:n,updateVal:{content:e.document}}),S(n,e.document))},t.prototype.editBlurFunc=function(){window.Mousetrap.unpause();var e=P.findSelectElement()[0],t=this.props.element,n=t.id,r=t.content;!d.Document.isDocument(r)||r.text||e&&e.id==n||(m["default"].updateValById({id:n,updateVal:{content:g.elementBaseVal.text.addCreateVal.content}}),x.createData({type:"changeEditContent",name:"PRD 修改富文本内容",autoSaveType:"prd"}))},t.prototype.renderMark=function(e,t,n){var r=e.children,o=e.mark,i=e.attributes;switch(o.type){case"bold":return u["default"].createElement("strong",a({},i),r);case"strikethrough":var l=$.extend(!0,{},r);return l.props.style=a({},l.props.style,{textDecoration:"line-through"}),u["default"].createElement("del",a({style:{color:r.props.style?r.props.style.color:undefined}},i),l);case"italic":return u["default"].createElement("em",a({},i),r);case"underlined":var s=$.extend(!0,{},r);return s.props.style=a({},s.props.style,{textDecoration:"underline"}),u["default"].createElement("u",a({style:{color:r.props.style?r.props.style.color:undefined}},i),s);case"fontSize":return u["default"].createElement("span",a({style:{fontSize:o.toJSON().data.val}},i),r);case"textColor":return u["default"].createElement("span",a({style:{color:"#"+h.colorPickerList[$.isUndefined(o.toJSON().data.val)?1:o.toJSON().data.val].value}},i),r);case"a-link":case"a-link-inner":var c=$.extend(!0,{},r);return c.props.style=a({},c.props.style,{color:"#569FF3",textDecoration:"underline"}),u["default"].createElement(w["default"],{attributes:i,link:o.toJSON().data.val||"",isInner:"a-link-inner"==o.type},c);default:return n()}},t.prototype.renderNode=function(e,t,n){var r,o=e.attributes,i=e.children,l=e.node,s=20*(Number(l.type[l.type.length-1])-1),c=function(e){var t="";switch(e){case"num-list-1":case"num-list-4":t="decimal";break;case"num-list-2":case"num-list-5":t="lower-roman";break;case"num-list-3":case"num-list-6":t="lower-alpha";break;case"unordered-list-1":case"unordered-list-4":t="disc";break;case"unordered-list-2":case"unordered-list-5":t="circle";break;case"unordered-list-3":case"unordered-list-6":t="square"}return t}(l.type),d=l.type;switch(-1!=l.type.indexOf("color|")&&(d="color|",r=l.type.split("|")[1]),d){case"heading-one":return u["default"].createElement("h1",a({},o),i);case"heading-two":return u["default"].createElement("h2",a({},o),i);case"heading-three":return u["default"].createElement("h3",a({},o),i);case"heading-four":return u["default"].createElement("h4",a({},o),i);case"heading-five":return u["default"].createElement("h5",a({},o),i);case"left":case"center":case"right":case"justify":return u["default"].createElement("div",a({style:{textAlign:l.type}},o),i);case"num-list-1":case"num-list-4":case"num-list-2":case"num-list-5":case"num-list-3":case"num-list-6":case"unordered-list-1":case"unordered-list-4":case"unordered-list-2":case"unordered-list-5":case"unordered-list-3":case"unordered-list-6":return u["default"].createElement("li",a({style:{marginLeft:s,listStyleType:c}},o),i);case"task-list":return u["default"].createElement(b["default"],{isComplete:!1,attributes:o},i);case"complete-task-list":return u["default"].createElement(b["default"],{isComplete:!0,attributes:o},i);case"color|":return u["default"].createElement("div",a({style:{color:"#"+h.colorPickerList[r].value}},o),i);default:return n()}},t.prototype.onKeyDown=function(e,t,n){if(O.RichTextMousetrap(e),9!=e.keyCode&&8!=e.keyCode)return n();var r,o=!1;if(y.allListDeepArr.some(function(t,n){if(C.isActiveNode({type:t})){var a=Number(t[t.length-1]);if(0==window.getSelection().anchorOffset)if(8==e.keyCode)o=!0,r=0==(i=a-1)?"":t.slice(0,t.length-1)+i;if(9==e.keyCode){o=!0;var i=Math.min(a+1,6);r=t.slice(0,t.length-1)+i}return!0}return!1}),!o)return n();e.preventDefault(),t.setBlocks(r)},t.prototype.ref=function(e){var t=this.props.element.id;this.editor=e,v["default"].addAllTextEditor(e,t)},t.prototype.mouseDown=function(){this.editor.deselect()},t.prototype.render=function(){var e=this,t=this.props.element,n=t.id,r=t.isEdit,o=t.content;d.Document.isDocument(o)||"document"!=o.object||(o=d.Document.fromJSON(o));var i=v["default"].getAllEditorVals(n),l=d.Document.isDocument(o)?this.lastEditorVal&&this.lastEditorVal.document&&f.is(o,this.lastEditorVal.document)?this.lastEditorVal:d.Value.create(a({document:o},r&&i&&i.selection?i:{})):d.Value.fromJSON(o);return u["default"].createElement("div",{className:"text-element-container",ref:function(t){return e.containerDom=t}},l?u["default"].createElement("pre",{className:"editor-pre"},u["default"].createElement(c.Editor,{autoCorrect:!1,spellCheck:!1,key:"Editor"+n,ref:this.ref,value:l,readOnly:!E||!r,onChange:this.editChangeFunc,onFocus:this.editFocusFunc,onBlur:this.editBlurFunc,renderMark:this.renderMark,renderNode:this.renderNode,onKeyDown:this.onKeyDown,onMouseDown:this.mouseDown})):null)},i([p["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"fixDomHeight",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"editChangeFunc",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object,Object,Object]),l("design:returntype",void 0)],t.prototype,"editFocusFunc",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"_changeValFunc",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"editBlurFunc",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object,Object,Object]),l("design:returntype",void 0)],t.prototype,"renderMark",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object,Object,Object]),l("design:returntype",void 0)],t.prototype,"renderNode",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object,Object,Object]),l("design:returntype",void 0)],t.prototype,"onKeyDown",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"ref",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"mouseDown",null),t}(u["default"].Component);t["default"]=j},1297:function(e,t){e.exports=function o(e){if(r(e))return e;if(r(e.ownerDocument))return e.ownerDocument;if(r(e.document))return e.document;if(e.parentNode)return o(e.parentNode);if(e.commonAncestorContainer)return o(e.commonAncestorContainer);if(e.startContainer)return o(e.startContainer);if(e.anchorNode)return o(e.anchorNode)};var n=9;function r(e){return e&&e.nodeType===n}},1298:function(e,t){e.exports=!!document.attachEvent&&window!==document.parentWindow},1299:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(241)),p=n(914),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleClick=function(e){var t=this.props.isComplete,n=d["default"].getRichText().editor,r=p.findNode(e.currentTarget,n);n.moveToRangeOfNode(r),t?n.setBlocks("task-list"):n.setBlocks("complete-task-list")},t.prototype.render=function(){var e=this.props,t=e.attributes,n=e.isComplete;return u["default"].createElement("li",a({onClick:this.handleClick,className:n?"complete-task-list-li":"task-list-li"},t),this.props.children)},i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleClick",null),t}(u["default"].Component);t["default"]=f},1300:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=n(914),p=n(33),f=s(n(241)),h=s(n(30)),y=s(n(38)),g=n(1231),m=n(235),v=null,_=window.isPrototypeTool,b=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.readyShowLink=function(e){var t=e.currentTarget,n=p.findSelectElement()[0];if(n){var r=n.id,o=$.offset(t,!0),a=o.left,i=o.top,l=0;v||(v=setInterval(function(){if(1==++l){var e=f["default"].getRichText().editor,n=e.value,o=$(t).parents('span[data-slate-leaf="true"]')[0],s=g.getPrevLength(o),u=$(t).find('span[data-slate-content="true"')[0].childNodes[0],c=window.document.createRange();c.selectNodeContents(u),c.collapse(!0),c.setEnd(u,u.length),c.setStart(u,0);var p=window.getSelection();p.removeAllRanges(),p.addRange(c);var m=window.getSelection(),_=m.focusOffset,b=m.anchorOffset,w=m.anchorNode.parentElement,C=d.findNode(w,e);f["default"].setNodeData({key:C.key,start:Math.min(_+s,b+s),length:Math.abs(_-b),value:n}),setTimeout(function(){h["default"].updateValById({id:r,updateVal:{isEdit:!1},noEmit:!1});var e="true"==t.getAttribute("data-isinner");y["default"].setLinkInput({left:a,top:i,isShow:!0,link:e?"":t.getAttribute("data-link"),innerLink:e?t.getAttribute("data-link"):"",isInner:e})},0),setTimeout(function(){var e=$(".insert-hyperlink-panel input")[0];$(e).focus()},0),clearInterval(v),v=null}},1e3))}},t.prototype.cancelShowLink=function(){v&&(clearInterval(v),v=null)},t.prototype.handleLink=function(){var e=this.props.link;y["default"].setSelectStructArr([e],!0),y["default"].setSelectStructKey([e]),m.moveStructMiddle(e)},t.prototype.handleLinkHeader=function(e){return-1==e.indexOf("http")?"https://"+e:e},t.prototype.render=function(){var e=this.props,t=e.attributes,n=e.link,r=e.isInner;v&&clearInterval(v);var o="";o=window.isPrototypeTool||r?n:this.handleLinkHeader(n);var i=u["default"].createElement("span",a({"data-isinner":r,"data-link":o,onMouseLeave:this.cancelShowLink,onMouseEnter:this.readyShowLink,style:{color:"#569FF3",textDecoration:"underline"}},t),this.props.children);return u["default"].createElement("div",{className:"rich-text-link",style:{position:"relative",display:"inline-block"}},_?i:r?u["default"].createElement("div",{onClick:this.handleLink},i):u["default"].createElement("a",{href:o,target:"_blank"},i))},i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"readyShowLink",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"cancelShowLink",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"handleLink",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleLinkHeader",null),t}(u["default"].Component);t["default"]=b},1301:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=window,a=o.$,i=o.isMac,l=r(n(241)),s=n(981),u=n(443),c=["","one","two","three","four","five"];function d(e){var t,n,r,o=e.metaKey,d=e.ctrlKey,p=e.shiftKey,f=e.altKey,h=e.keyCode;if(i?o:d){if(p){s.fontSizeArr.some(function(e,t){return!!u.isActiveNode({type:e})&&(r=e,!0)});var y=s.fontSizeArr.indexOf(r)+1||6;switch(h){case 38:var g=Math.max(y-1,1);n="heading-"+c[g];break;case 40:n=y>=5?"":"heading-"+c[y+1];break;case 83:t="strikethrough";break;case 85:var m=a(".num-list-btn")[0];a(m).click(),e.preventDefault();break;case 73:var v=a(".unordered-list-btn")[0];a(v).click(),e.preventDefault();break;case 89:var _=a(".task-list-btn")[0];a(_).click(),e.preventDefault()}}else if(f)switch(h){case 48:n="";break;case 49:n="heading-one";break;case 50:n="heading-two";break;case 51:n="heading-three";break;case 52:n="heading-four";break;case 53:n="heading-five"}else switch(h){case 66:t="bold";break;case 73:t="italic";break;case 85:t="underlined";break;case 75:var b=a(".is-hyperlink-icon")[0];a(b).click()}var w=l["default"].getRichText().editor;t?window.getSelection().isCollapsed||w.toggleMark(t):a.isUndefined(n)||(w.unwrapBlock(r),n&&w.wrapBlock(n))}}t.RichTextMousetrap=d,t["default"]={RichTextMousetrap:d}},1302:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(38)),s=a(n(39)),u=a(n(30)),c=a(n(481)),d=a(n(480)),p=a(n(479)),f=n(1303),h=20;var y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){!function(e){var t=e.linePosi,n=e.columnPosi,r=e.id,o=e.child,a=e.height,i=e.width;if(!$.isEmptyObject(o)){var l=[],s=$('div[data-id="'+r+'"]').prev().find(".inputText"),c=h,d=0,p=0,f=0,y={};s.forEach(function(e,t){var r=$.offset(e,!0).height,o=(r.width,r.height);if(c=Math.max(c,o),t%n.length==n.length-1){var a=c;d+=a,l.push(a),c=h}}),t.forEach(function(e){p+=e}),n.forEach(function(e){f+=e}),Math.round(a)!=Math.round(p)&&(y.height=Math.round(p)),Math.round(i)!=Math.round(f)&&(y.width=Math.round(f)),!$.checkArrayEqual(t,l)&&d>a&&u["default"].updateValById({id:r,updateVal:{linePosi:l,height:d}}),Object.keys(y).length>0&&u["default"].updateValById({id:r,updateVal:y})}}(this.props.element)},t.prototype.render=function(){var e=this.props,t=e.element,n=t.width,r=t.height,o=t.id,a=e.element,u=f.initTableData({element:a}),h=l["default"].getSelectElementArr(),y=1==h.length&&h[0]==o,g=!1;if(y){var m=s["default"].getTableData(),v=m.selectContr,_=m.selectCell;v&&_&&(g=!0)}return i["default"].createElement("div",{style:{width:n,height:r}},i["default"].createElement(c["default"],{i:u,isActivePage:!0}),y?i["default"].createElement(d["default"],{i:u}):undefined,g?i["default"].createElement(p["default"],{i:u}):undefined)},t}(i["default"].Component);t["default"]=y},1303:function(e,t,n){"use strict";function r(e){var t=e.element,n=t.x,r=t.y,o=$.extend(!0,{left:n,top:r,interfaceId:1},t);return delete o.left,delete o.top,o}Object.defineProperty(t,"__esModule",{value:!0}),t.initTableData=r,t["default"]={initTableData:r}},1304:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(343)),f=s(n(11)),h=s(n(1305)),y=s(n(1308)),g=n(409),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={imgStyle:{},isZoom:!1,increaseVal:0,left:0,top:0,isMax:!1,isMin:!1,zoomNum:100,canFullScreen:!0,zoomWidth:0,zoomHeight:0,isZoomImg:!1,zoomScale:1},n}return o(t,e),t.prototype.componentDidUpdate=function(){if(this.state.isZoomImg){var e=this.state.zoomScale,t=this.props.element,n=t.width,r=t.height,o=$(".prd-preview-img-zoom-panel"),a=$.query(".prd-zoom-img-box"),i=window.innerWidth,l=Math.min(n,r);if(l*e>=i)o.scrollLeft((l*e-i)/2),a.style.left=0;else{if(!(l*e<i))return;a.style.left=(i-l*e)/2+"px"}}},t.prototype.handleImgOpen=function(e,t){var n=$(e.currentTarget).parents(".element-container")[0],r=$.offset(n,!0),o=this.state.isZoom,a=t.width,i=t.height,l=t.oriWidth,s=t.oriHeight,u=r.left,c=r.top,d=this.getTransformVal({width:a,height:i,oriWidth:l,oriHeight:s,left:u,top:c}),p=d.scaleNum,f=d.translateX,h=d.translateY;this.setState({imgStyle:{transform:"scale("+p+") translate3d("+f+"px, "+h+"px, 0)"},isZoom:!o,left:u,top:c,increaseVal:0,isMax:!1,isMin:Math.min(l,s)/Math.min(a*p,i*p)>=2,zoomNum:100,zoomWidth:a*p,zoomHeight:i*p,isZoomImg:!1,zoomScale:p},function(){var e=$.query(".right-content-panel"),t=$.query(".right-content-panel>.content-box>.head-panel");o?(e.style.zIndex=99,t.style.zIndex=101):(e.style.zIndex=101,t.style.zIndex=99)})},t.prototype.getTransformVal=function(e){var t=e.width,n=e.height,r=e.oriWidth,o=e.oriHeight,a=e.left,i=e.top,l=e.isZoom,s=void 0!==l&&l,u=document.documentElement.clientWidth,c=document.documentElement.clientHeight,d=0,p=0;s?(d=r/t,p=o/n):(d=Math.min(u,r)/t,p=Math.min(c,o)/n);var f=Math.min(d,p),h=((u-t)/2-a)/f,y=((c-n)/2-i)/f;return Math.min(t,n)*f==Math.min(r,o)?this.setState({canFullScreen:!1}):this.setState({canFullScreen:!0}),{scaleNum:f,translateX:h,translateY:y}},t.prototype.closeZoomImage=function(){this.setState({isZoom:!1,increaseVal:0,isMax:!1,isMin:!1,zoomNum:100,isZoomImg:!1},function(){var e=$.query(".right-content-panel"),t=$.query(".right-content-panel>.content-box>.head-panel");e.style.zIndex=99,t.style.zIndex=101})},t.prototype.getZoomIncreaseVal=function(){var e=this.props.element,t=e.oriWidth,n=e.oriHeight,r=this.state,o=r.zoomWidth,a=r.zoomHeight;return Math.round((2*Math.min(t,n)-Math.min(o,a))/10)},t.prototype.zoomInFunc=function(){var e=this.props.element,t=e.width,n=e.height,r=e.oriWidth,o=e.oriHeight,a=this.state,i=a.left,l=a.top,s=a.increaseVal,u=a.zoomNum,c=a.zoomWidth,d=a.zoomHeight,p=this.getZoomIncreaseVal(),f=c+p+s,h=d+p+s,y=this.getTransformVal({width:t,height:n,oriWidth:f,oriHeight:h,left:i,top:l,isZoom:!0}),g=y.scaleNum,m=y.translateX,v=y.translateY;this.setState({imgStyle:{transform:"scale("+g+") translate3d("+m+"px, "+v+"px, 0)"},increaseVal:s+p,isMax:Math.min(f,h)/Math.min(r,o)>=2||u+10==200,isMin:!1,zoomNum:u+10,canFullScreen:Math.min(r,o)!=Math.min(f,h),isZoomImg:!0,zoomScale:g})},t.prototype.zoomOutFunc=function(){var e=this.props.element,t=e.width,n=e.height,r=e.oriWidth,o=e.oriHeight,a=this.state,i=a.left,l=a.top,s=a.increaseVal,u=a.zoomNum,c=a.zoomWidth,d=a.zoomHeight,p=this.getZoomIncreaseVal(),f=c+s-p<=0?c:c+s-p,h=d+s-p<=0?d:d+s-p,y=this.getTransformVal({width:t,height:n,oriWidth:f,oriHeight:h,left:i,top:l,isZoom:!0}),g=y.scaleNum,m=y.translateX,v=y.translateY;this.setState({imgStyle:{transform:"scale("+g+") translate3d("+m+"px, "+v+"px, 0)"},increaseVal:s-p,isMax:Math.min(f,h)/Math.min(r,o)>=2||u+10==200,isMin:Math.min(r,o)/Math.min(f,h)>=2,zoomNum:u-10,canFullScreen:Math.min(r,o)!=Math.min(f,h),isZoomImg:!0,zoomScale:g})},t.prototype.fullScreenFunc=function(){var e=this.props.element,t=e.width,n=e.height,r=e.oriWidth,o=e.oriHeight,a=this.state,i=a.left,l=a.top,s=this.getTransformVal({width:t,height:n,oriWidth:r,oriHeight:o,left:i,top:l,isZoom:!0}),u=s.scaleNum,c=s.translateX,d=s.translateY,p=this.getZoomIncreaseVal(),f=Math.round((Math.min(r,o)-Math.min(t,n))/p),h=window.innerWidth,y=window.innerHeight,g=Math.min(r,o),m=Math.min(h,y);this.setState({imgStyle:{transform:"scale("+u+") translate3d("+c+"px, "+d+"px, 0)"},isMax:!1,isMin:!1,zoomNum:100+10*f,increaseVal:g<=m?0:p*f,isZoomImg:!0,zoomScale:u})},t.prototype.downloadFunc=function(){var e=this.props.element,t=e.oriName,n=e.src,r=(-1!=n.indexOf("userImages")||-1!=n.indexOf("static")||-1!=n.indexOf("images")?"https://img.xiaopiu.com":"")+n,o=r.lastIndexOf("."),a=r.substr(o),i=t.lastIndexOf("."),l=t.substr(0,i);f["default"].show("下载中...");var s=new XMLHttpRequest;s.open("GET",r,!0),s.responseType="blob",s.setRequestHeader("Authorization","Basic a2VybWl0Omtlcm1pdA=="),s.onload=function(){200===s.status&&p["default"].saveAs(s.response,""+l+a)},s.send()},t.prototype.render=function(){var e=this,t=this.props,n=t.element,r=t.element,o=r.width,i=r.height,l=r.src,s=r.isEdit,d=r.cutVals||{},p=d.width,f=d.height,m=d.boxWidth,v=d.boxHeight,_=this.state,b=_.isZoom,w=_.imgStyle,C=_.isMax,P=_.isMin,O=_.zoomNum,x=_.canFullScreen,E=_.isZoomImg,k=_.zoomScale,D=(_.increaseVal,window.isPrototypeTool),S=(s=D&&s)?$.extend(!0,{},n):n;s&&(S.cutVals=a({},S.cutVals,{left:0,top:0}));var j=$(".right-content-panel").scrollTop();return l?u["default"].createElement(u["default"].Fragment,null,u["default"].createElement("div",{className:c["default"]("cutImgOutBox stretch-wrapper",{"is-edit-image":s,"is-preview-page":!D,"is-zoom":b,"is-zoom-img":E}),style:a({},b?a({},w):{}),onMouseDown:D?$.noop:function(t){return e.handleImgOpen(t,n)}},u["default"].createElement("div",{className:"prd-image-container",style:{width:(s?m:p)||o,height:(s?v:f)||i}},g.getImageNode(S)),s&&u["default"].createElement(h["default"],{element:n})),!D&&b?u["default"].createElement(u["default"].Fragment,null,u["default"].createElement("div",{id:"prdImageZoomPanel",className:c["default"]("prd-image-zoom-panel",{"is-zoom":b}),"data-scrollval":j,onMouseDown:this.closeZoomImage}),u["default"].createElement(y["default"],{zoomNum:O,zoomInFunc:C?$.noop:this.zoomInFunc,zoomOutFunc:P?$.noop:this.zoomOutFunc,fullScreenFunc:x?this.fullScreenFunc:$.noop,downloadFunc:this.downloadFunc,isMax:C,isMin:P,canFullScreen:x}),E?u["default"].createElement("div",{className:"prd-preview-img-zoom-panel",onMouseDown:this.closeZoomImage},u["default"].createElement("div",{className:"prd-zoom-img-box",style:{position:"absolute",transform:"scale("+k+")",transformOrigin:"0 0",left:0,top:0}},g.getImageNode(S))):undefined):undefined):u["default"].createElement("div",{className:"prd-image-panel",style:{width:o,height:i}},u["default"].createElement("div",{className:"default-img-icon"}))},i([d["default"],l("design:type",Function),l("design:paramtypes",[Object,Object]),l("design:returntype",void 0)],t.prototype,"handleImgOpen",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"getTransformVal",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"closeZoomImage",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"getZoomIncreaseVal",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"zoomInFunc",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"zoomOutFunc",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"fullScreenFunc",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"downloadFunc",null),t}(u["default"].Component);t["default"]=m},1305:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(444)),p=s(n(1232)),f=n(409),h=n(1307),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={prdImageCut:d["default"].getPrdImageCut()},n}return o(t,e),t.prototype.componentDidMount=function(){d["default"].addChangeListener(this.onChange)},t.prototype.componentWillUnmount=function(){d["default"].removeChangeListener(this.onChange)},t.prototype.onChange=function(){this.setState({prdImageCut:d["default"].getPrdImageCut()})},t.prototype.render=function(){var e=this.props,t=e.element,n=e.element.cutVals,r=this.state.prdImageCut.dragPos,o=r.x,i=r.y,l=r.width,s=r.height,c=a({cutVals:n},{left:o,top:i,width:l,height:s});return u["default"].createElement(u["default"].Fragment,null,u["default"].createElement("div",{className:"prd-image-cut-container",onMouseDown:h.imageCutMove,style:c},f.getImageNode(a({},t,{cutVals:c}))),u["default"].createElement(p["default"],{dragType:"all",stylePos:c,noDragSpot:!1,dragFunc:h.imageCutSpotDrag}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"onChange",null),t}(u["default"].Component);t["default"]=y},1306:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(12)),p=s(n(30)),f=s(n(79)),h=s(n(827)),y=s(n(236)),g=n(33),m=n(863),v=n(828),_=n(342),b=n(33),w=s(n(100)),C=n(10)["default"],P=function(e){function t(t){var n=e.call(this,t)||this;return n.state={dragPos:0,isDrag:!1,isHover:!1},n}return o(t,e),t.prototype.getAllChangeElement=function(e){var t=e.allElement,n=e.baseTopVal,r=[];return t.forEach(function(e){var t=e.y,o=e.id,a=e.type,i=e.remarkId;if("page"==a&&i){var l=p["default"].getPrdElementById(i),s=l.id,u=l.y;u>=n&&r.push({id:s,y:u})}t>=n&&r.push({id:o,y:t})}),r},t.prototype.getAllChangeLine=function(e){var t=e.allLine,n=e.baseTopVal,r=[];return t.forEach(function(e){var t=e.id,o=e.startPosi,a=e.endPosi,i=e.startKey,l=e.endKey,s=e.startPoint,u=e.endPoint,c=e.fixedArr,d=e.noStartSupply,p=e.noEndSupply;if(!e.isConnect){var f=w["default"].getPrdLinePointArr({startPosi:o,endPosi:a,startKey:i,endKey:l,startPoint:s,endPoint:u,fixedArr:c,noStartSupply:d,noEndSupply:p}),h=!1;f.some(function(e){return e[1]<n&&(h=!0,!0)}),h||r.push({id:t,startPoint:s,endPoint:u,fixedArr:c,startKey:i,endKey:l})}}),r},t.prototype.compTopDrag=function(e){var t=e.clientX,n=e.clientY,r=n,o=this,i=g.findAllElement({isReturnArr:!0}),l=b.getAllLineByStructKey(),s=g.findSelectElement(),u=m.getSeveralElementPos(s).top,c=o.getAllChangeElement({allElement:i,baseTopVal:u});$(".menu-head-panel .head-close-btn").click();var d=o.getAllChangeLine({allLine:l,baseTopVal:u});v.initDragChangePosi({autoChangeFunc:function(e){return _.getDragScrollRatio(e,!0)},arriveCriticalFunc:function(){var e=h["default"].getDragChangePosiSet().ratio,t=$(".prd-content-panel")[0].scrollTop,n=t<=0&&-1==e;return n||($(".prd-content-panel")[0].scrollTop=Math.max(t+20*e,0)),n}}),$.setDrag({name:"compTopDrag",posi:[t,n],target:e.currentTarget,moveFunc:function(e){var t=e.clientX,i=e.clientY;v.changeDragChangePosi({clientX:t,clientY:i},function(e){var t=e.autoChangePosi,l=(e.ratio,t.autoChangePosiY),s=void 0===l?0:l,h=i-n;u+h+s<0&&(h=-u-s);var y=h+s;c.forEach(function(e){var t=e.id,n=e.y;p["default"].updateValById({id:t,updateVal:{y:n+y},noEmit:!0})}),d.forEach(function(e){var t=e.id,n=e.startPoint,r=e.endPoint,o=e.fixedArr,i=e.startKey,l=e.endKey,s={};if(i||(s.startPoint=[n[0],n[1]+y]),l||(s.endPoint=[r[0],r[1]+y]),o.length){var u=$.extend(!0,[],o);u.forEach(function(e,t){u[t]=[e[0],e[1]+y]}),s.fixedArr=u}f["default"].changePrdLine(a({},s,{id:t,noEmit:!0}))}),o.setState({isDrag:!0,dragPos:i-r}),p["default"].emitElementContentChange(),r=i})},endFunc:function(){v.endDragChangePosi(),o.setState({isDrag:!1}),C.createData({type:"changeAllElementPosiLowerSelect",name:"PRD 修改所有在选中组件之下的组件位置",autoSaveType:"prd"})}}),$.stopPropagation(e)},t.prototype.handleMouseEnter=function(){this.setState({isHover:!0})},t.prototype.handleMouseLeave=function(){this.setState({isHover:!1})},t.prototype.render=function(){var e=this.props,t=e.stylePos,n=e.width,r=void 0===n?0:n,o=e.type,a=void 0===o?"":o,i=e.showName,l=void 0!==i&&i,s=this.state,c=s.dragPos,p=s.isDrag,f=s.isHover,h=("page"==a||"contr"==a)&&l;return u["default"].createElement("div",{className:"prd-comp-top-drag-container"},f&&h?u["default"].createElement("div",{className:"drag-bg-box",style:{width:r}}):undefined,u["default"].createElement("div",{className:"comp-pos-drag-icon",onMouseDown:this.compTopDrag,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}),u["default"].createElement("div",{className:d["default"]("prd-comp-drag-line",{"is-drag":p,"is-drag-up":c<0}),style:{width:y["default"].width,left:-t.left}}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"getAllChangeElement",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"getAllChangeLine",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"compTopDrag",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"handleMouseEnter",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"handleMouseLeave",null),t}(u["default"].Component);t.PrdCompDragLineComp=P,t["default"]=P},1307:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(444)),i=n(1233),l=n(33),s=n(153);function u(e){var t=l.findSelectElement()[0],n=t.type,o=e.clientX,u=e.clientY,c=a["default"].getPrdImageCut(),d=c.dragPos,p=d.x,f=d.y,h=d.width,y=d.height,g=c.imagePos,m=g.width,v=g.height,_=(e.currentTarget.getAttribute("data-dragtype"),e.currentTarget.getAttribute("data-dragkey")),b={x:p,y:f,width:h,height:y};$.setDrag({name:"imageCutSpotDrag",posi:[o,u],target:e.target,moveFunc:function(e){var l={},c={x:e.clientX-o,y:e.clientY-u};l=i.reviseChangeXY({oldPosi:b,limitPosi:s.elementBaseVal[n],dragKey:_,changeXY:c,element:t}),l=i.dragBasePosChange({oldPosi:b,changeXY:c,dragKey:_,returnPos:l,dragLineKeyObj:{}}),l=i.limitPosScope({pos:l,oldPosi:b,limitPosi:{width:m,height:v}}),a["default"].changeDragPos({dragPos:r({},b,l)})}}),$.stopPropagation(e)}function c(e){var t=e.clientX,n=e.clientY,r=a["default"].getPrdImageCut(),o=r.dragPos,i=o.x,l=o.y,s=o.width,u=o.height,c=r.imagePos,d=c.width,p=c.height;$.setDrag({name:"imageCutMove",posi:[t,n],target:e.target,moveFunc:function(e){a["default"].changeDragPos({dragPos:{width:s,height:u,x:$.setRegion(i+(e.clientX-t),0,d-s),y:$.setRegion(l+(e.clientY-n),0,p-u)}})}}),$.stopPropagation(e)}t.imageCutSpotDrag=u,t.imageCutMove=c,t["default"]={imageCutSpotDrag:u,imageCutMove:c}},1308:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(12)),p=n(1309),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.getClickFunc=function(e){var t=this.props,n=t.zoomOutFunc,r=void 0===n?$.noop:n,o=t.zoomInFunc,a=void 0===o?$.noop:o,i=t.fullScreenFunc,l=void 0===i?$.noop:i,s=t.downloadFunc,u=void 0===s?$.noop:s,c=$.noop;switch(e){case"zoomOut":c=r;break;case"zoomIn":c=a;break;case"fullScreen":c=l;break;case"download":c=u}return c},t.prototype.render=function(){var e=this,t=e.props,n=t.zoomNum,r=void 0===n?100:n,o=t.isMax,i=void 0!==o&&o,l=t.isMin,s=void 0!==l&&l,c=t.canFullScreen;return u["default"].createElement("div",{className:"prd-zoom-btn-panel"},p.IMG_ZOOM_BTN_CONFIG.map(function(t){var n=t.type,r=t.tips;return u["default"].createElement("div",a({key:n,className:d["default"](n+"-btn img-zoom-btn a_c",{"is-max":i,"is-min":s,"can-full-screen":c}),onClick:e.getClickFunc(n)},$.addHoverData({text:r})))}),u["default"].createElement("div",{className:"prd-image-zoom-num"},r+"%"))},i([c["default"],l("design:type",Function),l("design:paramtypes",[String]),l("design:returntype",void 0)],t.prototype,"getClickFunc",null),t}(u["default"].Component);t["default"]=f},1309:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMG_ZOOM_BTN_CONFIG=[{type:"zoomIn",tips:"放大"},{type:"zoomOut",tips:"缩小"},{type:"fullScreen",tips:"实际大小"},{type:"download",tips:"下载"}],t["default"]={IMG_ZOOM_BTN_CONFIG:t.IMG_ZOOM_BTN_CONFIG}},1310:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(921)),d=l(n(1311)),p=l(n(860)),f=l(n(1315)),h=l(n(38)),y=window.isPrototypeTool,g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleInnerLink=function(){var e=this.props.element.linkUrl;h["default"].setSelectStructArr([e],!0),h["default"].setSelectStructKey([e])},t.prototype.handleLinkHeader=function(e){return-1==e.indexOf("http")?"https://"+e:e},t.prototype.render=function(){var e=this.props,t=e.isCard,n=e.element,r=n.width,o=n.height,a=n.isEdit,i=n.webUrl,l=void 0===i?"":i,u=n.left,h=n.top,g=n.isInnerLink,m=n.id,v=e.element,_={width:r,height:o},b="";b=window.isPrototypeTool||g?l:this.handleLinkHeader(l);var w;return w=l.indexOf("http")>-1?l:"https//"+$.sliceUrl(l),t?y?s["default"].createElement(d["default"],{element:v,isPreview:!y,id:m}):g?s["default"].createElement("div",{className:"card-inner-link-box",onClick:this.handleInnerLink},s["default"].createElement(d["default"],{element:v,isPreview:!y,id:m})):s["default"].createElement("a",{href:b,target:"_blank"},s["default"].createElement(d["default"],{element:v,isPreview:!y,id:m})):y||""==l?s["default"].createElement("div",{className:"prd-web-panel",style:_},s["default"].createElement("div",{className:"web-head-panel"},y?s["default"].createElement(c["default"],{text:"网页",type:"webView"}):undefined,s["default"].createElement("div",{className:"web-head-close-btn-box"})),s["default"].createElement("div",{className:"content-panel"},s["default"].createElement("div",{className:"content-bg-box"},s["default"].createElement("div",{className:"web-url-text"},l||"Web Page"))),a?s["default"].createElement(f["default"],{left:u,top:h,val:l,id:m,isEdit:a}):undefined):s["default"].createElement(p["default"],{width:r,height:o,url:w,isWeb:!0})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleInnerLink",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleLinkHeader",null),t}(s["default"].Component);t["default"]=g},1311:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(1312)),p=l(n(1234)),f=l(n(11)),h=l(n(96)),y=l(n(30)),g=l(n(10)),m=n(1235),v=function(e){function t(t){var n=e.call(this,t)||this,r=n.props.element,o=r.webUrl,a=r.webDesc;return n.state={isInnerLink:!1,webUrl:o,webDesc:a},n}return o(t,e),t.prototype.handleChangeLinkType=function(){var e=this.state.isInnerLink,t=this.props.element.id;y["default"].updateValById({id:t,updateVal:{isInnerLink:!e,webUrl:"",webDesc:"",linkUrl:""}}),g["default"].createData({type:"changeLinkType",name:"PRD 切换链接的格式",autoSaveType:"prd"}),this.setState({isInnerLink:!e,webUrl:"",webDesc:""})},t.prototype.handleUrlChange=function(e){var t=e.currentTarget.value;this.setState({webUrl:t})},t.prototype.handleDescChange=function(e){e.currentTarget.value.gblen()>200&&(e.currentTarget.value=e.currentTarget.value.slice(0,200),f["default"].show("链接名称不能超过200个字符")),this.setState({webDesc:e.currentTarget.value})},t.prototype.handleSubmit=function(e){var t=this.state,n=t.webUrl,r=t.webDesc,o=t.isInnerLink,a=this.props.id,i="",l="";""==n||(""==r?(i=n,l=n):(i=n,l=r)),this.setState({webUrl:i,webDesc:l}),m.setPrdWebUrl({webUrl:i,webDesc:l,isInnerLink:o},a)},t.prototype.render=function(){var e=this.props,t=e.element,n=t.webDesc,r=t.webUrl,o=t.width,a=t.height,i=t.isEdit,l=t.isInnerLink,c=(t.pageKey,t.linkUrl),f=(t.id,e.element),y=e.isPreview,g=this.state,m=g.isInnerLink,v=g.webUrl,_=g.webDesc,b="",w="",C="";return c&&(b=h["default"].getPrdStructById(c).title),l?(C=""!=c?b:"双击添加链接地址",w=""!=c?b:"这是一个链接名称"):(C=""==r?"双击添加链接地址":r,w=""==r?"这是一个链接名称":""!=n?n:r),s["default"].createElement("div",{className:u["default"]("web-card-panel",{"is-preview":y}),style:{width:o,height:a}},s["default"].createElement("div",{className:"web-left-column-line"}),s["default"].createElement("div",{className:"web-center-info-box"},s["default"].createElement("div",{className:"web-info-box"},s["default"].createElement("div",{className:"web-title"},w),s["default"].createElement("div",{className:"web-url"},C))),s["default"].createElement("div",{className:"insert-url-btn-box"},s["default"].createElement("div",{className:u["default"]("btn-icon",{"is-inner-link":l||m})})),i?s["default"].createElement("div",{className:"web-card-input-panel"},s["default"].createElement(d["default"],{handleChangeLinkTypeFunc:this.handleChangeLinkType,isInnerLink:l||m,element:f,handleUrlChange:this.handleUrlChange,handleDescChange:this.handleDescChange,url:v,desc:_,handleSubmit:this.handleSubmit})):undefined,(l||m)&&i?s["default"].createElement(p["default"],null):undefined)},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleChangeLinkType",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleUrlChange",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleDescChange",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleSubmit",null),t}(s["default"].Component);t["default"]=v},1312:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(12)),p=s(n(96)),f=function(e){function t(t){var n=e.call(this,t)||this;return n.input=null,n.state={webUrl:n.props.element.webUrl,webDesc:n.props.element.webDesc},n}return o(t,e),t.prototype.componentDidMount=function(){this.input.focus()},t.prototype.handleClearUrl=function(){this.setState({webUrl:""})},t.prototype.handleMouseDown=function(e){$(e.currentTarget).focus()},t.prototype.handleBlur=function(e){var t=this;setTimeout(function(){var n=!0;$(".web-input").forEach(function(e){$(e).is(":focus")&&(n=!1)}),n&&t.props.handleSubmit&&t.props.handleSubmit(e)},0)},t.prototype.render=function(){var e=this,t=e.props,n=t.isInnerLink,r=t.handleChangeLinkTypeFunc,o=t.element,i=o.linkUrl,l=(o.id,t.url),s=void 0===l?"":l,c=t.desc,f=void 0===c?"":c,h=t.handleUrlChange,y=void 0===h?$.noop:h,g=t.handleDescChange,m=void 0===g?$.noop:g,v=t.handleSubmit,_=(void 0===v&&$.noop,t.handleBlur),b=(void 0===_&&$.noop,"");return i&&(b=p["default"].getPrdStructById(i).title),u["default"].createElement("div",{onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},className:"web-url-input-panel"},u["default"].createElement("div",{className:"title-input-box web-url-input"},u["default"].createElement("div",{className:"icon-box"},u["default"].createElement("div",{className:"title-icon"})),u["default"].createElement("input",a({className:"web-input",placeholder:"请输入链接文案",autoComplete:"off",autoFocus:!0,autoCorrect:"off",spellCheck:!1,onChange:n?$.noop:m,value:n?b:f,onBlur:this.handleBlur},n?{disabled:!0}:{},{onMouseDown:this.handleMouseDown}))),u["default"].createElement("div",{className:"url-input-box web-url-input"},u["default"].createElement("div",a({className:"icon-box url-link-icon a_c",onClick:r},$.addHoverData({text:(n?"内":"外")+"部链接",direction:"right",changePosi:-20,changeOtherPosi:-3})),u["default"].createElement("div",{className:d["default"]("outer-link-icon prd-document-icons",{"is-inner-link":n})}),u["default"].createElement("div",{className:d["default"]("scroll-arrow-icon prd-document-imgs",{"is-inner-link":n})})),u["default"].createElement("input",a({className:d["default"]("web-input",{"have-input-val":s}),placeholder:n?"请添加链接页面目录":"输入链接，回车确认",autoComplete:"off",autoCorrect:"off",ref:function(t){return e.input=t},spellCheck:!1,onChange:n?$.noop:y,onBlur:this.handleBlur,value:n?b:s},n?{disabled:!0}:{},{onMouseDown:this.handleMouseDown}))),u["default"].createElement("div",{className:"input-triangle"}),u["default"].createElement("div",{className:"triangle-border"}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"handleClearUrl",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleMouseDown",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleBlur",null),t}(u["default"].Component);t["default"]=f},1313:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(830)),d=l(n(917)),p=n(235),f=n(306),h=n(919),y=l(n(30)),g=l(n(96)),m=l(n(38)),v=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={arr:p.getPrdAllStructDataArr()},n}return o(t,e),t.prototype.selectPage=function(e){var t=this.props.id,n=e.currentTarget.getAttribute("data-id"),r=y["default"].getPrdElementById(t).type;"page"==g["default"].getPrdStructById(n).type&&("text"==r?f.textBindLinkPageById(t,n):f.webBindLinkPageById({id:t,pageId:n}))},t.prototype.changeData=function(e){var t=this.state.arr,n=h.handleChangeFoldData(e,t);this.setState({arr:n}),e.preventDefault(),e.stopPropagation()},t.prototype.render=function(){var e=this.props.id,t=this.state.arr,n="",r=y["default"].getPrdElementById(e),o=r.linkUrl;"text"!=r.type?n=o:n=m["default"].getLinkInput().innerLink;return s["default"].createElement("div",{onMouseDown:this.changeData,className:"page-menu-list-panel"},s["default"].createElement(c["default"],{placeholder:"搜索页面…",searchType:"link"}),s["default"].createElement(d["default"],{arr:t,selectKey:n,searchType:"link",selectArr:[n],clickFunc:this.selectPage,isLink:!0,isContainer:!0,showArr:[]}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"selectPage",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"changeData",null),t}(s["default"].Component));t["default"]=v},1314:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(1)),s=i(n(12)),u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isWeb,n=void 0!==t&&t,r=e.setFullScreenFunc,o=void 0===r?$.noop:r,i=e.url,u=void 0===i?"":i;return l["default"].createElement("div",{className:s["default"]("full-screen-btn-panel",{"is-web":n})},l["default"].createElement("div",a({className:"btn-box a_c",onClick:o},$.addHoverData({text:"网页全屏"})),l["default"].createElement("div",{className:"full-screen-btn"})),n?l["default"].createElement("a",{href:u,target:"_blank"},l["default"].createElement("div",a({className:"btn-box a_c"},$.addHoverData({text:"新标签页打开"})),l["default"].createElement("div",{className:s["default"]("outer-jump-link-btn",{"is-web":n})}))):undefined)},t}(l["default"].Component);t["default"]=u},1315:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(30)),d=l(n(10)),p=function(e){function t(t){var n=e.call(this,t)||this;return n.inputDom=null,n.state={inputVal:n.props.val},n}return o(t,e),t.prototype.handleInputChange=function(e){this.setState({inputVal:e.currentTarget.value})},t.prototype.saveUrl=function(){var e=this.state.inputVal,t=this.props.id;c["default"].updateValById({id:t,updateVal:{webUrl:e,isEdit:!1}}),d["default"].createData({type:"saveWebUrl",name:"PRD 保存修改的网页链接",autoSaveType:"prd"})},t.prototype.render=function(){var e=this,t=e.props,n=t.left,r=void 0===n?0:n,o=t.top,a=void 0===o?0:o,i=e.state.inputVal;return s["default"].createElement("div",{className:"prd-web-input",style:{left:r,top:a-57}},s["default"].createElement("div",{className:"input-box"},s["default"].createElement("input",{placeholder:"输入网址后按回车确认",autoComplete:"off",autoCorrect:"off",autoFocus:!0,spellCheck:!1,className:"url-input",onChange:e.handleInputChange,onBlur:e.saveUrl,value:i,ref:function(t){return e.inputDom=t}}),s["default"].createElement("div",{className:"little-triangle"}),s["default"].createElement("div",{className:"little-triangle-border"})))},a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleInputChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"saveUrl",null),t}(s["default"].Component);t["default"]=p},1316:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(12)),d=l(n(5)),p=l(n(57)),f=l(n(996)),h=l(n(997)),y=n(831),g=n(922),m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleMouseDown=function(e){var t=this.props.element.id;y.dragElementCoverMove(e),g.PrdEditElementMove(e,t),$.stopPropagation(e)},t.prototype.render=function(){var e,t=this.props,n=t.element,r=n.width,o=n.height,a=n.oriWidth,i=n.symbolKey,l=n.isShowName,u=(n.showNameFunc,n.hasBorder),y=n.modifyTitle,g=n.id,m=t.element,v=i&&d["default"].getOneSymbolByLib(i);return v&&(e=p["default"].createContr(v,undefined,!0,undefined,"dragBase")),s["default"].createElement("div",{className:c["default"]({"prd-component-panel":!0,"no-background":v,"has-border":u}),style:{width:r,height:o,overflow:"hidden"},onMouseDown:this.handleMouseDown,"data-id":g},v?s["default"].createElement(s["default"].Fragment,null,l?s["default"].createElement(h["default"],{title:y||v.name,element:m}):undefined,s["default"].createElement("div",{className:"symbol-lib-item",style:{width:Math.round(v.width),height:Math.round(v.height),transform:"scale("+r/(a||r)+")"}},e)):s["default"].createElement(f["default"],{type:"组件",isDelete:i&&!v}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(s["default"].Component);t["default"]=m},1317:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(6)),f=s(n(30)),h=s(n(79)),y=s(n(10)),g=n(862),m=s(n(953)),v=s(n(996)),_=s(n(997)),b=s(n(1318)),w=s(n(1192)),C=n(829),P=n(829),O=n(305),x=n(831),E=n(922),k=s(n(38)),D=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){this.fixData()},t.prototype.componentDidUpdate=function(){this.fixData()},t.prototype.fixData=function(){if(p["default"].getIsInit()){var e=this.props.element,t=e.id,n=e.remarkId,r=e.pageKey,o=r&&p["default"].getPages()[r];if(r&&!o)f["default"].updateValById({id:t,updateVal:{pageKey:null,autoDelete:!0},noEmit:!0}),this._deleteRemarkId(),y["default"].createData({type:"pageElementAutoFixData",name:"PRD 页面组件自动修复数据",autoSaveType:"prd"});else if(n){f["default"].getPrdElementById(n)||(this._deleteRemarkId(),y["default"].createData({type:"pageElementAutoFixRemarkData",name:"PRD 页面组件自动修复关联备注数据",autoSaveType:"prd"}))}}},t.prototype._deleteRemarkId=function(){var e=this.props.element,t=e.id,n=e.remarkId,r=e.lineId;(n||r)&&(n&&O.deleteElementByIdArr({keyArr:[n]}),h["default"].deleteLine(r),f["default"].updateValById({id:t,updateVal:{remarkId:null,lineId:null}}),k["default"].emitChange())},t.prototype.handleMouseDown=function(e){var t=this.props.element.id;x.dragElementCoverMove(e),E.PrdEditElementMove(e,t),$.stopPropagation(e)},t.prototype.render=function(){var e,t=this.props,n=t.element,r=n.id,o=n.width,i=n.height,l=n.pageKey,s=n.isShowName,d=n.hasBorder,f=n.borderType,h=void 0===f?"normal-border":f,y=n.phoneShellType,O=void 0===y?"iPhone6":y,x=n.cutTop,E=void 0===x?0:x,k=n.modifyTitle,D=void 0===k?"":k,S=n.autoDelete,j=n.remarkId,M=t.element,T=d&&"phone-border"==h,A=g.phoneShellConfig[O],F=A.radius,I=void 0===F?0:F,R=(A.height,A.width,"#f0f0f0"),N="",L={};if(T){var B=g.phoneShellConfig[O],$=B.topEdge,H=B.height,V=B.width,U=B.horizEdge,z={topEdge:$,bottomEdge:B.bottomEdge,horizEdge:U,phoneWidth:V,phoneHeight:H};L=P.getPhoneContentSize({width:o,height:i,shellElement:z})}var K=L.width,q=L.height,W=L.shellW,X=L.shellTop,Y=d&&"phone-border"==h,G=(window.isPrototypeTool,(Y?K:o)/window.phoneSize.width);if(l)if(window.isPrototypeTool){var J=p["default"].getPages(),Z=p["default"].getView(),Q=J[l];if(Q){var ee={activePage:l,view:Z,viewMode:Z.mode,pages:J,page:Q,pageSelect:Q.isSelect,pagePosi:[Q.left,Q.top],phoneConBoxPos:{left:0,top:0},prdShow:!0,isCanvas:!1,pageHeight:(i+E)/G};R=Q.backColor,N=Q.name,e=u["default"].createElement("div",{className:"page-container",style:{transform:"scale("+G+")",top:-E}},u["default"].createElement(m["default"],a({},ee)))}}else{var te,ne;window.pages.some(function(e,t){e.key==l&&(te=e,ne=t)}),te&&(N=te.name,e=u["default"].createElement(w["default"],{key:te.key,index:ne,page:te,fromPrd:!0,scale:G}))}return u["default"].createElement("div",{className:"prd-page-container",onMouseDown:this.handleMouseDown,"data-id":r},"phone-border"==h?u["default"].createElement(b["default"],{element:M}):undefined,u["default"].createElement("div",{className:c["default"]("prd-page-panel",{"is-phone-border":T,"has-border":d&&"phone-border"!=h,"is-preview-page":!window.isPrototypeTool,"is-iPhone5":"iPhone5"==O&&T,"is-iPhone6":"iPhone6"==O&&T,"is-iPhone6s":"iPhone6s"==O&&T,"is-iPhoneX":"iPhoneX"==O&&T,"is-SamsungS8":"SamsungS8"==O&&T,"is-Mix":"Mix"==O&&T,"is-Mix2":"Mix2"==O&&T,"is-android":"android"==O&&T,"not-open-remark":null==j}),style:a({},T?{left:W,top:X,borderRadius:I}:{},{background:R,width:Y?K:o,height:Y?q:i})},e||u["default"].createElement(v["default"],{type:"页面",isDelete:S})),s&&e?u["default"].createElement(_["default"],{title:D||N,element:M}):undefined,E>0&&window.isPrototypeTool?u["default"].createElement("div",{className:"recover-clip-btn-box",onClick:C.handleRecoverClip},u["default"].createElement("div",{className:"recover-clip-icon"})):undefined)},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"fixData",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"_deleteRemarkId",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(u["default"].Component);t["default"]=D},1318:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=n(862),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.element,t=e.phoneShellType,n=void 0===t?"iPhone6":t,r=e.width,o=e.height,a=l.phoneShellConfig[n],s=a.horizEdge,u=r/(a.width+2*s);return i["default"].createElement("div",{className:"prd-page-phone-shell-panel "+n+"-panel",style:{height:o/u,width:r/u,transform:"scale("+u+")",transformOrigin:"0 0"}},i["default"].createElement("div",{className:"phone-head-img "+n+"-head"}),i["default"].createElement("div",{className:"phone-body-img "+n+"-body"}),i["default"].createElement("div",{className:"phone-footer-img "+n+"-footer"}))},t}(i["default"].Component);t.PrdPagePhoneShellPanelComp=s,t["default"]=s},1319:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=a(n(40)),u=a(n(860)),c=window.isPrototypeTool,d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.element,t=e.width,n=e.height,r=e.previewMode,o=void 0===r?"all":r,a=c?"":s["default"].getPreviewInfo().view.id;return c?i["default"].createElement("div",{className:"preview-panel",style:{width:t,height:n}},"all"==o?i["default"].createElement("div",null,i["default"].createElement("div",{className:"left-list-panel"}),i["default"].createElement("div",{className:"list-bg-box"})):undefined,i["default"].createElement("div",{className:l["default"]("center-content-panel",{"is-web":window.isPc})},i["default"].createElement("div",{className:"phone-page-img"})),"all"==o?i["default"].createElement("div",null,i["default"].createElement("div",{className:"right-list-panel"}),i["default"].createElement("div",{className:"list-bg-box"})):undefined,i["default"].createElement("p",{className:"head-tips-text"},"为提升文档流畅度，此图暂显示为示意图，预览时显示为实际交互原型")):i["default"].createElement(u["default"],{width:t,height:n,url:"https://www.xiaopiu.com/h5/byId?type=project&id="+a+("all"!=o?"&simple=true":"")+"&inprd=true"})},t}(i["default"].Component);t["default"]=d},1320:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(47)),d=l(n(40)),p=l(n(921)),f=l(n(860)),h=n(831),y=n(922),g=l(n(30)),m=window.isPrototypeTool,v=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.handleMouseDown=function(e){var t=this.props.element.id;h.dragElementCoverMove(e),y.PrdEditElementMove(e,t),$.stopPropagation(e)},t.prototype.render=function(){var e=this.props.element,t=e.width,n=e.height,r=e.pageFlowId,o=e.id,a=m?"":d["default"].getPreviewInfo().view.id,i="";if(r&&m)if("all"==r)i="所有页面流程";else{var l=c["default"].getOnePageFlow(r);l||g["default"].updateValById({id:o,updateVal:{pageFlowId:null},noEmit:!0}),i=l?l.title:"所有页面流程"}return m?s["default"].createElement("div",{className:"page-flow-panel",style:{width:t,height:n},onMouseDown:this.handleMouseDown,"data-id":o},s["default"].createElement("div",{className:"preview-title-text"},s["default"].createElement("div",{className:"pageflow-title"},i),s["default"].createElement("div",{className:"pageflow-tips"},"页面流程")),s["default"].createElement(p["default"],{text:"流程图",top:0}),s["default"].createElement(s["default"].Fragment,null,s["default"].createElement("div",{className:"preview-default-bg-img"}),s["default"].createElement("div",{className:"preview-default-bg-img"}))):s["default"].createElement(f["default"],{width:t,height:n,url:"https://www.xiaopiu.com/h5/byId?type=project&id="+a+"&multi=true&inprd=true"+(r?"&pageflow="+r:"")})},a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(s["default"].Component);t["default"]=v},1321:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(40)),s=a(n(921)),u=a(n(860)),c=window.isPrototypeTool,d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.element,t=e.width,n=e.height,r=c?"":l["default"].getPreviewInfo().view.id;return c?i["default"].createElement("div",{className:"page-flow-panel",style:{width:t,height:n}},i["default"].createElement(s["default"],{text:"固定模式视图",top:20}),i["default"].createElement("div",{className:"preview-fixed-default-bg-img"})):i["default"].createElement(u["default"],{width:t,height:n,url:"https://www.xiaopiu.com/h5/byId?type=project&id="+r+"&multi=true&fixed=true&inprd=true"})},t}(i["default"].Component);t["default"]=d},1322:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(30)),d=l(n(998)),p=l(n(4)),f=n(924),h=n(305),y=n(811),g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this;setTimeout(function(){e.setState({})},0)},t.prototype.componentWillUpdate=function(){var e=this.props.element,t=e.id,n=e.pageKey,r=e.pageId,o=n||r,a=c["default"].getPrdElementById(o);if(a)return!n&&r&&c["default"].updateValById({id:t,updateVal:{pageKey:r,pageId:a.pageId},noEmit:!0}),!1;h.deleteElementByIdArr({keyArr:[t],noEmit:!0})},t.prototype._pageNoteClick=function(e){y.prdEditInit(),$.tipHide()},t.prototype.handleHoverAndBlur=function(e,t){var n,r=this.props.element.pageKey,o=e.currentTarget,a=o.getAttribute("data-idx"),i=o.getAttribute("data-contr");a?$('.prd-page-container[data-id="'+r+'"] .note-box .note').forEach(function(e){e.innerText==a&&(n=$(e).parent()[0])}):i&&(n=$('.prd-page-container[data-id="'+r+'"] .contr-note-box[data-name="'+i+'"]')[0]);n&&(t?($.hasClass(n,"hover")||$.addClass(n,"hover"),$.hasClass(o,"hover")||$.addClass(o,"hover")):($.hasClass(o,"hover")&&$.removeClass(o,"hover"),$.hasClass(n,"hover")&&$.removeClass(n,"hover")))},t.prototype.handleHoverNote=function(e){this.handleHoverAndBlur(e,!0)},t.prototype.handleLeaveNote=function(e){this.handleHoverAndBlur(e,!1)},t.prototype.render=function(){var e=this,t=this.props.element,n=t.width,r=t.height,o=t.pageKey,a=t.pageId,i=(t.type,o||a),l=i&&c["default"].getPrdElementById(i);if(!l)return null;var p=f.getNodeList(l),h=p.pageNoteList,y=p.contrNoteList,g=0==h.length&&0==y.length,m=h.length>0&&y.length>0;return s["default"].createElement("div",{className:u["default"]("prd-page-remarks-panel",{"is-remark-empty":g,"is-no-page-remarks":0==h.length}),style:g?{width:n,height:r}:{}},g?s["default"].createElement("div",{className:"empty-remarks-panel"},s["default"].createElement("div",{className:"empty-tips-icon"}),s["default"].createElement("div",{className:"empty-tips-text"},"当前页面没有备注信息")):s["default"].createElement(s["default"].Fragment,null,h.length>0?h.map(function(t,r){var o=t.content;return s["default"].createElement("div",{"data-idx":r+1,onMouseMove:e.handleHoverNote,onMouseLeave:e.handleLeaveNote,className:u["default"]("page-remarks-box",{"is-small-size":n<280}),key:"page-note"+r},s["default"].createElement("div",{className:"remarks-num-box"},s["default"].createElement("div",{className:"remarks-num"},r+1)),s["default"].createElement("div",{className:"remarks-text-panel"},s["default"].createElement("p",{className:"remarks-text"},""+o)))}):undefined,m?s["default"].createElement("div",{className:u["default"]("page-contr-separator-line",{"is-small-size":n<280})}):undefined,y.length>0?y.map(function(t,r){var o=t.name,a=t.content;return s["default"].createElement("div",{onMouseMove:e.handleHoverNote,onMouseLeave:e.handleLeaveNote,"data-contr":o,className:u["default"]("contr-remarks-box",{"is-small-size":n<280}),key:"contr-note"+r},s["default"].createElement("div",{className:"remarks-icon-box"},s["default"].createElement("div",{className:"remarks-icon"})),s["default"].createElement("div",{className:"remarks-text-panel"},s["default"].createElement("div",{className:"remarks-text contr-title"},o),s["default"].createElement("pre",{className:"remarks-text contr-content"},a)))}):undefined),s["default"].createElement(d["default"],{clickFunc:this._pageNoteClick,btnStyle:{right:5},type:"pageRemark"}))},a([p["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"_pageNoteClick",null),a([p["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"handleHoverAndBlur",null),a([p["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleHoverNote",null),a([p["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleLeaveNote",null),t}(s["default"].Component);t["default"]=g},1323:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=n(1324),s=a(n(1325)),u=a(n(998)),c=n(861),d=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.element,n=t.type,r=t.isEdit,o=t.symbolKey,a=t.pageKey,d=e.element,p=l.getMenuListPos(d),f=p.listStyle,h=p.btnStyle,y=r&&("contr"==n||"pageflow"==n||"page"==n),g=r&&("contr"==n&&o||"pageflow"==n||"page"==n&&a);return i["default"].createElement(i["default"].Fragment,null,g?i["default"].createElement(u["default"],{clickFunc:c.editBtnClickFunc,btnStyle:h}):undefined,y?i["default"].createElement(s["default"],{menuStyle:f,element:d}):undefined)},t}(i["default"].Component));t["default"]=d},1324:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(236));function i(e){var t,n,o=e.width,i=e.x,l=e.isEdit,s=a["default"].width-100;if(i+o==s)o/2>=275?(t={left:o-275},n={left:l?o-275-40-5:o-40-5}):o/2<275&&(s-o>=275?(t={left:-275},n={left:o-40-5}):(t={left:-o-5},n={left:5}));else if(i+o<s)if(s-i-o>=275)t={left:o+5},n={left:o-40-5};else if(s-i-o<275)if(o/2>=275)t={left:o-275},n={left:l?o-275-40-5:o-40-5};else if(o/2<275)if(i>275||s-i-o>275)i>275?(t={left:-275},n={left:o-40-5}):s-i-o>275&&(t={left:o+5},n={left:o-40-5});else{var u=i+o+275-5-s;t={left:o-u},n={left:l?o-u-5-40:o-40-5}}return{listStyle:r({},t),btnStyle:r({},n)}}t.getMenuListPos=i,t["default"]={getMenuListPos:i}},1325:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=n(861),p=n(861),f=s(n(1326)),h=s(n(1327)),y=s(n(1329)),g=s(n(1330)),m=s(n(1331)),v=s(n(1333)),_=s(n(1334)),b=s(n(810)),w=window.$,C=function(e){function t(t){var n=e.call(this,t)||this;return n.dom=null,n.state={marginTop:0,isCreating:!1,isTutorial:!1},n}return o(t,e),t.prototype.componentDidMount=function(){this.fixedTop(),b["default"].addChangeListener(this.onChange)},t.prototype.componentDidUpdate=function(){this.fixedTop()},t.prototype.componentWillUnmount=function(){b["default"].removeChangeListener(this.onChange)},t.prototype.onChange=function(){this.setState({})},t.prototype.fixedTop=function(){this.props.element.id;if(this.dom){var e=w.offset(this.dom,!0),t=e.top,n=e.height,r=w.offset(document.body,!0).height;t=Math.round(t),n=Math.round(n),r=Math.round(r),t<110?this.setState({marginTop:115-t}):t+n>r&&this.setState({marginTop:r-n-t-5})}},t.prototype.ref=function(e){this.dom=e},t.prototype.returnFunc=function(){this.setState({isCreating:!1,isTutorial:!1})},t.prototype.createFunc=function(){this.setState({isCreating:!0})},t.prototype.tutorialFunc=function(){this.setState({isTutorial:!0})},t.prototype.getCurrentMenuContent=function(e){e.id;var t=e.type,n=e.isCreating,r=e.isTutorial,o=void 0!==r&&r;e.isLink;switch(t){case"pageflow":return n?u["default"].createElement(m["default"],{type:t}):u["default"].createElement(y["default"],{selectFunc:p.pageFlowSelectFunc});case"page":return n?u["default"].createElement(m["default"],{type:t}):u["default"].createElement(g["default"],null);case"contr":return n?u["default"].createElement(m["default"],{type:t}):o?u["default"].createElement(_["default"],null):u["default"].createElement(v["default"],{selectFunc:p.contrSelectFunc});default:return null}},t.prototype.render=function(){var e=this.props,t=e.menuStyle,n=e.element,r=n.id,o=n.type,i=n.isLink,l=this.state,s=l.marginTop,c=l.isCreating,p=l.isTutorial;return u["default"].createElement("div",{className:"menu-list-container",ref:this.ref,style:a({top:s},t),onScroll:function(e){e.preventDefault(),e.stopPropagation()}},u["default"].createElement(f["default"],{type:o,closeFunc:d.closeMenuFunc,returnFunc:this.returnFunc,isCreating:c,isTutorial:p,tutorialFunc:this.tutorialFunc}),u["default"].createElement("div",{className:"menu-body-panel"},this.getCurrentMenuContent({id:r,type:o,isCreating:c,isTutorial:p,isLink:i})),u["default"].createElement(h["default"],{type:o,createFunc:this.createFunc,tutorialFunc:this.tutorialFunc,isCreating:c,isTutorial:p}))},i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"onChange",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"fixedTop",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"ref",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"returnFunc",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"createFunc",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"tutorialFunc",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"getCurrentMenuContent",null),t}(u["default"].Component);t["default"]=C},1326:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(1)),s=i(n(12)),u=n(859),c=window.$,d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.closeFunc,n=void 0===t?c.noop:t,r=e.returnFunc,o=void 0===r?c.noop:r,i=e.tutorialFunc,d=void 0===i?c.noop:i,p=e.isCreating,f=e.isTutorial,h=e.type,y=u.getTitleText(h);return l["default"].createElement("div",{className:"menu-head-panel"},p||f?l["default"].createElement("div",{className:"head-return-btn-panel",onClick:o},l["default"].createElement("div",{className:"return-btn-icon"}),l["default"].createElement("div",{className:"return-text"},"返回")):"contr"==h?l["default"].createElement("div",{className:s["default"]("head-title-text-panel")},l["default"].createElement("div",{className:"head-text"},"选择"+y),l["default"].createElement("div",a({className:"question-btn-icon a_c",onClick:d},c.addHoverData({text:"展示项目中创建的所有引用组件",direction:"bottom"})))):l["default"].createElement("div",{className:"head-text"},"选择"+y),l["default"].createElement("div",{className:"head-close-btn",onClick:n}))},t}(l["default"].Component);t["default"]=d},1327:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(1328)),s=n(859),u=window.$,c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isCreating,n=void 0===t||t,r=e.isTutorial,o=void 0!==r&&r,a=e.createFunc,c=void 0===a?u.noop:a,d=e.tutorialFunc,p=void 0===d?u.noop:d,f=e.type,h=s.getFooterText(f);return n||o?null:"contr"==f?i["default"].createElement(l["default"],{createFunc:c,tutorialFunc:p}):i["default"].createElement("div",{className:"menu-footer-panel"},i["default"].createElement("div",{className:"menu-footer-btn",onClick:c},"+创建新"+h))},t}(i["default"].Component);t["default"]=c},1328:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=window.$,s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.createFunc,n=void 0===t?l.noop:t,r=e.tutorialFunc,o=void 0===r?l.noop:r;return i["default"].createElement("div",{className:"contr-bottom-panel"},i["default"].createElement("div",{className:"add-new-contr-btn",onClick:n},"+创建新组件"),i["default"].createElement("div",{className:"import-other-contr-btn",onClick:o},"导入更多组件"))},t}(i["default"].Component);t["default"]=s},1329:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(47)),p=l(n(810)),f=n(33),h=l(n(830)),y=l(n(920)),g=window.$;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.getSearchText=function(e){var t=[],n=f.findSelectElement()[0].pageFlowId,r=this.props.selectFunc,o=void 0===r?g.noop:r,a=p["default"].getSearchFlowText();return e.forEach(function(e,r){var i=e.id,l=e.title,c=a&&g.searchIn(a,l,!0,!0);a&&-1==l.indexOf(a)||t.push(s["default"].createElement("div",{"data-id":i,className:u["default"]("single-list-box",{"is-select":n==i}),key:i,onClick:o},s["default"].createElement("div",{className:"single-list-icon"}),c?s["default"].createElement("div",{className:"list-text",dangerouslySetInnerHTML:{__html:c}}):s["default"].createElement("div",{className:"list-text"},l)))}),t},t.prototype.render=function(){var e=[{id:"all",title:"所有页面流程"}].concat((d["default"].getPageFlowList()||[]).map(function(e){return{id:e.id,title:e.title}})),t=this.getSearchText(e);return s["default"].createElement("div",{className:"page-flow-menu-list-panel"},s["default"].createElement(h["default"],{placeholder:"搜索流程…",searchType:"flow"}),s["default"].createElement("div",{className:"content-list-panel"},t,t.length?undefined:s["default"].createElement(y["default"],null)))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"getSearchText",null),t}(s["default"].Component);t["default"]=m},1330:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(830)),d=l(n(917)),p=n(33),f=n(83),h=n(861),y=n(919),g=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={pageListArr:n._getPageListArr(f.getStructHierarchy(!0))},n}return o(t,e),t.prototype._getPageListArr=function(e){void 0===e&&(e=[]);var t=this,n=[];return e.forEach(function(e){var r=e.type,o=e.name,a=e.key,i=e.folderHierarchy,l={type:r,title:o,id:r+"_"+a};"folder"==r&&(l.isFold=!1,l.pageHierarchy=t._getPageListArr(i)),n.push(l)}),n},t.prototype.changeData=function(e){var t=this.state.pageListArr,n=y.handleChangeFoldData(e,t);this.setState({pageListArr:n})},t.prototype.render=function(){var e=this.state.pageListArr,t=p.findSelectElement()[0].pageKey,n=void 0===t?-1:t;return s["default"].createElement("div",{onMouseDown:this.changeData,className:"page-menu-list-panel"},s["default"].createElement(c["default"],{placeholder:"搜索页面…",searchType:"containerStruct"}),s["default"].createElement(d["default"],{isContainer:!0,arr:e,clickFunc:h.pageSelectFunc,selectKey:"page_"+n,selectArr:["page_"+n],searchType:"containerStruct",showArr:e}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"_getPageListArr",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"changeData",null),t}(s["default"].Component));t["default"]=g},1331:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(11)),p=n(1332),f=function(e){function t(t){var n=e.call(this,t)||this;return n.input=null,n.state={inputValue:""},n}return o(t,e),t.prototype.getInputDefaultTitle=function(e){switch(e){case"pageflow":return"页面流程";case"page":return"页面";case"contr":return"引用组件";default:return""}},t.prototype.handleInputChange=function(e){e.currentTarget.value.gblen()>24&&(e.currentTarget.value=e.currentTarget.value.slice(0,24),d["default"].show("长度不能超过24个字符")),this.setState({inputValue:e.currentTarget.value})},t.prototype.onSubmitInputValue=function(){var e=this.state.inputValue;""!=e&&p.prdEditCreate({name:e})},t.prototype.render=function(){var e=this.props.type,t=this.state.inputValue,n=this.getInputDefaultTitle(e);return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement("input",{className:"page-flow-title-input-panel",placeholder:"请输入"+n+"名称",autoComplete:"off",autoCorrect:"off",spellCheck:!1,onChange:this.handleInputChange,value:t}),s["default"].createElement("div",{className:u["default"]("create-page-flow-btn-panel",{"is-have-input-value":""!=t}),onClick:this.onSubmitInputValue},"创建并前往编辑"))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"getInputDefaultTitle",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleInputChange",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onSubmitInputValue",null),t}(s["default"].Component);t["default"]=f},1332:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(6)),a=r(n(5)),i=r(n(30)),l=r(n(10)),s=r(n(848)),u=n(33),c=n(811),d=n(800),p=n(83),f=n(145),h=n(170),y=n(822);function g(e){var t=e.name,n=(e.noEmit,u.findSelectElement()[0]),r=n.type,g=n.id;if("contr"==r){var m=s["default"].createSymbol({Nums:a["default"].getNums(),contrArr:[],symbolContrs:a["default"].getSymbolContr(),widthHeight:[150,150],name:t});i["default"].updateValById({id:g,updateVal:{width:150,height:150,oriWidth:150,oriHeight:150,symbolKey:m}})}else if("page"==r){var v=o["default"].getView(),_=h.getNewPagePosi();f.pageCreate({options:_,name:t,isShow:!1},!1,!0),p.addStructPageInFolder(),i["default"].updateValById({id:g,updateVal:{pageKey:v.total}}),l["default"].createData({type:"prdEditCreatePage",name:"PRD页面组件创建新页面",autoSaveType:"prd"}),l["default"].createData({type:"createPage",name:"[页面 "+t+"] 创建",handleObjType:"page",autoSaveType:"changePages"}),setTimeout(function(){y.selectPage("",v.total,!1)},0)}else if("pageflow"==r){o["default"].selectChange([],!0);var b=d.createPageFlow({name:t}).id;i["default"].updateValById({id:g,updateVal:{pageFlowId:b}})}c.prdEditInit()}t.prdEditCreate=g,t["default"]={prdEditCreate:g}},1333:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(5)),p=l(n(810)),f=l(n(57)),h=l(n(830)),y=l(n(920)),g=window.$;var m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isCopyIconShow:!1,currentIndex:-1},n}return o(t,e),t.prototype.showCopyIcon=function(e){this.setState({isCopyIconShow:!0,currentIndex:e})},t.prototype.hideCopyIcon=function(){this.setState({currentIndex:-1,isCopyIconShow:!1})},t.prototype.handleCopyFunc=function(e){var t=e.currentTarget.getAttribute("data-key");t&&d["default"].getOneSymbolByLib(t);g.stopPropagation(e)},t.prototype.renderContr=function(e){var t=this,n=t.state,r=n.isCopyIconShow,o=(n.currentIndex,t.props.selectFunc),a=void 0===o?g.noop:o,i=p["default"].getSearchContrText(),l=[];return e.forEach(function(e,n){var o=e.name,c=e.width,d=e.height,p=e.key,h=f["default"].createContr(e,undefined,!0,undefined,"dragBase"),y={width:Math.round(c),height:Math.round(d)};if(c>100||d>100){var m=100/Math.max(c,d);y.transform="translate3d(-50%, -50%, 0) scale("+m+")"}var v=i&&g.searchIn(i,o,!0,!0);-1==o.indexOf(i)&&i||l.push(s["default"].createElement("div",{className:"single-contr-box",key:"contr"+n},s["default"].createElement("div",{"data-key":p,className:u["default"]("single-contr-img-box",{"is-mouse-hover":r}),onMouseMove:function(){return t.showCopyIcon(n)},onMouseLeave:t.hideCopyIcon,onClick:a},s["default"].createElement("div",{className:"symbol-lib-item",style:y},h)),v?s["default"].createElement("div",{className:"single-contr-name",dangerouslySetInnerHTML:{__html:v}}):s["default"].createElement("div",{className:"single-contr-name"},o)))}),l},t.prototype.render=function(){var e=function(){var e=d["default"].getSymbolContr().symbols,t=[];for(var n in e){var r=d["default"].getOneSymbolByLib(n);t.push(r)}return t}(),t=this.renderContr(e);return e.length>0?s["default"].createElement("div",{className:"contr-menu-list-container"},s["default"].createElement(h["default"],{placeholder:"搜索组件…",searchType:"contr"}),s["default"].createElement("div",{className:"contr-menu-list-panel"},t,t.length?undefined:s["default"].createElement(y["default"],null))):s["default"].createElement("div",{className:"empty-contr-tips-panel"},s["default"].createElement("div",{className:"empty-contr-img-tips"}),s["default"].createElement("pre",{className:"empty-contr-text-tips"},"无可用的引用组件\n创建新组件或导入更多组件"))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"showCopyIcon",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"hideCopyIcon",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleCopyFunc",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"renderContr",null),t}(s["default"].Component);t["default"]=m},1334:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(5)),s=n(811),u=window.$,c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){return i["default"].createElement("div",{className:"import-contr-tutorial-panel"},i["default"].createElement("div",{className:"tutorial-title"},"如何导入更多组件"),i["default"].createElement("div",{className:"tutorial-brief-answer"},"将组件创建为引用组件后可自动导入。"),i["default"].createElement("div",{className:"answer-step-text"},"1. 前往",i["default"].createElement("span",{className:"key-tips-text"},"【项目编辑页】"),"选中组件"),i["default"].createElement("div",{className:"check-contr-example-img"}),i["default"].createElement("div",{className:"answer-step-text"},"2. 在右侧面板，创建引用"),i["default"].createElement("div",{className:"quote-contr-demo-box"},i["default"].createElement("span",null,"引用"),i["default"].createElement("div",{className:"quote-contr-demo-img"})),i["default"].createElement("div",{className:"bottom-setting-btn",onClick:function(){s.prdEditInit(!1,"createSymbol"),setTimeout(function(){l["default"].selectChange([]),u("#symbolLibLabel").click()},0)}},"去编辑页设置"))},t}(i["default"].Component);t["default"]=c},1335:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t["default"]=e,t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=l(n(1)),c=n(26),d=s(n(957)),p=s(n(79)),f=s(n(30)),h=s(n(38)),y=n(33),g=s(n(4)),m=window.isPrototypeTool;var v=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.renderPrdLine=function(){var e,t=[],n=y.getAllLineByStructKey(),r=this.props.zoom,o=(e="",h["default"].getSelectElementArr().forEach(function(t,n){var r=f["default"].getPrdElementById(t)||{x:0,y:0},o=r.x,a=r.y;e+=t+"|x"+o+"y"+a}),e),a=h["default"].getSelectElementArr();return n.forEach(function(e){var n,i,l,s=e.id,c=e.lineType,f=e.isHide,y=e.startKey,g=e.endKey,v=e.fixedArr,_=e.hasComment,b=e.text,w=void 0===b?"输入条件":b,C=e.commentPercent,P=e.commentWidth,O=e.commentHeight,x=e.noStartSupply,E=e.noEndSupply,k=e.startPoint,D=e.endPoint,S=e.startPosi,j=e.endPosi,M=e.isConnect;(!M||M&&(!m||a.some(function(e){return e==y||e==g})))&&t.push(u["default"].createElement(d["default"],{key:s,id:s,data:e,zoom:r,lineType:c,isHide:f,startKey:y,endKey:g,fixedArr:v,fixedArrStr:v.join("|"),hasComment:_,text:w,commentPercent:C,commentWidth:P,commentHeight:O,noStartSupply:x,noEndSupply:E,startPoint:k,endPoint:D,endPosi:j,startPosi:S,elementPosi:o,isLineSelect:(n=s,i=p["default"].getPrdSelectArr(),l=h["default"].getSelectElementArr(),-1!=i.indexOf(n)&&!l.length),isConnect:M}))}),t},t.prototype.render=function(){return u["default"].createElement(c.Group,null,this.renderPrdLine())},a([g["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"renderPrdLine",null),t}(u.Component);t["default"]=v},1336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(864),o=n(291);function a(e){}function i(e){var t=e.target.attrs["data-eventkey"];t&&-1!=t.indexOf("line")?r.getHoverLineKey({target:e.target}):o.removeHoveringLine()}t.prdCanvasMouseDown=a,t.prdCanvasMouseMove=i,t["default"]={prdCanvasMouseDown:a,prdCanvasMouseMove:i}},1337:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),a=r(n(96)),i=r(n(10));t.prdAllSturctFix=function(){var e=[],t=o["default"].getStructHierarchy(),n=t.slice();t.forEach(function(t){if(-1==e.indexOf(t)){var r=a["default"].getPrdStructById(t);e.push(t),r?"folder"==r.type&&function o(e,t){var n=e.id,r=e.pageHierarchy,i=r.slice();r.forEach(function(e){if(-1==t.indexOf(e)){var n=a["default"].getPrdStructById(e);n?(t.push(e),"folder"==n.type&&o(n,t)):i.remove(e)}else i.remove(e)}),$.checkArrayEqual(i,r)||a["default"].updateValById({id:n,updateVal:{pageHierarchy:i}})}(r,e):n.remove(t)}else n.remove(t)});var r=a["default"].getAllPrdStruct();for(var l in r)-1==e.indexOf&&n.push(l);$.checkArrayEqual(n,t)||(o["default"].setStructHierarchy(n),i["default"].createData({type:"fixFolderData",name:"PRD 目录脏数据自修复",autoSaveType:"prd"}))}},204:function(e,t,n){var r=n(1297);e.exports=function(e){if(t=e,t&&t.window===t)return e;var t;var n=r(e);if(o){n.parentWindow.execScript("document._parentWindow = window;","Javascript");var a=n._parentWindow;return n._parentWindow=null,a}return n.defaultView||n.parentWindow};var o=n(1298)},2202:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(38)),c=l(n(96)),d=l(n(30)),p=l(n(79)),f=l(n(2630)),h=l(n(2963)),y=l(n(2969)),g=l(n(3017)),m=n(798),v=l(n(4)),_=n(2634),b=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={prdSet:u["default"].getPrdSet(),cursor:u["default"].getCursor(),isUnfold:f["default"].getIsUnfold()},n}return o(t,e),t.prototype.componentWillMount=function(){this._fixedData()},t.prototype.componentDidCatch=function(){this._fixedData()},t.prototype.componentDidMount=function(){u["default"].getSelectStructKey()||_.prdInit({noCreate:!0}),u["default"].addChangeListener(this._onChange),c["default"].addChangeListener(this._onChange),d["default"].addChangeListener(this._onChange),p["default"].addChangeListener(this._onChange),f["default"].addChangeListener(this.changeOpen)},t.prototype.componentWillUnmount=function(){u["default"].removeChangeListener(this._onChange),c["default"].removeChangeListener(this._onChange),d["default"].removeChangeListener(this._onChange),p["default"].removeChangeListener(this._onChange),f["default"].removeChangeListener(this.changeOpen)},t.prototype.changeOpen=function(){this.setState({isUnfold:f["default"].getIsUnfold()})},t.prototype._fixedData=function(){var e=u["default"].getSelectStructKey(),t=u["default"].getSelectElementArr();if(e&&!c["default"].getPrdStructById(e)&&m.selectFirstPage(),t.length>0){var n=t.slice();t.forEach(function(e){d["default"].getPrdElementById(e)||n.remove(e)}),n.length!=t.length&&u["default"].setSelectElementArr(n)}},t.prototype._onChange=function(){this.setState({prdSet:u["default"].getPrdSet(),cursor:u["default"].getCursor()})},t.prototype.render=function(){var e=this.state,t=e.prdSet,n=e.prdSet.createType,r=e.cursor,o=e.isUnfold;return s["default"].createElement("div",{className:"prd-panel",id:"prdPanel"},n?s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(h["default"],{prdSet:t}),s["default"].createElement(y["default"],{prdSet:t,cursor:r,isUnfold:o})):s["default"].createElement(g["default"],null))},a([v["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"changeOpen",null),a([v["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_fixedData",null),a([v["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=b},2220:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(455)),f=s(n(2978)),h=n(33),y=n(980),g=window.$,m=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.openDropList=function(){var e=this.props.btnSet.type;y.changePrdDropdownOpen(e)},t.prototype.render=function(){var e=p["default"].getPrdDropdown(),t=(e.type,e.isOpen,this.props),n=t.btnSet,r=n.type,o=n.clickFunc,i=void 0===o?g.noop:o,l=n.isDisableFunc,s=void 0===l?g.noop:l,d=n.showNameFunc,y=(void 0===d&&g.noop,n.isActiveFunc),m=n.tips,v=n.isHaveLine,_=void 0!==v&&v,b=(n.remarkId,t.btnSet),w=h.findSelectElement()[0].isShowName,C=void 0!==w&&w,P=s&&s();return"text-color"!=r&&"table-bg-color"!=r&&"page-border"!=r?u["default"].createElement("div",{className:"prd-head-btn-panel"},_?u["default"].createElement("div",{className:c["default"]("column-line",{"left-line":"left"==_,"right-line":"right"==_,"is-short-page":"short-page"==r||"text-hyperlink"==r})}):undefined,u["default"].createElement("div",a({className:c["default"]("prd-head-btn-icon "+r+"-btn a_c",{"have-column-line":_,"left-line":"left"==_,"right-line":"right"==_,"is-disable":P,"is-active":y&&y(),"is-short-page":"short-page"==r,"is-hyperlink-icon":"text-hyperlink"==r})},m?g.addHoverData({text:"hide-snapshots-title"==r?C?"隐藏"+m:"显示"+m:"page-remarks"==r?y()?"隐藏"+m:"显示"+m:m}):{},{onClick:P?g.noop:i}))):u["default"].createElement(f["default"],{btnType:r,btnSet:b})},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"openDropList",null),t}(u["default"].Component);t["default"]=m},2238:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(241)),a=r(n(39)),i=r(n(30)),l=r(n(1218)),s=n(443),u=n(980),c=n(33),d=n(205),p=n(10)["default"];function f(e){var t=e.changeVal,n=e.notInText,r=void 0!==n&&n,o=a["default"].getTableData(),l=o.selectContr,s=o.selectCell;if(l&&s)if(r)d.updateCellData(t);else{var u={};u.text=t,d.updateCellData(u)}else{var p=c.findSelectElement()[0],f=p.id,h=p.child;if(i["default"].updateValById({id:f,updateVal:t}),h)for(var y in h){var g=r?h[y]:h[y].text;$.extend(!0,g,t)}}}function h(e){var t=c.findSelectElement()[0].id,n=i["default"].getPrdElementById(t).isEdit,r=!0;n||(r=!1,i["default"].updateValById({id:t,updateVal:{isEdit:!0}})),setTimeout(function(){$(".element-container.element-edit .editor-pre>div")[0].focus();var t=o["default"].getRichText().editor;if(r||(t.moveToRangeOfDocument(),t.select()),t){if(s.removeMarks({type:"textColor"}),t.addMark({type:"textColor",data:{val:e}}),l["default"].setTextColorIdx(e),t.value.focusText.text==window.getSelection().toString()){var n=s.getMarkVal({type:"textColor"})||1;t.unwrapBlock("color|"+n),t.wrapBlock("color|"+e)}u.hidePrdDropdownOpen()}},0)}function y(e){f({changeVal:{textColor:"#"+e}}),p.createData({type:"changeTableTextColor",name:"PRD 修改表格文字颜色",autoSaveType:"prd"}),l["default"].setTableTextColor(e),u.hidePrdDropdownOpen()}function g(e){f({changeVal:{backColor:"#"+e,hasBackColor:!0},notInText:!0}),p.createData({type:"changeTableTextColor",name:"PRD 修改表格背景颜色",autoSaveType:"prd"}),l["default"].setTableBgColor(e),u.hidePrdDropdownOpen()}t.changeVal=f,t.changeRichTextColor=h,t.changeTableTextColor=y,t.changeTableBgColor=g,t["default"]={changeVal:f,changeRichTextColor:h,changeTableTextColor:y,changeTableBgColor:g}},2630:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i={isUnfold:!0},l=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.setIsUnfold=function(){var e=!i.isUnfold;i.isUnfold=e,l.emitChange()},t.prototype.getIsUnfold=function(){return i.isUnfold},t.prototype.emitChange=function(){this.emit("change")},t.prototype.addChangeListener=function(e){this.on("change",e)},t.prototype.removeChangeListener=function(e){this.removeListener("change",e)},t}(a.EventEmitter));t["default"]=l},2631:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(2973)),f=s(n(2974)),h=s(n(2975)),y=s(n(455)),g=s(n(39)),m=n(980),v=n(2977),_=n(2632),b=n(443),w=n(33),C=n(981),P=window.$,O=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.setCurrentTextColor=function(){},t.prototype.openDropList=function(e){var t=this.props.baseSet.type;m.changePrdDropdownOpen(t)},t.prototype.getTextData=function(){var e=w.findSelectElement()[0].type,t=this.props.text,n="left",r=14;if("text"==e)r=t,C.textAlignArr.some(function(e){return!!b.isActiveNode({type:e})&&(n=e,!0)});else if("table"==e){var o=g["default"].getTableData(),a=o.selectContr,i=o.selectCell,l=w.findSelectElement()[0];if(a&&i){var s=i[0],u=s.columnIndex,c=s.lineIndex,d=a.child,p=u+"_"+c;d&&d[p]&&d[p].text&&(n=d[p].text.horizontal,r=d[p].text.fontSize||14)}else n=l.horizontal,r=l.fontSize;switch(n){case"hC":n="center";break;case"hR":n="right";break;case"hJ":n="justify";break;default:n="left"}}return{textAlign:n,fontSize:r}},t.prototype.selectTextAlign=function(e){var t=w.findSelectElement()[0].type;"text"==t?_.selectTextAlign(e):"table"==t&&_.selectTableTextAlign(e)},t.prototype.getDropdownList=function(e){var t=this.props.text,n=this.getTextData(),r=n.textAlign,o=n.fontSize;switch(e){case"text-size":return u["default"].createElement(p["default"],{selectFunc:v.selectFontSize,text:t});case"text-align":return u["default"].createElement(f["default"],{selectFunc:this.selectTextAlign,textAlign:r});case"table-font-size":return u["default"].createElement(h["default"],{selectFunc:_.selectTableTextSize,fontSize:o});default:return undefined}},t.prototype.getSelectFontSizeText=function(){},t.prototype.render=function(){var e=y["default"].getPrdDropdown(),t=e.type,n=e.isOpen,r=this.props,o=r.baseSet,i=o.type,l=o.tips,s=o.isDisableFunc,d=o.isHaveLine,p=r.btnType,f=this.getTextData(),h=f.textAlign,g=f.fontSize,m=s&&s();return u["default"].createElement("div",{className:c["default"](i+"-drop-panel "+d+"-line",{"have-column-line":d,"is-disable":m})},u["default"].createElement("div",a({className:"a_c"},l?P.addHoverData({text:l}):{},{onClick:this.openDropList}),"text-size"==i||"table-font-size"==i?u["default"].createElement("div",{className:c["default"](i+"-btn",{"is-list-open":n&&p==t})},g):u["default"].createElement("div",{className:c["default"]("prd-head-btn-icon "+i+"-btn text-align-"+h,{"is-list-open":n&&p==t})})),n&&p==t?this.getDropdownList(t):undefined)},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"setCurrentTextColor",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"openDropList",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"getTextData",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"selectTextAlign",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[String]),l("design:returntype",void 0)],t.prototype,"getDropdownList",null),t}(u["default"].Component);t["default"]=O},2632:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),i=o(n(241)),l=n(33),s=n(980),u=n(443),c=n(2238),d=n(981),p=n(10)["default"];function f(e){return{id:l.findSelectElement()[0].id,currentSelectData:e.currentTarget.getAttribute("data-id")}}function h(e){var t={fontSize:""+f(e).currentSelectData};c.changeVal({changeVal:t}),p.createData({type:"setTableTextFontSize",name:"PRD 表格设置字体大小",autoSaveType:"prd"}),s.hidePrdDropdownOpen()}function y(e){var t=f(e),n=t.id,o=t.currentSelectData,i=l.findSelectElement()[0].child,u={backColor:"#ffffff",hasBackColor:!0};if(a["default"].updateValById({id:n,updateVal:r({styleIndex:o},u)}),i)for(var c in i){var d=i[c].text;$.extend(!0,d,u)}p.createData({type:"setTableType",name:"PRD 表格设置基础样式",autoSaveType:"prd"}),s.hidePrdDropdownOpen()}function g(e){var t=f(e),n=t.id,r=t.currentSelectData,o=a["default"].getPrdElementById(n).isEdit,l=!0;o||(l=!1,a["default"].updateValById({id:n,updateVal:{isEdit:!0}})),setTimeout(function(){$(".element-container.element-edit .editor-pre>div")[0].focus();var e=i["default"].getRichText().editor;l||(e.moveToRangeOfDocument(),e.focus(),e.select()),e&&(d.textAlignArr.some(function(t,n){return!!u.isActiveNode({type:t})&&(e.unwrapBlock(t),!0)}),e.wrapBlock(r)),s.hidePrdDropdownOpen()},0)}function m(e){var t="";switch(f(e).currentSelectData){case"left":t="";break;case"center":t="hC";break;case"right":t="hR";break;case"justify":t="hJ"}var n={horizontal:t};c.changeVal({changeVal:n}),p.createData({type:"setTableTextAlign",name:"PRD 表格设置对齐方式",autoSaveType:"prd"}),s.hidePrdDropdownOpen()}t.getElementData=f,t.selectTableTextSize=h,t.selectTableType=y,t.selectTextAlign=g,t.selectTableTextAlign=m,t["default"]={selectTableTextSize:h,selectTableType:y,selectTextAlign:g,selectTableTextAlign:m}},2633:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=window.$,u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this,t=e.props,n=t.switchFunc,r=void 0===n?s.noop:n,o=t.switchType,a=void 0===o?"left":o,u=t.notAllowCheck,c=t.isWeb;return i["default"].createElement("div",{className:l["default"]("switch-btn-panel",{"is-web":c})},["left","right"].map(function(t){return i["default"].createElement("div",{key:t,className:l["default"](t+"-btn-box",{"is-checked":a==t,"not-allow-check":u&&a!=t})},i["default"].createElement("div",{className:"btn-text","data-type":t,onClick:u?s.noop:r},e.props[t+"BtnText"]))}))},t}(i["default"].Component);t["default"]=u},2634:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(6)),a=n(857),i=n(1003),l=n(798);function s(e){var t=(void 0===e?{}:e).noCreate;void 0!==t&&t?l.selectFirstPage():a.clickCreatePrdPage(),i.initPrdMousetrap()}function u(){o["default"].setViewMode("prd-view"),o["default"].emitPagesChange(),o["default"].emitViewChange()}t.prdInit=s,t.intoPrd=u,t["default"]={prdInit:s,intoPrd:u}},2963:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(2964)),p=l(n(830)),f=l(n(917)),h=l(n(2967)),y=l(n(2968)),g=n(235),m=n(1222),v=l(n(38)),_=l(n(2630)),b=n(1337),w=l(n(96)),C=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isUnfold:_["default"].getIsUnfold()},n}return o(t,e),t.prototype.componentDidMount=function(){_["default"].addChangeListener(this.changeOpen),w["default"].addFoldChangeListener(this.changeOpen),b.prdAllSturctFix()},t.prototype.componentWillUnmount=function(){_["default"].removeChangeListener(this.changeOpen),w["default"].removeFoldChangeListener(this.changeOpen)},t.prototype.componentDidUpdate=function(){b.prdAllSturctFix()},t.prototype.changeOpen=function(){this.setState({isUnfold:_["default"].getIsUnfold()})},t.prototype.cancelSelectStruct=function(e){"prd-left-panel"==e.target.className&&m.clearSelectArr()},t.prototype.handleUnfoldLeftPanel=function(){_["default"].setIsUnfold()},t.prototype.render=function(){var e=this.state.isUnfold;return s["default"].createElement("div",{onMouseDown:this.cancelSelectStruct,className:u["default"]("prd-left-panel",{"is-pack-up":!e,"is-unfold":!e}),id:"prdLeftPanel"},s["default"].createElement(d["default"],null),s["default"].createElement(p["default"],{placeholder:"搜索页面…",searchType:"struct"}),s["default"].createElement(f["default"],{arr:g.getPrdAllStructDataArr(),selectKey:v["default"].getSelectStructKey(),selectArr:v["default"].getAllSelectArr(),searchType:"struct",showArr:[]}),s["default"].createElement(h["default"],null),s["default"].createElement(y["default"],{isUnfold:e,clickFunc:this.handleUnfoldLeftPanel}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"changeOpen",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"cancelSelectStruct",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleUnfoldLeftPanel",null),t}(s["default"].Component);t["default"]=C},2964:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(12)),d=n(857),p=l(n(2965)),f=l(n(2966)),h=(window.$,n(10)["default"]),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isOpen:p["default"].getTemplateIsOpen()},n}return o(t,e),t.prototype.componentDidMount=function(){p["default"].addChangeListener(this.changeOpen)},t.prototype.componentWillUnmount=function(){p["default"].removeChangeListener(this.changeOpen)},t.prototype.changeOpen=function(){this.setState({isOpen:p["default"].getTemplateIsOpen()})},t.prototype.addPage=function(){d.clickCreatePrdPage(),h.createData({type:"clickCreatePrd",name:"PRD 点击创建PRD文档",autoSaveType:"prd"})},t.prototype.insertFunc=function(e){var t=e.currentTarget.getAttribute("data-type");d.createPageByTemplate(t),p["default"].setTemplateIsOpen()},t.prototype.render=function(){var e=this.state.isOpen,t=p["default"].setTemplateIsOpen;return s["default"].createElement("div",{className:"add-page-btn-panel"},s["default"].createElement("div",{className:"add-page-btn-comp"},s["default"].createElement("div",{className:"add-btn-text",onClick:this.addPage},"添加页面"),s["default"].createElement("div",{className:c["default"]({"add-btn-icon":!0,"add-btn-open":e}),onClick:t})),e?s["default"].createElement(f["default"],{insertFunc:this.insertFunc}):undefined)},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"changeOpen",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"addPage",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"insertFunc",null),t}(s["default"].Component);t["default"]=y},2965:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i={isOpen:!1,type:""},l=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.setTemplateIsOpen=function(){var e=!i.isOpen;i.isOpen=e,l.emitChange()},t.prototype.setTemplateClose=function(){i.isOpen=!1},t.prototype.getTemplateIsOpen=function(){return i.isOpen},t.prototype.getTemplateType=function(){return i.type},t.prototype.setTemplateType=function(e,t){void 0===t&&(t=!1);var n=e.currentTarget.getAttribute("data-id");i.type=n,i.isOpen=!1,t||l.emitChange()},t.prototype.emitChange=function(){this.emit("change")},t.prototype.addChangeListener=function(e){this.on("change",e)},t.prototype.removeChangeListener=function(e){this.removeListener("change",e)},t}(a.EventEmitter));t["default"]=l},2966:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=n(1005),u=window.$,c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.insertFunc,t=void 0===e?u.noop:e;return i["default"].createElement("div",{className:"prd-template-list-panel has-scrollbar"},s.prdTemplateList.filter(function(e){return"all"==e.platform||e.platform==(window.isPc?"web":"mobile")}).map(function(e,n){var r=e.title,o=e.type;e.platform;return i["default"].createElement("div",{className:"template-box",key:o+n},i["default"].createElement("div",{className:l["default"]("template-img "+o,{"is-mobile":!window.isPc,"not-empty":"empty"!=o}),"data-type":o,onClick:t},"empty"==o?"空":""),i["default"].createElement("div",{className:"template-text"},r))}))},t}(i["default"].Component);t["default"]=c},2967:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(38)),d=l(n(96)),p=l(n(1230)),f=window.$,h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={posi:c["default"].getDragOption()},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addDragChangeListener(this.onchange)},t.prototype.componentWillUnmount=function(){c["default"].removeDragChangeListener(this.onchange)},t.prototype.onchange=function(){this.setState({posi:c["default"].getMoveOption()})},t.prototype.renderDom=function(e){var t=[];return e.forEach(function(e,n){t.push(s["default"].createElement(p["default"],{data:d["default"].getPrdStructById(e),key:e,isCurrent:!1,isSelect:!1,isDeepColor:!1,isParentSelect:!1,idx:"",deep:0,searchText:"",isOnlyShow:!0}))}),t},t.prototype.render=function(){var e=this.state.posi,t=e.x,n=e.y,r=c["default"].getIsDraging(),o=c["default"].getAllSelectArr();if(!r||f.isNull(t)||f.isNull(n))return null;var a=this.renderDom(o);return s["default"].createElement("div",{style:{top:n,left:t,height:36*a.length+"px"},className:"move-list-comp"},a)},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onchange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"renderDom",null),t}(s["default"].Component);t["default"]=h},2968:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=window.$,u=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isUnfold,n=e.clickFunc,r=void 0===n?s.noop:n;return i["default"].createElement("div",{className:l["default"]("prd-unfold-btn",{"is-pack-up":!t,"is-unfold":t}),onClick:r})},t}(i["default"].Component);t["default"]=u},2969:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(2970)),p=l(n(3003)),f=l(n(3016)),h=l(n(236)),y=n(1222),g=n(304),m=n(797),v=n(235),_=l(n(38)),b=l(n(827)),w=l(n(30)),C=l(n(79)),P=window.$;function O(e){var t=window.mouseDownTarget;if(!t||!t.name){var n=b["default"].getDragChangePosiSet().autoChangeFunc,r=g.getDeepest();if(n)e<r&&_["default"].setContainerHeight(r);else if(e!=r){var o=_["default"].getSelectElementArr()||[],a=C["default"].getPrdSelectArr()||[];o.length+a.length==0&&_["default"].setContainerHeight(r)}}}var x=function(e){function t(t){var n=e.call(this,t)||this;return n.scrollBar=null,n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){w["default"].addElementContentChangeListener(this._onChange),C["default"].addChangeListener(this._onChange),O(this.props.prdSet.containerHeight),v.showStructFromFoldParent()},t.prototype.componentWillUnmount=function(){w["default"].removeElementContentChangeListener(this._onChange),C["default"].removeChangeListener(this._onChange)},t.prototype.componentDidUpdate=function(){O(this.props.prdSet.containerHeight),v.showStructFromFoldParent()},t.prototype._onChange=function(){this.setState({})},t.prototype.handleScroll=function(e){P(".menu-head-panel .head-close-btn").click(),_["default"].setScrollTop(e.currentTarget.scrollTop)},t.prototype._prdContentMouseDownFunc=function(e){m.elementDeselect(),P.stopPropagation(e)},t.prototype.render=function(){var e=this,t=this.props,n=t.prdSet.containerHeight,r=t.cursor,o=t.isUnfold,a=h["default"].width;return s["default"].createElement("div",{ref:function(t){return e.scrollBar=t},onScroll:this.handleScroll,className:u["default"]("prd-content-panel has-scrollbar",{"is-pack-up":!o}),id:"prdContentPanel",onMouseDown:this._prdContentMouseDownFunc},s["default"].createElement("div",{onMouseDown:y.clearSelectArr,className:"prd-edit-box"},s["default"].createElement(d["default"],{isUnfold:o}),s["default"].createElement("div",{className:"prd-text-content-box"},s["default"].createElement(f["default"],{isUnfold:o}),s["default"].createElement(p["default"],{width:a,cursor:r,height:n}))))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleScroll",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"_prdContentMouseDownFunc",null),t}(s["default"].Component);t["default"]=x},2970:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(2971)),p=window.$,f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isFixed:!1},n}return o(t,e),t.prototype.componentDidMount=function(){p("#prdContentPanel").on("scroll",this._windowScroll)},t.prototype.componentWillUnmount=function(){p("#prdContentPanel").off("scroll",this._windowScroll)},t.prototype._windowScroll=function(){var e=p("#prdContentPanel").scrollTop();e>0&&!this.state.isFixed?this.setState({isFixed:!0}):0===e&&this.state.isFixed&&this.setState({isFixed:!1})},t.prototype.render=function(){var e=this.state.isFixed,t=this.props.isUnfold;return s["default"].createElement("div",{id:"prdEditorHeader",className:u["default"]("prd-editor-header",{isFixed:e,"is-pack-up":!t})},s["default"].createElement(d["default"],null))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_windowScroll",null),t}(s["default"].Component);t["default"]=f},2971:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(455)),d=l(n(79)),p=l(n(1218)),f=l(n(30)),h=l(n(2972)),y=l(n(2981)),g=l(n(2985)),m=l(n(2989)),v=l(n(2991)),_=l(n(2993)),b=l(n(2995)),w=l(n(2997)),C=l(n(3e3)),P=l(n(1549)),O=n(33),x=l(n(236)),E=window.$,k=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange),p["default"].addChangeListener(this._onChange),f["default"].addElementContentChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange),p["default"].removeChangeListener(this._onChange),f["default"].removeElementContentChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.getHeadBtnType=function(){var e=O.findSelectElement();return 0!=e.length&&e[0]?e.length>1?"multiple":e[0].type:"empty"},t.prototype.getHeadBtnDom=function(){var e=this.getHeadBtnType();if(d["default"].getPrdSelectArr().length)return"empty"==e?s["default"].createElement(P["default"],{isPrd:!0}):undefined;switch(e){case"text":return s["default"].createElement(h["default"],null);case"multiple":return s["default"].createElement(y["default"],null);case"table":return s["default"].createElement(g["default"],null);case"image":return s["default"].createElement(m["default"],null);case"page":return s["default"].createElement(v["default"],null);case"contr":return s["default"].createElement(_["default"],null);case"pageflow":return s["default"].createElement(b["default"],null);case"preview":return s["default"].createElement(w["default"],null);case"webView":return s["default"].createElement(C["default"],null);default:return undefined}},t.prototype.render=function(){var e=x["default"].width;return s["default"].createElement("div",{className:"prd-editor-btn-panel",style:{width:e},onMouseDown:E.stopPropagation},s["default"].createElement("div",{className:"head-center-btn-panel"},this.getHeadBtnDom()))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"getHeadBtnType",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"getHeadBtnDom",null),t}(s["default"].Component);t["default"]=k},2972:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=n(443),p=l(n(2631)),f=l(n(2220)),h=n(981),y=n(2980),g=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.getTextSize=function(){var e="正文";return h.fontSizeArr.some(function(t,n){return!!d.isActiveNode({type:t})&&(e=h.titleNameArr[n],!0)}),e},t.prototype.render=function(){var e=this.getTextSize();return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(p["default"],{btnType:"text-size",text:e,baseSet:y.textBtnList[0]}),y.textBtnList.slice(2,10).map(function(e,t){var n=e.type;return s["default"].createElement(f["default"],{key:n+t,btnSet:e})}),s["default"].createElement(p["default"],{btnType:"text-align",baseSet:y.textBtnList[1]}),s["default"].createElement(f["default"],{btnSet:y.textBtnList[10]}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"getTextSize",null),t}(s["default"].Component));t["default"]=g},2973:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=n(1221),p=n(980),f=window.$,h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={currentSize:-1},n}return o(t,e),t.prototype.changeFontSize=function(e){this.setState({currentSize:e}),p.hidePrdDropdownOpen()},t.prototype.render=function(){var e=this.props,t=e.selectFunc,n=void 0===t?f.noop:t,r=e.text;return s["default"].createElement("div",{className:"fontSize-dropdown-list-panel"},d.fontSizeList.map(function(e,t){var o=e.text,a=e.value;return s["default"].createElement("div",{key:"title-size"+t,className:u["default"]("single-option-box",{"is-select":o==r,"is-main-body":0==t}),style:{fontSize:a},onClick:function(){return n(e)}},s["default"].createElement("div",{className:u["default"]("single-option-text",{"is-main-body":0==t})},o))}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"changeFontSize",null),t}(s["default"].Component);t["default"]=h},2974:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=n(1221),f=window.$,h=function(e){function t(t){var n=e.call(this,t)||this;return n.state={selectType:"left"},n}return o(t,e),t.prototype.clickTextAlign=function(e){var t=this.props,n=t.selectFunc,r=void 0===n?f.noop:n,o=t.clickFunc;r(e),o&&o(e)},t.prototype.getTips=function(e){var t="";switch(e){case"left":t="左对齐";break;case"center":t="居中对齐";break;case"right":t="右对齐";break;case"justify":t="两端对齐"}return t},t.prototype.render=function(){var e=this,t=this,n=t.props.textAlign;return u["default"].createElement("div",{className:"text-align-mode-list-panel"},p.textAlignModeList.map(function(r,o){var i=r.type;return u["default"].createElement("div",a({className:c["default"]("align-mode-box a_c",{"is-select":i==n}),"data-id":i,onClick:e.clickTextAlign,key:i+o},f.addHoverData({text:t.getTips(i),direction:"top",changePosi:5})),u["default"].createElement("div",{className:i+"-mode-icon prd-document-icons"}))}))},i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"clickTextAlign",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[String]),l("design:returntype",void 0)],t.prototype,"getTips",null),t}(u["default"].Component);t["default"]=h},2975:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=n(2976),u=window.$,c=function(e){function t(t){var n=e.call(this,t)||this;return n.state={selectIndex:-1,isChecked:!1},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.selectFunc,n=void 0===t?u.noop:t,r=e.fontSize;return i["default"].createElement("div",{className:"table-font-size-panel"},s.tableFontSizeList.map(function(e,t){var o=e.size;return i["default"].createElement("div",{key:"table-font"+o,className:l["default"]("font-size-option",{"is-select":o==r}),"data-id":o,onClick:n},o)}))},t}(i["default"].Component);t["default"]=c},2976:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tableFontSizeList=[{size:10},{size:11},{size:12},{size:13},{size:14},{size:16},{size:18},{size:22},{size:24},{size:28},{size:32}],t["default"]={tableFontSizeList:t.tableFontSizeList}},2977:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(241)),a=r(n(30)),i=n(980),l=n(443),s=n(33),u=n(981);function c(e){var t=e.text,n=s.findSelectElement()[0].id,r=a["default"].getPrdElementById(n).isEdit,c=!0;r||(c=!1,a["default"].updateValById({id:n,updateVal:{isEdit:!0}})),setTimeout(function(){$(".element-container.element-edit .editor-pre>div")[0].focus(),i.hidePrdDropdownOpen();var e=o["default"].getRichText().editor;c||(e.moveToRangeOfDocument(),e.select());var n=t[t.length-1],r=u.fontSizeArr[n-1];e&&(u.fontSizeArr.some(function(t,n){return!!l.isActiveNode({type:t})&&(e.unwrapBlock(t),!0)}),r&&e.wrapBlock(r))},0)}t.selectFontSize=c,t["default"]={selectFontSize:c}},2978:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(455)),f=n(1221),h=n(980),y=n(33),g=n(2238),m=s(n(2979)),v=s(n(1218)),_=window.$,b=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.openDropList=function(){var e=this.props.btnSet.type;h.changePrdDropdownOpen(e)},t.prototype.changeColor=function(e,t,n,r){"text"==r?g.changeRichTextColor(t):"table"==r&&("text-color"==e?g.changeTableTextColor(n):"table-bg-color"==e&&g.changeTableBgColor(n))},t.prototype.render=function(){var e,t,n=this,r=p["default"].getPrdDropdown(),o=r.type,i=r.isOpen,l=n.props,s=l.btnSet,d=s.type,h=s.tips,g=s.isHaveLine,b=void 0!==g&&g,w=s.isTable,C=void 0!==w&&w,P=s.isActiveFunc,O=s.clickFunc,x=void 0===O?_.noop:O,E=s.isDisableFunc,k=l.btnType,D=y.findSelectElement()[0],S=D.borderType,j=void 0===S?"normal-border":S,M=D.type;"text"==M?(t=v["default"].getTextColorIdx(),e=f.colorPickerList[t].value):"table"==M&&("text-color"==d?e=v["default"].getTableTextColor():"table-bg-color"==d&&(e=v["default"].getTableBgColor()),f.colorPickerList.some(function(n,r){return n.value==e&&(t=r,!0)}));var T=E&&E();return u["default"].createElement("div",{className:c["default"](d+"-drop-panel",{"is-have-column-line":b,"is-table":C,"is-disable":T})},u["default"].createElement("div",a({className:c["default"](d+"-drop-box a_c",{"is-list-open":i&&o==k})},h?_.addHoverData({text:h}):{}),u["default"].createElement("div",{className:c["default"](d+"-btn",{"is-active":P&&P(),"is-phone-icon":"phone-border"==j}),onClick:x}),u["default"].createElement("div",{className:d+"-drop-icon",onClick:n.openDropList}),"text-color"==d||"table-bg-color"==d?u["default"].createElement("div",{className:"current-checked-color",style:{background:"#"+e}}):undefined),d==o&&i?"page-border"!=d?u["default"].createElement("div",{className:"prd-color-picker-panel"},f.colorPickerList.map(function(e,r){var o=e.value;return u["default"].createElement("div",{key:o+r,className:c["default"]("single-color-box",{"is-select":r==t}),style:{backgroundColor:"#"+o},onClick:function(){return n.changeColor(d,r,o,M)}})})):u["default"].createElement(m["default"],null):undefined)},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"openDropList",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object,Object,Object,Object]),l("design:returntype",void 0)],t.prototype,"changeColor",null),t}(u["default"].Component);t["default"]=b},2979:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=n(33),u=n(829),c=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=s.findSelectElement()[0],t=e.borderType,n=void 0===t?"":t,r=e.hasBorder;return i["default"].createElement("div",{className:"page-border-dropdown-panel"},["normal-border","phone-border"].map(function(e,t){return i["default"].createElement("div",{key:e+t,className:l["default"]("icon-panel "+e,{}),onClick:function(){return u.setPageBorderFunc(e)}},i["default"].createElement("div",{className:l["default"](e+"-icon",{"is-select":r&&n==e})}))}))},t}(i["default"].Component));t["default"]=c},2980:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a,i,l=o(n(241)),s=o(n(1218)),u=o(n(30)),c=o(n(38)),d=n(981),p=n(443),f=n(2238),h=n(33),y=n(443),g=n(1231),m=n(914);function v(e){var t=!1;return e.some(function(e){return!!p.isActiveNode({type:e})&&(t=!0,!0)}),t}function _(e){var t=l["default"].getRichText().editor;t&&window.getSelection().toString()&&t.toggleMark(e)}function b(e){return{clickFunc:function(t){_(e)},isActiveFunc:function(){return p.isActiveMark({type:e})}}}function w(e,t,n){return void 0===n&&(n=$.noop),{clickFunc:function(r){!function(e,t){var n=l["default"].getRichText().editor;v(t)?n.setBlocks(""):n.setBlocks(e)}(e,t),setTimeout(function(){n&&n(r)},0)},isActiveFunc:function(){return v(t)}}}function C(){return!(h.findSelectElement()[0].isEdit&&window.getSelection().toString())}function P(){return!h.findSelectElement()[0].isEdit}t.textBtnList=[{type:"text-size",tips:"标题",isDisableFunc:P},{type:"text-align",tips:"对齐",isDisableFunc:P},r({type:"font-weight",tips:"加粗"},b("bold"),{isHaveLine:"left",isDisableFunc:C}),r({type:"italic",tips:"倾斜"},b("italic"),{isDisableFunc:C}),r({type:"underline",tips:"下划线"},b("underlined"),{isDisableFunc:C}),r({type:"strikethrough",tips:"中划线"},b("strikethrough"),{isDisableFunc:C}),{type:"text-color",tips:"文本颜色",clickFunc:function(){var e=s["default"].getTextColorIdx();f.changeRichTextColor(e)},isColorPicker:!0,isDisableFunc:C},r({type:"num-list",tips:"有序列表",isHaveLine:"left"},w("num-list-1",d.numListDeepArr),{isDisableFunc:P}),r({type:"unordered-list",tips:"无序列表"},w("unordered-list-1",d.unorderedListDeepArr),{isDisableFunc:P}),r({type:"task-list",tips:"任务列表"},w("task-list",["task-list","complete-task-list"]),{isDisableFunc:P}),r({type:"text-hyperlink",tips:"文本链接"},(a=["a-link","a-link-inner"],i=function(e){if(e)y.removeLink();else{var t=l["default"].getRichText().editor,n=t.value,r=window.getSelection(),o=r.focusOffset,a=r.anchorOffset,i=r.anchorNode.parentElement,s=$(i).parents('span[data-slate-leaf="true"]')[0],d=g.getPrevLength(s),p=$.offset(i,!0),f=p.left,v=p.top;c["default"].setLinkInput({left:f,top:v,isShow:!0,link:"",innerLink:"",isInner:!1});var _=m.findNode(i,t);l["default"].setNodeData({key:_.key,start:Math.min(o+d,a+d),length:Math.abs(o-a),value:n})}setTimeout(function(){var e=h.findSelectElement()[0].id;u["default"].updateValById({id:e,updateVal:{isEdit:!1},noEmit:!1});var t=$(".insert-hyperlink-panel input")[0];t&&$(t).focus()},0)},void 0===i&&(i=$.noop),{clickFunc:function(e){var t=!1,n=e.currentTarget.className;-1==n.indexOf("is-hyperlink-icon")?_(a[0]):-1!=n.indexOf("is-active")&&(t=!0),setTimeout(function(){i&&i(t)},0)},isActiveFunc:function(){return a.some(function(e){return p.isActiveMark({type:e})})}}),{isHaveLine:"left",isDisableFunc:C})],t["default"]={textBtnList:t.textBtnList}},2981:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=l(n(2220)),p=n(2982),f=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){return p.multipleSelectBtnList.map(function(e,t){var n=e.type;return s["default"].createElement(d["default"],{key:n+t,btnSet:e})})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=f},2982:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),a=n(2983);function i(){return o["default"].getSelectElementArr().length<3}t.multipleSelectBtnList=[{type:"vertical-top",tips:"顶对齐",clickFunc:function(){a.setAlignment({type:"verticalTop",handleName:"顶对齐"})}},{type:"vertical-middle",tips:"垂直居中对齐",clickFunc:function(){a.setAlignment({type:"verticalMiddle",handleName:"垂直居中对齐"})}},{type:"vertical-bottom",tips:"底对齐",clickFunc:function(){a.setAlignment({type:"verticalBottom",handleName:"底对齐"})}},{type:"horiz-left",tips:"左对齐",clickFunc:function(){a.setAlignment({type:"horizLeft",handleName:"左对齐"})}},{type:"horiz-center",tips:"水平居中对齐",clickFunc:function(){a.setAlignment({type:"horizMiddle",handleName:"水平居中对齐"})}},{type:"horiz-right",tips:"右对齐",clickFunc:function(){a.setAlignment({type:"horizRight",handleName:"右对齐"})},isHaveLine:"right"},{type:"horiz-center-align",tips:"水平等间距",isDisableFunc:i,clickFunc:function(){i()||a.setAlignment({type:"horizCenter",handleName:"水平等间距"})}},{type:"vertical-center-align",tips:"垂直等间距",isDisableFunc:i,clickFunc:function(){i()||a.setAlignment({type:"verticalCenter",handleName:"垂直等间距"})}}],t["default"]={multipleSelectBtnList:t.multipleSelectBtnList}},2983:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),i=n(33),l=n(2984),s=o(n(10)),u=n(152);function c(e){var t=e.type,n=e.handleName,o=i.findSelectElement().map(function(e){var t=e.id;return r({id:t},l.getElementPosi(e))}),c=[];switch(t){case"horizLeft":c=function(e){var t,n=!1;e.map(function(e,n){var r=e.x;t=0===n?r:Math.min(t,r)});var o=e.map(function(e){var o=e;return e.x!=Math.round(t)&&(o=r({},e,{x:Math.round(t)}),n=!0),o});return n?o:[]}(o);break;case"horizMiddle":c=function(e){var t,n,o=!1;e.map(function(e,r){var o=e.x,a=e.width;t=0===r?o:Math.min(t,o),n=0===r?o+a:Math.max(n,o+a)});var a=(n+t)/2,i=e.map(function(e){var t=e;return e.x!=Math.round(a-e.width/2)&&(t=r({},e,{x:Math.round(a-e.width/2)}),o=!0),t});return o?i:[]}(o);break;case"horizRight":c=function(e){var t,n=!1;e.map(function(e,n){var r=e.x,o=e.width;t=0===n?r+o:Math.max(t,r+o)});var o=e.map(function(e){var o=e;return e.x!=Math.round(t-e.width)&&(o=r({},e,{x:Math.round(t-e.width)}),n=!0),o});return n?o:[]}(o);break;case"verticalTop":c=function(e){var t,n=!1;e.map(function(e,n){var r=e.y;t=0===n?r:Math.min(t,r)});var o=e.map(function(e){var o=e;return e.y!=Math.round(t)&&(o=r({},e,{y:t}),n=!0),o});return n?o:[]}(o);break;case"verticalMiddle":c=function(e){var t,n,o=!1;e.map(function(e,r){var o=e.y,a=e.height;t=0===r?o:Math.min(t,o),n=0===r?o+a:Math.max(n,o+a)});var a=(n+t)/2,i=e.map(function(e){var t=e;return e.y!=Math.round(a-e.height/2)&&(t=r({},e,{y:Math.round(a-e.height/2)}),o=!0),t});return o?i:[]}(o);break;case"verticalBottom":c=function(e){var t,n=!1;e.map(function(e,n){var r=e.y,o=e.height;t=0===n?r+o:Math.max(t,r+o)});var o=e.map(function(e){var o=e;return e.y!=Math.round(t-e.height)&&(o=r({},e,{y:Math.round(t-e.height)}),n=!0),o});return n?o:[]}(o);break;case"horizCenter":c=function(e){var t=0,n=0,o=!1;e.forEach(function(e){n+=e.width}),e.sort(function(e,t){return e.x-t.x}),t=e[0].x;var a=(e[e.length-1].x+e[e.length-1].width-e[0].x-n)/(e.length-1),i=e.map(function(e){var n=e;return e.x!=Math.round(t)&&(n=r({},e,{x:Math.round(t)}),o=!0),t+=e.width+a,n});return o?i:[]}(o);break;case"verticalCenter":c=function(e){var t=0,n=0,o=!1;e.forEach(function(e){n+=e.height}),e.sort(function(e,t){return e.y-t.y}),t=e[0].y;var a=(e[e.length-1].y+e[e.length-1].height-e[0].y-n)/(e.length-1),i=e.map(function(e){var n=e;return e.y!=Math.round(t)&&(n=r({},e,{y:Math.round(t)}),o=!0),t+=e.height+a,n});return o?i:[]}(o)}c.length>0&&(c.forEach(function(e){var t=e.id,n=e.x,r=e.y,o=e.width,i=e.height,l=a["default"].getPrdElementById(t);u.fixElementPosVal({changeVal:{x:n,y:r,width:o,height:i},element:l})}),a["default"].emitChange(),s["default"].createData({type:t+"Set",name:"修改选中组件"+n,autoSaveType:"prd"}))}t.setAlignment=c,t["default"]={setAlignment:c}},2984:function(e,t,n){"use strict";function r(e){return{x:e.x,y:e.y,width:e.width,height:e.height}}Object.defineProperty(t,"__esModule",{value:!0}),t.getElementPosi=r,t["default"]={getElementPosi:r}},2985:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(2986)),d=l(n(2631)),p=l(n(2220)),f=l(n(241)),h=n(33),y=n(2988),g=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){f["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){f["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){var e=h.findSelectElement()[0].fontSize,t=void 0===e?14:e;return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(c["default"],null),s["default"].createElement(d["default"],{btnType:"table-font-size",text:t,baseSet:y.tableBtnList[0]}),y.tableBtnList.slice(1,7).map(function(e,t){var n=e.type;return s["default"].createElement(p["default"],{key:n+t,btnSet:e})}),s["default"].createElement(d["default"],{btnType:"text-align",baseSet:y.tableBtnList[7]}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=g},2986:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(4)),d=s(n(12)),p=s(n(2987)),f=s(n(455)),h=s(n(11)),y=n(980),g=n(2632),m=n(33),v=n(571),_=n(336),b=window.$,w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={selectBox:!1,columnVal:null,lineVal:null},n}return o(t,e),t.prototype.setCurrentTextColor=function(){},t.prototype.openDropList=function(){y.changePrdDropdownOpen("table-mode")},t.prototype._columnChange=function(e){this.setState({columnVal:e.target.value})},t.prototype._lineChange=function(e){this.setState({lineVal:e.target.value})},t.prototype._columnBlur=function(e){var t=this,n=m.findSelectElement()[0].columnPosi,r=parseInt(e.target.value),o=b.isNumber(r);if(r<1&&h["default"].show("列数不能小于1列"),o&&r!==n.length&&r>=1){r>45&&h["default"].show("列数不能超过45列");var a=Math.min(r,45);v.changeColumnByNum(a)}setTimeout(function(){t.setState({columnVal:null})},0)},t.prototype._lineBlur=function(e){var t=this,n=m.findSelectElement()[0].linePosi,r=parseInt(e.target.value),o=b.isNumber(r);if(r<1&&h["default"].show("行数不能小于1行"),o&&r!==n.length&&r>=1){r>100&&h["default"].show("行数不能超过100行");var a=Math.min(r,100);_.changeLineByNum(a)}setTimeout(function(){t.setState({lineVal:null})},0)},t.prototype.render=function(){var e=this.state,t=e.selectBox,n=e.columnVal,r=e.lineVal,o=f["default"].getPrdDropdown(),i=o.type,l=o.isOpen,s=m.findSelectElement()[0],c=s.columnPosi,h=s.linePosi,y=b.isNull(n)?c.length:n,v=b.isNull(r)?h.length:r;return u["default"].createElement("div",{className:d["default"]("table-mode-setting-panel",{"is-disable":t})},u["default"].createElement("div",a({className:d["default"]("dropdown-btn-box a_c",{"is-dropdown-list-open":l&&"table-mode"==i}),onClick:t?b.noop:this.openDropList},b.addHoverData({text:"表格样式"})),u["default"].createElement("div",{className:"table-icon"})),u["default"].createElement("div",{className:d["default"]("table-input-box row-line-box",{})},u["default"].createElement("input",{className:"table-pos-input",autoComplete:"off",autoCorrect:"off",spellCheck:!1,disabled:t,value:v,onChange:this._lineChange,onBlur:this._lineBlur})),u["default"].createElement("div",{className:d["default"]("table-input-box column-line-box",{})},u["default"].createElement("input",{className:"table-pos-input",autoComplete:"off",autoCorrect:"off",spellCheck:!1,disabled:t,value:y,onChange:this._columnChange,onBlur:this._columnBlur})),"table-mode"==i&&l?u["default"].createElement(p["default"],{selectTableType:g.selectTableType}):undefined)},i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"setCurrentTextColor",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"openDropList",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"_columnChange",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"_lineChange",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"_columnBlur",null),i([c["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"_lineBlur",null),t}(u["default"].Component);t["default"]=w},2987:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=n(33),p=window.$,f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.getTableModeDoms=function(){for(var e=[],t=this.props.selectTableType,n=void 0===t?p.noop:t,r=d.findSelectElement()[0].styleIndex,o=0;o<6;o++)e.push(s["default"].createElement("div",{className:u["default"]("table-type-btn-box",{"is-select":o==r}),"data-id":o,onClick:n,key:"table-mode"+o},s["default"].createElement("div",{className:u["default"]("btn-icon btn-icon-"+o)})));return e},t.prototype.render=function(){return s["default"].createElement("div",{className:"table-type-dropdown-panel"},this.getTableModeDoms())},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"getTableModeDoms",null),t}(s["default"].Component);t["default"]=f},2988:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(39)),a=r(n(1218)),i=n(74),l=n(33),s=n(2238),u=n(2238),c=n(10)["default"];function d(e){var t,n=e.e,r=e.changeType,o=$.hasClass(n.currentTarget,"is-active");s.changeVal({changeVal:(t={},t[""+r]=!o,t)})}function p(e){return function(){var t=o["default"].getTableData(),n=t.selectContr,r=t.selectCell;if(!n||!r)return l.findSelectElement()[0][e];var a=i.getOneCellData(r[0]);return!!(a&&a.text&&a.text[e])}}t.tableBtnList=[{type:"table-font-size",tips:"字号",clickFunc:function(e){}},{type:"font-weight",tips:"加粗",clickFunc:function(e){d({e:e,changeType:"isB"}),c.createData({type:"setTableTextisB",name:"PRD 设置单元格是否加粗",autoSaveType:"prd"})},isActiveFunc:p("isB")},{type:"italic",tips:"倾斜",clickFunc:function(e){d({e:e,changeType:"isI"}),c.createData({type:"setTableTextisI",name:"PRD 设置单元格是否倾斜",autoSaveType:"prd"})},isActiveFunc:p("isI")},{type:"underline",tips:"下划线",clickFunc:function(e){d({e:e,changeType:"isU"}),c.createData({type:"setTableTextisU",name:"PRD 设置单元格是否下划线",autoSaveType:"prd"})},isActiveFunc:p("isU")},{type:"strikethrough",tips:"中划线",clickFunc:function(e){d({e:e,changeType:"isS"}),c.createData({type:"setTableTextisS",name:"PRD 设置单元格是否中划线",autoSaveType:"prd"})},isActiveFunc:p("isS")},{type:"text-color",tips:"文本颜色",clickFunc:function(){var e=a["default"].getTableTextColor();u.changeTableTextColor(e)},isTable:!0},{type:"table-bg-color",tips:"背景颜色",clickFunc:function(){var e=a["default"].getTableBgColor();u.changeTableBgColor(e)},isHaveLine:!0},{type:"text-align",tips:"对齐",clickFunc:function(){},isHaveLine:!0}],t["default"]={tableBtnList:t.tableBtnList}},2989:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=l(n(2220)),p=n(2990),f=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){return p.imageBtnList.map(function(e,t){var n=e.type;return s["default"].createElement(d["default"],{key:n+t,btnSet:e})})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=f},2990:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(152),o=n(33),a=n(152),i=n(459);t.imageBtnList=[{type:"replace-img",tips:"替换原图[双击]",clickFunc:r.changeImageFunc},{type:"clip-img",tips:"裁剪图片",isDisableFunc:function(){return!o.findSelectElement()[0].src},clickFunc:i.clipImageFunc,isHaveLine:"left"},{type:"recover-clip",tips:"还原裁剪",clickFunc:a.recoverImageClip,isDisableFunc:function(){var e=o.findSelectElement()[0],t=e.src,n=e.cutVals;if(!t||!n)return!0;var r=e.cutVals,a=r.boxWidth,i=r.boxHeight,l=e.width,s=e.height;return!a||!i||a==l&&i==s},isHaveLine:"right"},{type:"recover-default-size",tips:"原始大小",clickFunc:a.changeImageOriginalSize,isDisableFunc:function(){var e=o.findSelectElement()[0],t=e.src,n=e.width,r=e.oriWidth,a=void 0===r?0:r;return!t||Math.round(n)==Math.round(a)}}],t["default"]=t.imageBtnList},2991:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=l(n(2220)),p=n(2992),f=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){return p.pageBtnList.map(function(e,t){var n=e.type;return s["default"].createElement(d["default"],{key:n+t,btnSet:e})})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=f},2992:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(6)),a=r(n(10)),i=n(984),l=n(33),s=n(152),u=n(924),c=n(980),d=n(829),p=n(829),f=n(862),h=r(n(236))["default"].width-100,y=window.isPc;t.pageBtnList=[{type:"replace-page",tips:"替换页面[双击]",clickFunc:i.triggerDblclick},{type:"hide-snapshots-title",tips:"标题",isDisableFunc:function(){return!l.findSelectElement()[0].pageKey},clickFunc:function(){var e=l.findSelectElement()[0],t=e.isShowName;e.id;e.y<40&&!t?s.fixElementPosVal({changeVal:{y:40,isShowName:!t},element:e}):s.fixElementPosVal({changeVal:{isShowName:!t},element:e}),a["default"].createData({type:"showOrHidePageTitle",name:"PRD 显示/隐藏页面标题",autoSaveType:"prd"})},isActiveFunc:function(){return l.findSelectElement()[0].isShowName}},{type:window.isPc?"contr-border":"page-border",tips:"边框",clickFunc:function(){var e=l.findSelectElement()[0].borderType;d.setPageBorderFunc(e),c.hidePrdDropdownOpen(),a["default"].createData({type:"showOrHidePageBorder",name:"PRD 添加页面组件的边框",autoSaveType:"prd"})},isActiveFunc:function(){return l.findSelectElement()[0].hasBorder}},{type:"recover-default-size",tips:"原始大小",isDisableFunc:function(){var e=l.findSelectElement()[0],t=e.width,n=e.height,r=e.pageKey,o=e.hasBorder,a=void 0!==o&&o,i=e.borderType,s=void 0===i?"":i,u=e.phoneShellType,c=window.phoneSize,d=c.width,g=c.height,m=!1;if(r)if(y)m=Math.round(h)==Math.round(t)&&Math.round(9*h/16)==Math.round(n);else if(a&&"phone-border"==s){var v=f.phoneShellConfig[u],_=v.topEdge,b=v.width,w=v.horizEdge,C={topEdge:_,bottomEdge:v.bottomEdge,horizEdge:w,phoneWidth:b},P=p.getPhoneContentSize({width:t,height:n,shellElement:C}),O=P.shellW,x=P.shellTop,E=P.shellBottom;m=Math.round(d)==Math.floor(t-2*O)&&Math.round(g)==Math.floor(n-x-E)}else m=Math.round(d)==Math.round(t)&&Math.round(g)==Math.round(n);else m=!0;return m},clickFunc:p.recoverPageOriginSize},{type:"short-page",tips:"展示首屏",isDisableFunc:function(){var e=l.findSelectElement()[0],t=e.width,n=e.height,r=e.pageKey,a=e.phoneShellType,i=e.hasBorder,s=e.borderType,u=o["default"].getPages()[r],c=window.phoneSize,d=c.width,h=c.height,g=!0;if(u)if(y)Math.abs(16/9-t/n)>.01&&(g=!1);else if(i&&"phone-border"==s){var m=f.phoneShellConfig[a],v=m.topEdge,_=m.width,b=m.height,w=m.horizEdge,C={topEdge:v,bottomEdge:m.bottomEdge,horizEdge:w,phoneWidth:_},P=p.getPhoneContentSize({width:t,height:n,shellElement:C});_/b-P.width/P.height>.01&&(g=!1)}else Math.abs(d/h-t/n)>.01&&(g=!1);return g},clickFunc:function(){var e=l.findSelectElement()[0],t=e.width,n=e.height,r=void 0===n?0:n,o=(e.pageKey,e.phoneShellType),i=e.hasBorder,u=void 0!==i&&i,c=e.borderType,d=void 0===c?"normal-border":c,h=window.phoneSize,g=h.width,m=h.height;if(y)s.fixElementPosVal({changeVal:{height:Math.round(9*t/16),cutTop:0},element:e});else{var v=r;if(u&&"phone-border"==d){var _=f.phoneShellConfig[o],b=_.topEdge,w=_.width,C=(_.height,_.horizEdge),P={topEdge:b,bottomEdge:_.bottomEdge,horizEdge:C,phoneWidth:w},O=p.getPhoneContentSize({width:t,height:r,shellElement:P}),x=O.shellW,E=O.shellTop,k=O.shellBottom;v=Math.round((t-2*x)*m/g)+E+k}else v=Math.round(t*m/g);s.fixElementPosVal({changeVal:{height:v,cutTop:0},element:e})}a["default"].createData({type:"showFirstPage",name:"PRD 展示页面的首屏内容",autoSaveType:"prd"})},isHaveLine:"left"},{type:"long-page",tips:"展示全部",isHaveLine:"right",isDisableFunc:function(){var e=l.findSelectElement()[0],t=e.width,n=e.height,r=e.pageKey,a=o["default"].getPages(),i=a[r],s=window.phoneSize,u=s.width,c=s.height,d=!0;if(i){var p=(a[r]||{}).pageHeight,f=p||c;if(y){Math.abs(u/f-t/n)>.01&&(d=!1)}else Math.abs(u/f-t/n)>.01&&(d=!1)}return d},clickFunc:function(){var e=l.findSelectElement()[0],t=e.width,n=e.height,r=e.pageKey,i=o["default"].getPages(),u=window.phoneSize,c=u.width,d=u.height,p=i[r],f=(p||{}).pageHeight,h=f||d,g=t/c;p&&(y?s.fixElementPosVal({changeVal:{height:Math.round(h*g),cutTop:0},element:e}):y||Math.round(h*g)!=Math.round(n)&&s.fixElementPosVal({changeVal:{height:Math.round(h*g),cutTop:0},element:e})),a["default"].createData({type:"showAllPage",name:"PRD 展示页面的全部内容",autoSaveType:"prd"})}},{type:"page-remarks",tips:"备注",clickFunc:u.clickPageRemarks,isDisableFunc:function(){return!l.findSelectElement()[0].pageKey},isActiveFunc:function(){return l.findSelectElement()[0].remarkId}}],t["default"]={pageBtnList:t.pageBtnList}},2993:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=l(n(2220)),p=n(2994),f=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){return p.contrBtnList.map(function(e,t){var n=e.type;return s["default"].createElement(d["default"],{key:n+t,btnSet:e})})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=f},2994:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(30)),a=r(n(10)),i=n(984),l=n(33),s=n(152),u=n(460);t.contrBtnList=[{type:"replace-contr",tips:"替换组件[双击]",clickFunc:i.triggerDblclick},{type:"hide-snapshots-title",tips:"标题",isDisableFunc:function(){return!l.findSelectElement()[0].symbolKey},clickFunc:function(){var e=l.findSelectElement()[0],t=e.isShowName;e.y<40&&!t?s.fixElementPosVal({changeVal:{y:40,isShowName:!t},element:e}):s.fixElementPosVal({changeVal:{isShowName:!t},element:e}),a["default"].createData({type:"showOrHideTitle",name:"PRD 显示/隐藏组件标题",autoSaveType:"prd"})},isActiveFunc:function(){return l.findSelectElement()[0].isShowName}},{type:"contr-border",tips:"边框",clickFunc:function(){var e=l.findSelectElement()[0],t=e.id,n=e.hasBorder;o["default"].updateValById({id:t,updateVal:{hasBorder:!n}}),a["default"].createData({type:"showOrHideBorder",name:"PRD 显示/隐藏组件边框",autoSaveType:"prd"})},isActiveFunc:function(){var e=l.findSelectElement()[0],t=e.hasBorder;e.symbolKey;return t}},{type:"recover-default-size",tips:"原始大小",clickFunc:function(){var e=l.findSelectElement()[0],t=e.oriWidth,n=e.oriHeight;u.OriginSizeOverToast({oriWidth:t,fixElementPosOverSize:function(){s.fixElementPosVal({changeVal:{width:900,height:900*n/t},element:e})},fixElementPosinSize:function(){s.fixElementPosVal({changeVal:{width:t,height:n},element:e})},type:"组件快照"})&&a["default"].createData({type:"recoverDefaultSize",name:"PRD 恢复原始的尺寸",autoSaveType:"prd"})},isDisableFunc:function(){var e=l.findSelectElement()[0],t=e.oriWidth,n=e.width;return!t||t==n}}],t["default"]={contrBtnList:t.contrBtnList}},2995:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=l(n(2220)),p=n(2996),f=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){return s["default"].createElement(d["default"],{btnSet:p.pageFlowBtnList[0]})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=f},2996:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(984);t.pageFlowBtnList=[{type:"replace-preview",tips:"替换流程[双击]",clickFunc:r.triggerDblclick}],t["default"]={pageFlowBtnList:t.pageFlowBtnList}},2997:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=n(33),p=l(n(2633)),f=n(2998),h=n(2999),y=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){var e=d.findSelectElement()[0].previewMode,t=void 0===e?"all":e;return s["default"].createElement(p["default"],{leftBtnText:f.previewBtnList[0].text,rightBtnText:f.previewBtnList[1].text,switchFunc:h.previewSwitchFunc,switchType:"all"==t?"left":"right"})},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=y},2998:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.previewBtnList=[{type:"fully-mode",text:"完整模式"},{type:"brief-mode",text:"简洁模式"}],t["default"]={previewBtnList:t.previewBtnList}},2999:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(30)),a=r(n(10)),i=n(33);function l(e){var t=e.currentTarget.getAttribute("data-type"),n=i.findSelectElement()[0].id;o["default"].updateValById({id:n,updateVal:{previewMode:"left"==t?"all":"simple"}}),a["default"].createData({type:"switchPrdCompType",name:"PRD 切换组件的类型",autoSaveType:"prd"})}t.previewSwitchFunc=l,t["default"]={previewSwitchFunc:l}},3000:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(241)),d=n(33),p=n(3001),f=l(n(2633)),h=l(n(2220)),y=n(3002),g=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({})},t.prototype.render=function(){var e=d.findSelectElement()[0],t=e.webMode,n=void 0===t?"web":t,r=e.isLink;return s["default"].createElement(s["default"].Fragment,null,s["default"].createElement(h["default"],{btnSet:y.webBtnList[0]}),s["default"].createElement(f["default"],{leftBtnText:y.webBtnList[1].text,rightBtnText:y.webBtnList[2].text,switchFunc:p.webViewSwitchFunc,switchType:"web"==n?"left":"right",notAllowCheck:r,isWeb:!0}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component));t["default"]=g},3001:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(10)),a=n(33),i=n(152),l=n(153);function s(e){var t=e.currentTarget.getAttribute("data-type"),n=a.findSelectElement()[0],r=n.type,s=l.elementBaseVal[r],u=s.width,c=s.height,d=s.cardH,p=s.cardW,f="left"==t?u:p,h="left"==t?c:d;i.fixElementPosVal({changeVal:{webMode:"left"==t?"web":"card",width:f,height:h},element:n}),o["default"].createData({type:"switchWebMode",name:"PRD 切换网页组件模式（普通/卡片）",autoSaveType:"prd"})}t.webViewSwitchFunc=s,t["default"]={webViewSwitchFunc:s}},3002:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(984);t.webBtnList=[{type:"insert-web-url",tips:"编辑链接[双击]",clickFunc:r.triggerDblclick,isHaveLine:"right"},{type:"web-mode",text:"网页模式"},{type:"card-mode",text:"卡片模式"}],t["default"]={webBtnList:t.webBtnList}},3003:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(38)),d=l(n(96)),p=l(n(198)),f=l(n(3004)),h=l(n(3006)),y=l(n(3007)),g=l(n(3008)),m=l(n(1550)),v=l(n(3009)),_=l(n(3010)),b=l(n(3011)),w=l(n(3012)),C=l(n(3014)),P=n(3015),O=n(797),x=n(925),E=n(33),k=n(235),D=window.$;var S=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){this._fixData()},t.prototype.componentDidUpdate=function(){this._fixData()},t.prototype._fixData=function(){var e=E.findAllElement(),t=E.getSelectPageElementHierarchy(),n=t.slice();for(var r in n=D.arrayUnique(n),t.forEach(function(t){e[t]||n.remove(t)}),e)-1==n.indexOf(r)&&n.unshift(r);D.checkArrayEqual(n,t)||d["default"].updateValById({id:c["default"].getSelectStructKey(),updateVal:{elementHierarchy:n}})},t.prototype.handleContextMenu=function(e){O.elementDeselect(),p["default"].rightMenuUpdate({left:e.clientX,top:e.clientY,content:x.emptyContextMenuConfig}),D.preventDefault(e)},t.prototype.render=function(){var e=this.props,t=e.cursor,n=e.width,r=e.height,o=function(e){var t="";switch(e){case"line":t="cursor-line"}return t}(t),a=k.getSelectStruct(),i=c["default"].getLinkInput(),l=i.left,u=i.top,d=i.link,p=i.isShow,O=i.innerLink,x=i.isInner,D=E.findSelectElement()[0]?E.findSelectElement()[0].id:"";return s["default"].createElement("div",{className:"prd-editor-container",style:{width:n,height:r}},s["default"].createElement(b["default"],{struct:a}),s["default"].createElement("div",{id:"editorContentPanel",className:"editor-content-panel "+o,onMouseMove:P.prdElementMouseMove,onMouseDown:P.prdElementMouseDown,onContextMenu:this.handleContextMenu},s["default"].createElement(f["default"],null),s["default"].createElement(h["default"],null),s["default"].createElement(y["default"],null),s["default"].createElement(g["default"],null),s["default"].createElement(w["default"],null),s["default"].createElement(v["default"],null),p?s["default"].createElement(C["default"],{type:"text",id:D,left:l,top:u,link:d,isInner:x,innerLink:O}):undefined,s["default"].createElement(_["default"],null),s["default"].createElement(m["default"],{isPrd:!0})))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_fixData",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleContextMenu",null),t}(s["default"].Component);t["default"]=S},3004:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(1291)),d=l(n(3005)),p=n(33),f=l(n(236)),h=window.$,y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype._getElementListComp=function(){return p.getAllElementBySelectPageHierarchy().map(function(e){return e?s["default"].createElement(c["default"],{key:e.id,element:e}):null})},t.prototype.render=function(){var e=f["default"].width;return s["default"].createElement("div",{className:"editor-content-view",style:{width:e-100}},"true"==h.getUrlParam("ischangetable")?s["default"].createElement(d["default"],null):undefined,this._getElementListComp())},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_getElementListComp",null),t}(s["default"].Component);t["default"]=y},3005:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=n(876),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state={val:[]},n}return o(t,e),t.prototype.handleChange=function(){var e=$(".markdown-textarea")[0].value.split("\n"),t=[],n={};e.forEach(function(e){var r=e.trim();if(r)if("*"==r[0])$.isEmptyObj(n)?n={contrlist:[]}:(t.push(n),n={contrlist:[]});else if("| **"==r.slice(0,4)){var o=r.split("|").filter(function(e){return!!e.trim()}).map(function(e){return e.trim().replace(/[*]/g,"")});n.keylist=o}else if("| "==r.slice(0,2)){var a=r.split("|");a.splice(0,1),n.contrlist.push(a)}}),t.push(n);t.forEach(function(e){var t=e.keylist,n=e.contrlist,r={},o={child:r},a=[],i=[48];t.forEach(function(e,t){r[t+"_0"]={text:{content:e}},a.push(900/7)});var l=900/7*t.length;$.extend(!0,o,{columnPosi:a,width:l}),n.forEach(function(e,t){i.push(48),e.forEach(function(e,n){r[n+"_"+(t+1)]={text:{content:e}}})});var s=48*(n.length+1);$.extend(!0,o,{linePosi:i,height:s}),c.createElementByInsert("table","table",o)})},t.prototype.render=function(){return s["default"].createElement("div",{style:{position:"absolute",top:0,left:0,width:200,height:200}},s["default"].createElement("div",{style:{position:"absolute",right:-40},onClick:this.handleChange},"转换"),s["default"].createElement("textarea",{className:"markdown-textarea",style:{width:"100%",height:"100%",border:"1px solid #000"}}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleChange",null),t}(s["default"].Component);t["default"]=d},3006:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(603)),c=l(n(4)),d=function(e){function t(t){var n=e.call(this,t)||this;return n.state=n.getState(),n}return o(t,e),t.prototype.getState=function(){return{renderChange:this.state?this.state.renderChange+1:0,prdDragSelectSet:u["default"].getPrdDragSelectSet()}},t.prototype.shouldComponentUpdate=function(e,t){return t.renderChange!==this.state.renderChange},t.prototype.componentDidMount=function(){u["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){u["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState(this.getState())},t.prototype.render=function(){var e=this.state.prdDragSelectSet.pos,t=e.x,n=e.y,r=e.w,o=e.h;return 0==r&&0==o?null:s["default"].createElement("div",{className:"prd-drag-select",style:{left:r<0?t+r:t,top:o<0?n+o:n,width:Math.abs(r),height:o?Math.abs(o):"auto"}})},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"getState",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"_onChange",null),t}(s["default"].Component);t.PrdDragSelectComp=d,t["default"]=d},3007:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(444)),s=a(n(79)),u=a(n(38)),c=a(n(1232)),d=n(33),p=n(1233),f=n(863),h=a(n(100)),y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=d.findSelectElement(),t=s["default"].getPrdSelectArr();if(0==e.length||l["default"].isShow())return null;var n=h["default"].getAllLinePointPosi(),r=f.getSeveralElementPos(e,!1,n),o=e[0],a=o.type,y=o.webMode,g=u["default"].getCursor();return i["default"].createElement(c["default"],{dragType:"text"==a||"webView"==a&&"card"==y?"lr":"all",stylePos:r,noDragSpot:e.length+t.length>1||"line"==g,dragFunc:p.prdDragSpotFunc,type:a})},t}(i["default"].Component);t.PrdElementDragContainerComp=y,t["default"]=y},3008:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(30)),c=l(n(79)),d=n(153),p=l(n(4));var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.renderAdsorbPoint=function(e,t){var n,r,o,a=e.x,i=void 0===a?0:a,l=e.y,u=void 0===l?0:l,c=e.width,p=void 0===c?0:c,f=e.height,h=void 0===f?0:f;return i+=d.elementCanvasBaseVal.OFFSET_X,n=t,r=[],o=["top","down","left","right"],[[i+p/2,u],[i+p/2,u+h],[i,u+h/2],[i+p,u+h/2]].forEach(function(e,t){var a=e[0],i=e[1];r.push(s["default"].createElement("div",{className:"adsorb-point",key:a+"|"+i+"adsorb",style:{top:i,left:a}}),s["default"].createElement("div",{"data-posi":o[t],className:"adsorb-extend-point","data-id":n,key:a+"|"+i+"adsorb-extend",style:{top:i,left:a}}))}),r},t.prototype.render=function(){var e=this,t=c["default"].getHoverIdArr();return t.length?s["default"].createElement(s["default"].Fragment,null,t.map(function(t){var n=u["default"].getPrdElementById(t);return e.renderAdsorbPoint(n,t)})):null},a([p["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"renderAdsorbPoint",null),t}(s["default"].Component);t["default"]=f},3009:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=n(26),d=s(n(4)),p=s(n(913)),f=window.$,h=0,y=function(e){function t(t){var n=e.call(this,t)||this;return n.state={renderChange:0,adhereLineData:p["default"].getPrdAdhereLineData()},n}return o(t,e),t.prototype.shouldComponentUpdate=function(e,t){return this.state.renderChange!==t.renderChange},t.prototype.componentDidMount=function(){p["default"].addChangeListener(this._onChange)},t.prototype.componentWillUnmount=function(){p["default"].removeChangeListener(this._onChange)},t.prototype._onChange=function(){this.setState({renderChange:this.state.renderChange+1,adhereLineData:p["default"].getPrdAdhereLineData()})},t.prototype._getAdhereLines=function(){var e=this.state.adhereLineData,t=[],n=f.offset(f.getElById("editorContentPanel")),r=n.left,o=n.top;for(var a in r+=50,e.x)e.x[a].forEach(function(e){var n=e.dragPosi,a=e.otherPosi,i=e.otherKey,l=Math.min(n.yTop,a.yTop),s=Math.max(n.yBottom,a.yBottom);t.push(u["default"].createElement(c.Line,{key:h++,points:[a[i]+r,l+o,a[i]+r,s+o],strokeWidth:1,stroke:"#f56464"}))});for(var a in e.y)e.y[a].forEach(function(e){var n=e.dragPosi,a=e.otherPosi,i=e.otherKey,l=Math.min(n.xLeft,a.xLeft),s=Math.max(n.xRight,a.xRight);t.push(u["default"].createElement(c.Line,{key:h++,points:[l+r,a[i]+o,s+r,a[i]+o],strokeWidth:1,stroke:"#f56464"}))});return t},t.prototype.render=function(){var e=f.getWinSize(),t=e.width,n=e.height;return u["default"].createElement(c.Stage,a({key:"canvasAllPage",className:"prd-adhere-line-panel"},{width:t,height:n}),u["default"].createElement(c.Layer,{id:"canvasLayer"},this._getAdhereLines()))},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"_onChange",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"_getAdhereLines",null),t}(u["default"].Component);t["default"]=y},3010:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=n(26),d=s(n(12)),p=s(n(4)),f=s(n(142)),h=s(n(79)),y=s(n(38)),g=s(n(1335)),m=n(1336),v=n(153),_=window.$,b=v.elementCanvasBaseVal.OFFSET_X,w=v.elementCanvasBaseVal.TOP_DISTANCE,C=function(e){function t(t){var n=e.call(this,t)||this;return n.time=null,n.state={canvasCursor:f["default"].getCursor(),scrollTop:y["default"].getScrollTop()},n}return o(t,e),t.prototype.componentDidMount=function(){f["default"].addChangeListener(this._onCursorChange),y["default"].addScrollChangeListener(this._onCursorChange),h["default"].addMoveChangeListener(this._onCursorChange)},t.prototype.componentWillUnmount=function(){f["default"].removeChangeListener(this._onCursorChange),y["default"].removeScrollChangeListener(this._onCursorChange),h["default"].removeMoveChangeListener(this._onCursorChange),clearTimeout(this.time)},t.prototype._onCursorChange=function(){this.setState({canvasCursor:f["default"].getCursor(),scrollTop:y["default"].getScrollTop()})},t.prototype.renderAgain=function(){var e=this;this.time=setTimeout(function(){e.setState({})},200)},t.prototype.render=function(){var e,t=this.props.isPreview,n=this.state.canvasCursor,r=_.getWinSize(),o=r.width,i=r.height,l=_(".prd-editor-container")[0],s=_(".prd-content-text")[0],p=l||s,f=p&&_.offset(p,!0)||{};if(!p)return this.renderAgain(),null;var y=t?b:0,v=t?0:w;return u["default"].createElement(c.Stage,a({ref:function(e){h["default"].setPrdStage(e)},className:d["default"]("prd-canvas-stage",(e={},e["cursor-"+n]=!0,e)),onMouseDown:m.prdCanvasMouseDown,onMouseMove:m.prdCanvasMouseMove},{width:o,height:i}),u["default"].createElement(c.Layer,{x:f.left-y||0,y:f.top+v||0},u["default"].createElement(g["default"],{zoom:1})))},i([p["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"_onCursorChange",null),i([p["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"renderAgain",null),t}(u["default"].Component);t["default"]=C},3011:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=n(235),d=n(985),p=l(n(11)),f=window.$,h=n(10)["default"],y=!1,g=function(e){function t(t){var n=e.call(this,t)||this;return n.state={title:"",isEdit:!1},n}return o(t,e),t.prototype.onTitleChange=function(){var e=c.getSelectStruct();if(e){var t=e.title;this.setState({title:t})}},t.prototype.handleChangeTitle=function(e){var t=this.state.title,n=this.props.struct,r=n.id,o=n.title;""==t.trim()?(p["default"].show("页面名称不能为空!"),f(e.target).focus()):t!=o&&(d.changeValById({key:"title",val:t,id:r}),h.createData({type:"changePrdNameFromContainer",name:"PRD 在内容处修改文档名称",autoSaveType:"prd"})),this.setState({isEdit:!1})},t.prototype._handleComposition=function(e){"compositionend"===e.type?(y=!1,this.changeTitle(e)):y=!0},t.prototype.changeTitle=function(e){y||(console.log(e.target.value),e.currentTarget.value.gblen()>200&&(e.currentTarget.value=e.currentTarget.value.slice(0,200),p["default"].show("文档名称内容不能超过200个字符"))),this.setState({title:e.target.value})},t.prototype.handleFocus=function(e){this.setState({isEdit:!0,title:e.target.value})},t.prototype.render=function(){var e=this.state,t=e.title,n=e.isEdit;if(!this.props.struct)return null;var r=n?t:c.getSelectStruct().title||"";return s["default"].createElement("div",{className:"editor-title-panel"},s["default"].createElement("input",{className:"title-input-area",placeholder:"无标题",value:r,"data-value":r,autoComplete:"off",autoCorrect:"off",spellCheck:!1,onChange:this.changeTitle,onBlur:this.handleChangeTitle,onFocus:this.handleFocus,onCompositionStart:this._handleComposition,onCompositionUpdate:this._handleComposition,onCompositionEnd:this._handleComposition}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onTitleChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleChangeTitle",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"_handleComposition",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"changeTitle",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleFocus",null),t}(s["default"].Component);t["default"]=g},3012:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(79)),d=l(n(30)),p=l(n(10)),f=l(n(38)),h=l(n(100)),y=n(1006),g=n(1007),m=n(3013),v=n(33),_=n(1222),b=n(153),w=l(n(4)),C=n(801),P=n(602),O=0,x=b.elementCanvasBaseVal.OFFSET_X,E=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.componentDidMount=function(){c["default"].addChangeListener(this.onChange)},t.prototype.componentWillUnmount=function(){c["default"].removeChangeListener(this.onChange)},t.prototype.onChange=function(){this.setState({})},t.prototype.renderEnds=function(e,t,n,r,o){var a=c["default"].getPrdSelectArr(),i=e,l=t;if(r){var p=d["default"].getPrdElementById(r),f=p.x,h=p.y,g=p.width,m=p.height;i=[e[0]*g+f+x,e[1]*m+h]}if(o){var v=d["default"].getPrdElementById(o);f=v.x,h=v.y,g=v.width,m=v.height;l=[t[0]*g+f+x,t[1]*m+h]}return s["default"].createElement("div",{key:"prd-end"+n},[i,l].map(function(e,t){return s["default"].createElement("div",{key:"prd-end"+n+(0==t?"start":"end"),className:u["default"]("prd-line-circle",{"prd-circle-select":-1!=a.indexOf(n)}),style:{left:e[0],top:e[1]},"data-id":n,"data-posi":0==t?"start":"end","data-eventkey":"line","data-isprd":!0,onMouseDown:y.handleBallReDrag})}))},t.prototype.renderCircle=function(e,t){var n=[];return e.forEach(function(r,o){if(e[o+1]){var a=e[o+1][0]!=r[0],i=(e[o+1][0]+r[0])/2,l=(e[o+1][1]+r[1])/2;n.push(s["default"].createElement("div",{key:"prd-circle-"+i+"-"+l,className:u["default"]("prd-line-circle",{"row-resize-cursor-line":a,"col-resize-cursor-line":!a}),style:{left:i,top:l},"data-id":t,"data-eventkey":"line lineDrag","data-idx":o,"data-isprd":!0,onMouseDown:g.handleLineDrag}))}}),n},t.prototype.stopPropagation=function(e){e.preventDefault(),e.stopPropagation(),_.clearSelectArr()},t.prototype.handleDblLine=function(e){var t=e.currentTarget.getAttribute("data-id"),n=e.currentTarget.getAttribute("data-isprd");h["default"].commentBoxFocus(t,n)||p["default"].createData({type:"showOrHideCommentDblPrd",name:"PRD 双击显示/修改文本",autoSaveType:"prd"})},t.prototype.renderLineDom=function(e,t){var n=this,r=[];return e.forEach(function(o,a){if(e[a+1]){O++;var i=e[a+1][0]!=o[0],l=e[a+1][0]-o[0],c=e[a+1][1]-o[1],d=Math.abs(l)||15,p=Math.abs(c)||15;r.push(s["default"].createElement("div",{key:"prd-line-"+t+"-"+O,className:u["default"]("prd-line-dom"),style:{left:o[0]-(l<0?-l:0),top:o[1]-(c<0?-c:0),width:d,height:p,transform:"translate("+(i?0:-d/2)+"px, "+(i?-p/2:0)+"px)"},"data-id":t,"data-eventkey":"line lineDrag","data-idx":a,"data-isprd":!0,onMouseDown:m.handleLineMove,onContextMenu:C.handleLineContextMenu,onDoubleClick:n.handleDblLine}))}}),r},t.prototype.renderLine=function(e){var t=this,n=[],r=c["default"].getPrdSelectArr();return e.forEach(function(e){var o=e.isConnect,a=e.startPoint,i=e.endPoint,l=e.id,c=e.commentWidth,d=e.commentHeight,p=e.commentPercent,f=e.hasComment,y=e.startKey,g=e.endKey,m=P.fixLineData(y,g,l);if(!o&&m){var v=h["default"].getPrdLinePointArr(e);n.push(s["default"].createElement("div",{key:"event-line"+l,className:u["default"]({"no-select-line":-1==r.indexOf(l)})},t.renderLineDom(v,l),f?t.renderComment(c,d,v,p,l):undefined,t.renderCircle(v,l),t.renderEnds(a,i,l,y,g)))}}),n},t.prototype.commentDragEvent=function(e,t){var n=e.clientX,r=e.clientY,o=!1,a=e.currentTarget,i=a.getAttribute("data-id"),l=parseInt($(a).css("top")),s=parseInt($(a).css("left"));c["default"].setPrdSelectArr([i]),$.setDrag({name:"moveComment",posi:[n,r],target:e.target,moveFunc:function(e){o||(o=!0);var a=e.clientX,u=e.clientY,d=h["default"].getLineArr({pointArr:t}),p=d.lineArr,f=d.lineLengthArr,y=d.allLength,g=h["default"].getShortIdx({_clientX:a,clientX:n,zoom:1,_clientY:u,clientY:r,_x:s,_y:l,lineArr:p}),m=g.shortIdx,v=g.off;if(-1!=m){var _=h["default"].calcCommentPercent({lineLengthArr:f,shortIdx:m,off:v,allLength:y});c["default"].changePrdLine({id:i,commentPercent:_})}},endFunc:function(e){o&&p["default"].createData({type:"changeCommentPosi",name:"PRD 改变文本当前所在的位置",autoSaveType:"prd"})}})},t.prototype.renderComment=function(e,t,n,r,o){var a=this,i=h["default"].getLineLengthArr(n),l=i.lineLengthArr,u=i.allLineLength,c=h["default"].getCommentPosi({lineLengthArr:l,allLineLength:u,commentPercent:r,pointArr:n}),d=c.lineCommentLeft,p=c.lineCommentTop;return s["default"].createElement("div",{key:"prd-comment"+o,className:"prd-line-comment",style:{width:e,height:24*Math.round(t/24),top:p,left:d},"data-id":o,onMouseDown:function(e){a.commentDragEvent(e,n)},"data-eventkey":"line","data-isprd":!0,onDoubleClick:a.handleDblLine})},t.prototype.render=function(){var e=v.getAllLineByStructKey();return f["default"].getSelectElementArr().length?null:s["default"].createElement("div",{onMouseDown:this.stopPropagation,onContextMenu:this.stopPropagation,className:"prd-line-panel-comp"},this.renderLine(e))},a([w["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onChange",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object]),i("design:returntype",void 0)],t.prototype,"renderEnds",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"renderCircle",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"stopPropagation",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleDblLine",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"renderLineDom",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"renderLine",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"commentDragEvent",null),a([w["default"],i("design:type",Function),i("design:paramtypes",[Object,Object,Object,Object,Object]),i("design:returntype",void 0)],t.prototype,"renderComment",null),t}(s["default"].Component);t["default"]=E},3013:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(79)),a=r(n(30)),i=r(n(38)),l=r(n(96)),s=r(n(311)),u=r(n(827)),c=n(828),d=r(n(100)),p=n(342),f=r(n(1218)),h=50,y=950,g=n(10)["default"];function m(e){var t=e.dragSet,n=e.clientX,r=e.clientY,i=e.elementArr,l=e.fixedArr,s=e.startPosi,u=e.endPosi,p=e.id;return function(e){var f=e.clientX,g=e.clientY;c.changeDragChangePosi({clientX:f,clientY:g},function(e){var c=e.autoChangePosi,m=(e.ratio,c.autoChangePosiY),v=void 0===m?0:m,_=[s[0]+f-n,s[1]+g-r+v],b=[u[0]+f-n,u[1]+g-r+v],w=$.extend(!0,[],l);if(w.length&&w.forEach(function(e,t){w[t]=[e[0]+f-n,e[1]+g-r+v]}),!function(e,t,n){var r=$.extend(!0,[],n);r.push(e,t);var o=!1;return r.some(function(e){return(e[0]<h||e[0]>y||e[1]<0)&&(o=!0,!0)}),o}(_,b,w)){var C="",P="",O=[];i.some(function(e){var n=a["default"].getPrdElementById(e),r=n.x,o=n.y,i=n.width,l=n.height,s=n.id,u=r+h,c=[[u,o+l/2],[u+i/2,o],[u+i,o+l/2],[u+i/2,o+l]];if(_[0]>u&&_[0]<u+i&&_[1]>o&&_[1]<o+l&&!C){C=s,t.startPointKey=s,O.push(C);var p=d["default"].isNearAdsorbPoint(c,{x:_[0],y:_[1]}),f=p.isAdsorb,y=p.endX,g=p.endY,m=p.endPosi;if(f){t.startPointPosi=m;var v=y-_[0],x=g-_[1];_=[y,g],b=[b[0]+v,b[1]+x],w.length&&w.forEach(function(e,t){w[t]=[e[0]+v,e[1]+x]})}else t.startPointPosi=""}if(b[0]>u&&b[0]<u+i&&b[1]>o&&b[1]<o+l&&!P){P=s,t.endPointKey=s,O.push(P);var E=d["default"].isNearAdsorbPoint(c,{x:b[0],y:b[1]}),k=(f=E.isAdsorb,y=E.endX,g=E.endY,E.endPosi);if(f){t.endPointPosi=k;var D=y-b[0],S=g-b[1];b=[y,g],_=[_[0]+D,_[1]+S],w.length&&w.forEach(function(e,t){w[t]=[e[0]+D,e[1]+S]})}else t.endPointPosi=""}return!(!C||!P)}),C||(t.startPointKey="",t.startPointPosi=""),P||(t.endPointKey="",t.endPointPosi=""),t.newStartPosi=_,t.newEndPosi=b,t.newFixedArr=w;var x=o["default"].getHoverIdArr();$.checkArrayEqual(x,O)||o["default"].setHoverIdArr(O,!0),o["default"].changePrdLine({id:p,startPoint:_,endPoint:b,fixedArr:w})}})}}function v(e){var t=e.currentTarget.getAttribute("data-id"),n=i["default"].getSelectStructKey(),r=l["default"].getPrdStructById(n).elementHierarchy,d=!1,y=e.clientX,v=e.clientY,_=e.shiftKey,b=o["default"].getPrdOneLine(t),w=b.startPoint,C=b.endPoint,P=b.startKey,O=b.endKey,x=b.fixedArr,E=b.startPosi,k=b.endPosi,D=w,S=C;if(P){var j=a["default"].getPrdElementById(P),M=j.x,T=j.y,A=j.width,F=j.height;D=[w[0]*A+M+h,w[1]*F+T]}if(O){var I=a["default"].getPrdElementById(O);M=I.x,T=I.y,A=I.width,F=I.height;S=[C[0]*A+M+h,C[1]*F+T]}var R={newStartPosi:D,newEndPosi:S,endPointPosi:k,startPointPosi:E,startPointKey:P,endPointKey:O,newFixedArr:x};o["default"].setIsDragPoint(!0,!0);var N=o["default"].getPrdSelectArr();-1==N.indexOf(t)&&(_?(N.push(t),o["default"].setPrdSelectArr(N,!0)):o["default"].setPrdSelectArr([t],!0));var L=m({dragSet:R,clientX:y,clientY:v,elementArr:r,fixedArr:x,startPosi:D,endPosi:S,id:t});s["default"].setAutoMoveFunc(L),o["default"].emitMoveChange(),c.initDragChangePosi({autoChangeFunc:function(e){return p.getDragScrollRatio(e,!1)},arriveCriticalFunc:function(){var e=u["default"].getDragChangePosiSet().ratio,t=$(".prd-content-panel")[0].scrollTop,n=t<=0&&-1==e;return n||($(".prd-content-panel")[0].scrollTop=Math.max(t+20*e,0)),n}}),$.setDrag({name:"dragLine",posi:[y,v],target:e.currentTarget,moveFunc:function(e){d||(d=!0,(P||O)&&o["default"].changePrdLine({id:t,startPoint:D,endPoint:S,noEmit:!0,startKey:"",endKey:"",startPosi:"",endPosi:""})),L(e)},endFunc:function(e){if(o["default"].setIsDragPoint(!1,!0),f["default"].emitChange(),d){c.endDragChangePosi();var n=R.startPointKey,r=R.newStartPosi,i=R.endPointKey,l=R.newEndPosi,s=R.newFixedArr,u=R.startPointPosi,p=R.endPointPosi;if(o["default"].setHoverIdArr([],!0),n){var y=a["default"].getPrdElementById(n),m=y.x,v=y.y,_=y.width,b=y.height;r=[(r[0]-m-h)/_,(r[1]-v)/b]}if(i){var w=a["default"].getPrdElementById(i);m=w.x,v=w.y,_=w.width,b=w.height;l=[(l[0]-m-h)/_,(l[1]-v)/b]}o["default"].changePrdLine({id:t,startPoint:r,endPoint:l,fixedArr:s,startKey:n,endKey:i,startPosi:u,endPosi:p}),g.createData({type:"movePrdLine",name:"PRD 整体拖拽连线",autoSaveType:"prd"})}}}),e.stopPropagation()}t.handleLineMove=v,t["default"]={handleLineMove:v}},3014:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},l=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var u=s(n(1)),c=s(n(12)),d=s(n(4)),p=s(n(38)),f=s(n(241)),h=s(n(96)),y=n(33),g=n(443),m=n(1235),v=s(n(1234)),_=window.$,b=function(e){function t(t){var n=e.call(this,t)||this;n.dom=null,n.input=null;var r=n.props,o=r.isInner,a=(r.innerLink,r.link);return n.state={hyperlink:a,isInnerLink:o,marginTop:0},n}return o(t,e),t.prototype.componentDidMount=function(){},t.prototype.fixedTop=function(){if(this.props.innerLink&&this.dom){var e=_.offset(this.dom,!0),t=e.top,n=e.height,r=_.offset(document.body,!0).height;t=Math.round(t),n=Math.round(n),r=Math.round(r),t<107?this.setState({marginTop:112-t}):r-t-40-405<0&&this.setState({marginTop:r-t-40-405})}},t.prototype.handleInputChange=function(e){var t=e.currentTarget.value;this.setState({hyperlink:t})},t.prototype.handleClearUrl=function(e){var t=this,n=this.props.type,r=this.state.isInnerLink;this.setState({hyperlink:""}),"text"==n?setTimeout(function(){r?(p["default"].setLinkInput({isShow:!1}),g.removeLink(!0)):_(t.input).blur(),_.tipHide()},0):m.clearPrdWebUrl()},t.prototype.handleChangeLinkType=function(e){var t=this,n=this.state.isInnerLink,r=0;if(this.dom&&!n){var o=_.offset(this.dom,!0).top,a=_.offset(document.body,!0).height;o=Math.round(o),r=(a=Math.round(a))-o-40-405}this.setState({isInnerLink:!n,marginTop:n?0:r}),setTimeout(function(){_(t.input).blur()},0)},t.prototype.handleInputBlur=function(e){var t=this.props.id,n=f["default"].getEditorById(t),r=this.state.hyperlink,o=this.props.type;_(".page-menu-list-panel")[0]||("text"==o?setTimeout(function(){y.findSelectElement()[0]||window.Mousetrap.unpause();var e=f["default"].getNodeData(),t=e.key,o=e.start,a=e.length;g.removeLink(!0),r&&n.addMarkByKey(t,o,a,{type:"a-link",data:{val:r}})},0):m.setPrdWebUrl({webUrl:r}),p["default"].setLinkInput({isShow:!1}))},t.prototype.render=function(){var e,t=this.props,n=t.left,r=t.top,o=t.innerLink,i=this,l=i.props,s=l.type,d=void 0===s?"text":s,p=l.notWeb,f=void 0===p||p,y=l.textIndent,g=i.state,m=g.hyperlink,b=g.isInnerLink,w=g.marginTop,C=_.offset(_("#editorContentPanel")[0],!0),P=C.left,O=C.top;return e=b?h["default"].getPrdStructById(o)?h["default"].getPrdStructById(o).title:"":m,u["default"].createElement("div",{style:{left:n-P,top:r-O+w},className:"insert-hyperlink-panel",onMouseDown:function(e){e.preventDefault(),e.stopPropagation()},ref:function(e){return i.dom=e}},u["default"].createElement("div",{className:"input-area-box"},f?u["default"].createElement("div",a({className:"link-type-icon-box a_c"},_.addHoverData({text:(b?"内":"外")+"部链接",direction:"right",changeOtherPosi:3}),{onMouseDown:i.handleChangeLinkType}),u["default"].createElement("div",{className:c["default"]("outer-link-icon prd-document-icons",{"is-inner-link":b})}),u["default"].createElement("div",{className:c["default"]("scroll-arrow-icon prd-document-imgs",{"is-outer-link":!b})})):undefined,u["default"].createElement("input",a({className:c["default"]("hyperlink-input",{"is-have-val":e}),placeholder:b?"请添加链接页面目录":"输入链接，回车确认",autoComplete:"off",autoCorrect:"off",spellCheck:!1,onChange:i.handleInputChange,onBlur:i.handleInputBlur,value:e,ref:function(e){return i.input=e},style:{textIndent:y},onMouseDown:function(){_(i.input).focus()}},b?{disabled:!0}:{})),""!=e&&"webView"!=d?u["default"].createElement("div",a({className:"cancel-hyperlink-btn a_c"},_.addHoverData({text:"取消链接"}),{onMouseDown:i.handleClearUrl}),u["default"].createElement("div",{className:"prd-document-icons cancel-icon"})):undefined),u["default"].createElement("div",{className:"little-triangle"}),u["default"].createElement("div",{className:"little-triangle-border"}),b?u["default"].createElement(v["default"],null):undefined)},i([d["default"],l("design:type",Function),l("design:paramtypes",[]),l("design:returntype",void 0)],t.prototype,"fixedTop",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleInputChange",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleClearUrl",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleChangeLinkType",null),i([d["default"],l("design:type",Function),l("design:paramtypes",[Object]),l("design:returntype",void 0)],t.prototype,"handleInputBlur",null),t}(u["default"].Component);t["default"]=b},3015:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),a=r(n(79)),i=n(309),l=n(812),s=n(1004);function u(e){"line"==o["default"].getCursor()?l.prdLineCreate(e):(o["default"].getLinkInput().isShow&&o["default"].setLinkInput({isShow:!1}),i.prdEditorSelectDrag(e))}t.prdElementMouseDown=u,t.prdElementMouseMove=function(e){var t=s.getLineCreatePosSet().startKey,n=o["default"].getCursor(),r=a["default"].getIsDragPoint(),i=a["default"].getHoverIdArr();if("line"==n||r){var l=e.target.getAttribute("data-id");if(e.target.getAttribute("data-eventkey")&&-1!=e.target.getAttribute("data-eventkey").indexOf("line"))return;l?-1==i.indexOf(l)&&t!=l&&a["default"].setHoverIdArr([l]):i.length&&a["default"].setHoverIdArr([])}else i.length&&a["default"].setHoverIdArr("")},t["default"]={prdElementMouseDown:u}},3016:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(1)),s=i(n(12)),u=n(1221),c=n(876),d=window.$,p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props.isUnfold;return l["default"].createElement("div",{className:s["default"]("prd-insert-list-panel",{"is-pack-up":!e})},u.insertBtnList.map(function(e,t){var n=e.type,r=e.tips;return""!=n?l["default"].createElement("div",a({className:s["default"]("option-box "+n+"-box a_c",{}),key:n+t,onMouseDown:function(){setTimeout(function(){c.createElementByInsert(n,n)},0)}},d.addHoverData({text:r,direction:"left",changeOtherPosi:5})),l["default"].createElement("div",{className:n+"-icon prd-document-icons insert-icons"})):undefined}))},t}(l["default"].Component);t["default"]=p},3017:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(31)),p=l(n(38)),f=l(n(10)),h=l(n(11)),y=n(3018),g=n(2634),m=n(857),v=n(210),_=window.$;function b(e,t){p["default"].create({createVal:{createType:e},noEmit:!0}),t?(v.setPrdData(t),g.prdInit({noCreate:!0})):g.prdInit(),p["default"].emitChange(),f["default"].createData({type:"createPrd",name:"PRD 创建PRD文档",autoSaveType:"prd"})}var w=function(e){function t(t){var n=e.call(this,t)||this;return n.state={hoverIndex:-1,template:"empty"},n}return o(t,e),t.prototype.createFunc=function(){var e,t=this.state.template;if(y.templateList.some(function(n){var r=n.type,o=n.val;return r==t&&(e=o,!0)}),e){var n={full:"prdFull",simple:"prdSimple",outsource:"prdOutsource",report:"prdReport"}[e];n?d["default"].get("https://img.xiaopiu.com/jsonData/"+n+"Temp.json").send({}).set("X-API-Key","foobar").set("Accept","application/json").end(function(t,n){console.log(n.body,"res"),!n||n&&!n.body?h["default"].show("数据加载失败"):b(e,n.body)}):b(e)}},t.prototype.handleMouseHover=function(e){this.setState({hoverIndex:e})},t.prototype.handleMouseLeave=function(){this.setState({hoverIndex:-1})},t.prototype.handleSelectTemplate=function(e){this.setState({template:e})},t.prototype.createFlow=function(){var e=y.templateList[0].val;p["default"].create({createVal:{createType:e}}),m.autoCreateFlow(),f["default"].createData({type:"autocreatePrd",name:"PRD 自动创建PRD文档",autoSaveType:"prd"})},t.prototype.render=function(){var e=this,t=e.state,n=(t.hoverIndex,t.template);return s["default"].createElement("div",{className:"prd-home-page-panel"},s["default"].createElement("div",{className:"prd-template-create-box"},s["default"].createElement("div",{className:"head-tips"},"选择以下模板创建文档"),s["default"].createElement("div",{className:"prd-template-panel"},y.templateList.map(function(t,r){var o=t.title,a=t.desc,i=t.type,l=t.egId,c=t.webEgId;return s["default"].createElement("div",{key:i+r,className:u["default"]("template-box",{"is-recommend":"agile-development"==i,"is-empty":"empty"==i,"is-select":i==n}),onMouseMove:function(){return e.handleMouseHover(r)},onMouseLeave:e.handleMouseLeave,onClick:function(){return e.handleSelectTemplate(i)}},0==r?s["default"].createElement("div",{className:"empty-document-title"},o):s["default"].createElement(s["default"].Fragment,null,s["default"].createElement("div",{className:"template-imgs "+i+"-template"}),s["default"].createElement("div",{className:"template-type"},o),s["default"].createElement("div",{className:"template-desc-text"},a),1==r?s["default"].createElement("div",{className:"recommend-tag"}):undefined,s["default"].createElement("a",{className:"example-link",href:"https://www.xiaopiu.com/prd/"+(window.isPc&&c||l),target:"_blank"},"查看示例")))})),s["default"].createElement("div",{className:"create-btn-panel",onClick:e.createFunc},s["default"].createElement("div",{className:"btn-text"},"立即创建")),"true"==_.getUrlParam("iscreateflow")?s["default"].createElement("div",{className:"create-btn-panel",onClick:e.createFlow},s["default"].createElement("div",{className:"btn-text"},"生成")):undefined),s["default"].createElement("div",{className:"editor-beta-tag new-base-img"}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"createFunc",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseHover",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleMouseLeave",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleSelectTemplate",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"createFlow",null),t}(s["default"].Component);t["default"]=w},3018:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.templateList=[{title:"空白文档",type:"empty",val:"blank"},{title:"敏捷开发PRD",desc:"快速交付产品文档",type:"agile-development",val:"simple",egId:"5ce2621a96541012dae2ae07",webEgId:"5ce3a2cdd8c9673c03f42f6e"},{title:"完整版本PRD",desc:"全面描述产品功能需求",type:"fully-version",val:"full",egId:"5ce2628196541012dae2ae5c",webEgId:"5ce2976296541012dae2ca7c"},{title:"甲方对接文档",desc:"给甲方最贴心的交付",type:"first-part-accept",val:"outsource",egId:"5ce2624096541012dae2ae25"},{title:"演示汇报文档",desc:"帮助受众快速了解产品",type:"show-report",val:"report",egId:"5ce2626296541012dae2ae44"}],t["default"]={templateList:t.templateList}},810:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(9),i="",l="",s="",u="",c="",d=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getSearchLinkText=function(){return l},t.prototype.setSearchLinkText=function(e,t){void 0===t&&(t=!1),l=e,t||d.emitChange()},t.prototype.setSearchContainerText=function(e,t){void 0===t&&(t=!1),s=e,t||d.emitChange()},t.prototype.getSearchContainerText=function(){return s},t.prototype.setSearchContrText=function(e,t){void 0===t&&(t=!1),c=e,t||d.emitChange()},t.prototype.getSearchContrText=function(){return c},t.prototype.setSearchFlowText=function(e,t){void 0===t&&(t=!1),u=e,t||d.emitChange()},t.prototype.getSearchFlowText=function(){return u},t.prototype.setSearchText=function(e,t){void 0===t&&(t=!1),i=e,t||d.emitChange()},t.prototype.getSearchText=function(){return i},t.prototype.emitChange=function(){this.emit("change")},t.prototype.addChangeListener=function(e){this.on("change",e)},t.prototype.removeChangeListener=function(e){this.removeListener("change",e)},t}(a.EventEmitter));t["default"]=d},827:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),l={autoChangeFunc:null,arriveCriticalFunc:null,interval:20,speed:20,autoScroll:null,ratio:0,autoChangePosi:{autoChangePosiX:0,autoChangePosiY:0}},s=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getDragChangePosiSet=function(){return l},t.prototype.setDragChangePosiSet=function(e){l=a({},l,e)},t}(i.EventEmitter));t["default"]=s},828:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=window,a=o.$,i=(o.isMac,r(n(827)));function l(e){var t=e.autoChangeFunc,n=e.arriveCriticalFunc,r=e.interval,o=void 0===r?20:r,l=e.speed,s=void 0===l?20:l;i["default"].setDragChangePosiSet({autoChangeFunc:t||a.noop,arriveCriticalFunc:n||a.noop,interval:o,speed:s,autoScroll:null,ratio:0,autoChangePosi:{autoChangePosiX:0,autoChangePosiY:0}})}function s(e,t){var n=i["default"].getDragChangePosiSet(),r=n.autoChangeFunc,o=n.interval,a=n.speed,l=n.arriveCriticalFunc,s=n.autoChangePosi;n.autoScroll&&clearInterval(n.autoScroll),n.ratio=r(e),0!=n.ratio?n.autoScroll=setInterval(function(){l()?clearInterval(n.autoScroll):(s.autoChangePosiY+=a*n.ratio,t&&t({autoChangePosi:s,ratio:n.ratio}))},o):n.autoScroll&&clearInterval(n.autoScroll),t&&t({autoChangePosi:s})}function u(){var e=i["default"].getDragChangePosiSet();e.autoScroll&&clearInterval(e.autoScroll),i["default"].setDragChangePosiSet({autoChangeFunc:null,arriveCriticalFunc:null,interval:20,speed:20,autoScroll:null,ratio:0,autoChangePosi:{autoChangePosiX:0,autoChangePosiY:0}})}t.initDragChangePosi=l,t.changeDragChangePosi=s,t.endDragChangePosi=u,t["default"]={initDragChangePosi:l,changeDragChangePosi:s,endDragChangePosi:u}},830:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(810)),p=n(859),f=window.$,h=function(e){function t(t){var n=e.call(this,t)||this;return n.inputDom=null,n.state={},n}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props.searchType;this.inputDom&&"struct"!=e&&"link"!=e&&this.inputDom.focus(),d["default"].addChangeListener(this.onChange)},t.prototype.componentWillUnmount=function(){d["default"].removeChangeListener(this.onChange)},t.prototype.onChange=function(){this.setState({})},t.prototype.changeSearchText=function(e){var t=this.props.searchType,n=e.target.value;switch(t){case"struct":d["default"].setSearchText(n);break;case"flow":d["default"].setSearchFlowText(n);break;case"containerStruct":d["default"].setSearchContainerText(n);break;case"contr":d["default"].setSearchContrText(n);break;case"link":d["default"].setSearchLinkText(n)}},t.prototype.handleClearFunc=function(){switch(this.props.searchType){case"struct":d["default"].setSearchText("");break;case"flow":d["default"].setSearchFlowText("");break;case"containerStruct":d["default"].setSearchContainerText("");break;case"contr":d["default"].setSearchContrText("");break;case"link":d["default"].setSearchLinkText("")}},t.prototype.handleMouseDown=function(e){f(e.currentTarget).focus()},t.prototype.render=function(){var e=this,t=this.props,n=t.placeholder,r=t.searchType,o=p.getNowSearchText(r);return s["default"].createElement("div",{className:u["default"]("search-page-input-comp",{"has-value-search-input":o.length>0})},s["default"].createElement("input",{className:"search-input",placeholder:n,onChange:this.changeSearchText,value:o,spellCheck:!1,ref:function(t){return e.inputDom=t},onMouseDown:this.handleMouseDown}),s["default"].createElement("div",{className:"clear-btn",onClick:this.handleClearFunc}))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onChange",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"changeSearchText",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleClearFunc",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(s["default"].Component);t["default"]=h},831:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(30)),i=o(n(913)),l=o(n(10)),s=o(n(827)),u=o(n(79)),c=n(797),d=n(33),p=n(863),f=n(995),h=n(342),y=o(n(100)),g=n(828),m=n(304),v=o(n(236)),_=100;function b(e){var t=e.pos,n=e.id,r=e.noEmit,o=void 0!==r&&r;a["default"].getPrdElementById(n)&&a["default"].updateValById({id:n,updateVal:t,noEmit:o})}t.dragElementCoverMove=function(e){var t=e.clientX,n=e.clientY;c.clickChangeElementSelect(e);var o,w=d.findSelectElement().map(function(e){return{id:e.id,x:e.x,y:e.y,width:e.width,height:e.height}}),C=(o=[],u["default"].getPrdSelectArr().forEach(function(e){var t=u["default"].getPrdOneLine(e),n=t.startPoint,r=t.endPoint,a=t.startKey,i=t.endKey,l=t.id,s=t.fixedArr;o.push({startPoint:n,endPoint:r,startKey:a,endKey:i,id:l,fixedArr:s})}),o),P=y["default"].getAllLinePointPosi(),O=p.getSeveralElementPos(w,!0,P),x=O.left,E=O.top,k=O.width,D=O.height,S=1==w.length&&d.findSelectElement()[0];g.initDragChangePosi({autoChangeFunc:function(e){return h.getDragScrollRatio(e,!1)},arriveCriticalFunc:function(){var e=s["default"].getDragChangePosiSet().ratio,t=$(".prd-content-panel")[0].scrollTop,n=t<=0&&-1==e;return n||($(".prd-content-panel")[0].scrollTop=Math.max(t+20*e,0)),n}}),w.length>0&&$.setDrag({name:"prdElementDragMove",posi:[t,n],target:e.target,moveFunc:function(e){var o=e.clientX,i=e.clientY;g.changeDragChangePosi({clientX:o,clientY:i},function(e){var l=e.autoChangePosi,s=(e.ratio,o-t),c=i-n,d=l.autoChangePosiX,p=void 0===d?0:d,h=l.autoChangePosiY,y=function(e){var t=e.pos,n=e.element,o=(e.onlyOneElement,v["default"].width);o-=_;var a=t.x,i=t.y,l=n.width,s=n.height,u=(n.type,o-l),c={x:$.setRegion(a,0,u),y:Math.max(i,0)},d=r({},c,{width:l,height:s}),p=f.dragMoveAdhereFunc({dragPosi:d}),h=p.adhereX,y=p.adhereY;return{x:c.x-h,y:c.y-y}}({pos:{x:x+s+p,y:E+c+(void 0===h?0:h)},element:{width:k,height:D},onlyOneElement:S}),g=y.x,m=y.y,P=g-x,O=m-E;w.forEach(function(e){var t=e.id,n=e.x,r=e.y;b({pos:{x:n+P,y:r+O},id:t,noEmit:!0})}),C.length>0&&(C.forEach(function(e){var t=e.startPoint,n=e.endPoint,o=e.startKey,a=e.endKey,i=e.id,l=e.fixedArr,s={};if(o||(s.startPoint=[t[0]+P,t[1]+O]),a||(s.endPoint=[n[0]+P,n[1]+O]),l.length){var c=$.extend(!0,[],l);c.forEach(function(e,t){c[t]=[e[0]+P,e[1]+O]}),s.fixedArr=c}Object.keys(s).length>0&&u["default"].changePrdLine(r({},s,{id:i,notEmit:!0}))}),u["default"].emitChange()),a["default"].emitElementContentChange()})},endFunc:function(e){g.endDragChangePosi(),m.calcContainerHeight(),i["default"].setPrdAdhereLineData({x:{},y:{}}),e.clientY==n&&e.clientX==t||l["default"].createData({type:"dragElementMove",name:"PRD 拖拽组件移动位置",autoSaveType:"prd"})}}),$.stopPropagation(e)},t.changePosById=b,t["default"]={changePosById:b}},858:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.structBaseVal={ONEDEEPWIDTH:19,PREVIEW_ONEDEEPWIDTH:18,BASEMARGINLEFT:20,PREVIEW_BASEMARGINLEFT:32,TOPDISTANCE:147,DOMHEIGHT:40,DOMWIDTH:250,DOMPADDING:10,BASEDEEPLEFT:40},t["default"]={structBaseVal:t.structBaseVal}},859:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=window,a=(o.$,o.isMac,r(n(810)));function i(e){switch(e){case"page":return"页面";case"pageflow":return"流程";case"contr":return"组件";default:return""}}function l(e){switch(e){case"page":return"页面";case"pageflow":return"页面流程";case"contr":return"引用组件";case"link":default:return""}}t.getFooterText=i,t.getTitleText=l,t.getNowSearchText=function(e){var t="";switch(e){case"struct":t=a["default"].getSearchText();break;case"flow":t=a["default"].getSearchFlowText();break;case"containerStruct":t=a["default"].getSearchContainerText();break;case"contr":t=a["default"].getSearchContrText();break;case"link":t=a["default"].getSearchLinkText()}return t},t["default"]={getFooterText:i,getTitleText:l}},860:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(12)),d=l(n(1314));function p(){var e=$(".iframe-panel")[0].contentWindow.$;e(".scale-btn").click(),setTimeout(function(){e(".scale-btn").click()},500)}var f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isFullScreen:!1},n}return o(t,e),t.prototype.setFullScreen=function(){var e=$.query(".right-content-panel"),t=$.query(".content-box>.head-panel");e.style.zIndex=101,t.style.zIndex=1,$.tipHide(),this.setState({isFullScreen:!0}),p()},t.prototype.closeFullScreen=function(){var e=$.query(".right-content-panel"),t=$.query(".content-box>.head-panel");e.style.zIndex=99,t.style.zIndex=100,this.setState({isFullScreen:!1}),p()},t.prototype.render=function(){var e=this.props,t=e.width,n=e.height,r=e.url,o=e.isWeb,a=void 0!==o&&o,i=this.state.isFullScreen;return s["default"].createElement("div",{className:c["default"]("prd-web-iframe-panel",{"is-full-screen":i}),style:i?{}:{width:t,height:n},onScroll:$.preventDefault,onWheel:$.preventDefault},s["default"].createElement("iframe",{src:r,frameBorder:"0",allowFullScreen:!0,sandbox:"allow-scripts allow-forms allow-pointer-lock allow-same-origin",className:"iframe-panel",onScroll:$.preventDefault,onWheel:$.preventDefault}),i?s["default"].createElement("div",{className:"cover-bg-box"},s["default"].createElement("div",{className:"close-full-screen-icon",onClick:this.closeFullScreen})):s["default"].createElement(d["default"],{isWeb:a,setFullScreenFunc:this.setFullScreen,url:r}))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"setFullScreen",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"closeFullScreen",null),t}(s["default"].Component);t["default"]=f},861:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(30)),a=r(n(5)),i=r(n(10)),l=r(n(6)),s=n(33),u=n(152),c=n(811),d=n(235),p=r(n(236)),f=100;function h(){c.prdEditInit(),$.tipHide()}function y(){var e,t=s.findSelectElement()[0].id,n=o["default"].getPrdElementById(t).isLink;o["default"].updateValById({id:t,updateVal:(e={},e[n?"isLink":"isEdit"]=!1,e)})}function g(e){var t=e.currentTarget.getAttribute("data-key"),n=s.findSelectElement()[0],r=a["default"].getOneSymbolByLib(t),o=r.width,l=r.height,c=n.width;n.height;u.fixElementPosVal({changeVal:{symbolKey:t,isEdit:!1,oriWidth:o,oriHeight:l,width:c,height:Math.round(c*l/o),hasBorder:!0},element:n}),i["default"].createData({type:"selectContr",name:"PRD 选中某一项引用组件",autoSaveType:"prd"})}function m(e){var t=e.currentTarget.getAttribute("data-id"),n=d.getSelectStruct().id,r=(s.findSelectElement()[0].pageKey,l["default"].getProid()),o=window.isPc;if(-1!=t.indexOf("page")){var a=t.split("_")[1];if(a){var c=window.phoneSize,h=c.height,y=c.width,g=(l["default"].getPages(),s.findSelectElement()[0]),m=g.type,v=g.width,_=g.height,b=p["default"]-f,w=o?y||b:Math.round(v),C=o?9*w/16:Math.round(v*h/y);if("webView"!=m){var P=g.hasBorder,O=void 0!==P&&P,x=g.borderType;O&&"phone-border"==(void 0===x?"":x)?u.fixElementPosVal({changeVal:{pageKey:a,isEdit:!1,width:v,height:_},element:g}):u.fixElementPosVal({changeVal:{pageKey:a,isEdit:!1,width:w,height:C,hasBorder:!0},element:g}),i["default"].createData({type:"addPage",name:"PRD 添加页面",autoSaveType:"prd"})}else u.fixElementPosVal({changeVal:{webUrl:"https://xiaopiu.com/prd/"+r+"?page="+n,isEdit:!1,pageKey:a},element:g}),i["default"].createData({type:"saveInnerWebLink",name:"PRD 保存添加的内部网页链接",autoSaveType:"prd"})}}}t.editBtnClickFunc=h,t.closeMenuFunc=y,t.pageFlowSelectFunc=function(e){var t=e.currentTarget.getAttribute("data-id"),n=s.findSelectElement()[0],r=n.id,a=n.pageFlowId;o["default"].updateValById({id:r,updateVal:{pageFlowId:t,isEdit:!1}}),a!=t&&i["default"].createData({type:"pageFlowSelectFunc",name:"PRD 修改页面流程的选中",autoSaveType:"prd"})},t.contrSelectFunc=g,t.pageSelectFunc=m,t["default"]={editBtnClickFunc:h,closeMenuFunc:y,contrSelectFunc:g,pageSelectFunc:m}},871:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});for(var r="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),o={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},a={add:"+","break":"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:r?"meta":"control",opt:"alt",option:"alt","return":"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},i={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,"delete":46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},l=1;l<20;l++)i["f"+l]=111+l;function s(e,t,n){!t||"byKey"in t||(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(e){return u(e,t)}),o=function(e){return r.some(function(t){return c(t,e)})};return null==n?o:o(n)}function u(e,t){var n=t&&t.byKey,r={},a=(e=e.replace("++","+add")).split("+"),i=a.length;for(var l in o)r[o[l]]=!1;var s=!0,u=!1,c=undefined;try{for(var f,h=a[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var y=f.value,g=y.endsWith("?");g&&(y=y.slice(0,-1));var m=p(y),v=o[m];1!==i&&v||(n?r.key=m:r.which=d(y)),v&&(r[v]=!g||null)}}catch(_){u=!0,c=_}finally{try{!s&&h["return"]&&h["return"]()}finally{if(u)throw c}}return r}function c(e,t){for(var n in e){var r=e[n],o=void 0;if(null!=r&&((null!=(o="key"===n?t.key.toLowerCase():"which"===n?91===r&&93===t.which?91:t.which:t[n])||!1!==r)&&o!==r))return!1}return!0}function d(e){return e=p(e),i[e]||e.toUpperCase().charCodeAt(0)}function p(e){return e=e.toLowerCase(),e=a[e]||e}t["default"]=s,t.isHotkey=s,t.isCodeHotkey=function(e,t){return s(e,t)},t.isKeyHotkey=function(e,t){return s(e,{byKey:!0},t)},t.parseHotkey=u,t.compareHotkey=c,t.toKeyCode=d,t.toKeyName=p},912:function(e,t,n){var r=n(133),o=n(242),a=NaN,i=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return a;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):l.test(e)?a:+e}},913:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),l=n(63).create(),s={data:{x:{},y:{}}},u=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.getPrdAdhereLineData=function(){return s.data},t.prototype.setPrdAdhereLineData=function(e,t){void 0===e&&(e={}),void 0===t&&(t=!1),l.diff(s.data,e)&&(s.data=a({},s.data,e),t||u.emitChange())},t.prototype.emitChange=function(){this.emit("change")},t.prototype.addChangeListener=function(e){this.on("change",e)},t.prototype.removeChangeListener=function(e){this.removeListener("change",e)},t}(i.EventEmitter));t["default"]=u},914:function(e,t,n){"use strict";n.r(t);var r=n(204),o=n.n(r),a=n(61),i=n(88),l=n(148),s=n.n(l),u=n(149),c=n.n(u),d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p="object"===("undefined"==typeof window?"undefined":d(window))&&"object"===("undefined"==typeof document?"undefined":d(document))&&9===document.nodeType,f=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=undefined;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(s){o=!0,a=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=void 0;if(p){var y=!0,g=!1,m=undefined;try{for(var v,_=[["edge",/Edge\/([0-9\._]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["android",/Android\s([0-9\.]+)/],["safari",/Version\/([0-9\._]+).*Safari/]][Symbol.iterator]();!(y=(v=_.next()).done);y=!0){var b=v.value,w=f(b,2),C=w[0];if(w[1].test(window.navigator.userAgent)){h=C;break}}}catch(dn){g=!0,m=dn}finally{try{!y&&_["return"]&&_["return"]()}finally{if(g)throw m}}}var P=void 0;if(p){var O=!0,x=!1,E=undefined;try{for(var k,D=[["ios",/os ([\.\_\d]+) like mac os/i],["macos",/mac os x/i],["android",/android/i],["firefoxos",/mozilla\/[a-z\.\_\d]+ \((?:mobile)|(?:tablet)/i],["windows",/windows\s*(?:nt)?\s*([\.\_\d]+)/i]][Symbol.iterator]();!(O=(k=D.next()).done);O=!0){var S=k.value,j=f(S,2),M=j[0];if(j[1].test(window.navigator.userAgent)){P=M;break}}}catch(dn){x=!0,E=dn}finally{try{!O&&D["return"]&&D["return"]()}finally{if(x)throw E}}}var T=[];if(p){var A=!0,F=!1,I=undefined;try{for(var R,N=[["inputeventslevel1",function(e){return"inputType"in(e.InputEvent?new e.InputEvent("input"):{})}],["inputeventslevel2",function(e){var t=e.document.createElement("div");return t.contentEditable=!0,"onbeforeinput"in t}]][Symbol.iterator]();!(A=(R=N.next()).done);A=!0){var L=R.value,B=f(L,2),$=B[0];(0,B[1])(window)&&T.push($)}}catch(dn){F=!0,I=dn}finally{try{!A&&N["return"]&&N["return"]()}finally{if(F)throw I}}}var H=[[/^9([.]0|)/,28],[/^8[.]1/,27],[/^8([.]0|)/,26],[/^7[.]1/,25],[/^7([.]0|)/,24],[/^6([.]0|)/,23],[/^5[.]1/,22],[/^5([.]0|)/,21],[/^4[.]4/,20]];var V="firefox"===h,U="safari"===h,z="ie"===h,K="edge"===h,q="android"===P,W="ios"===P,X="macos"===P,Y=function(){if("android"!==P)return null;var e=window.navigator.userAgent.match(/Android\s([0-9\.]+)/);if(null==e)return null;var t=e[1],n=!0,r=!1,o=undefined;try{for(var a,i=H[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value,s=f(l,2),u=s[0],c=s[1];if(t.match(u))return c}}catch(dn){r=!0,o=dn}finally{try{!n&&i["return"]&&i["return"]()}finally{if(r)throw o}}return null}(),G=(T.includes("inputeventslevel1"),T.includes("inputeventslevel2")||q&&(28===Y||null===Y)),J=n(949);function Z(e){var t=JSON.stringify(e);return Object(J.btoa)(encodeURIComponent(t))}function Q(e){var t=decodeURIComponent(Object(J.atob)(e));return JSON.parse(t)}var ee={deserialize:function(e,t){var n=Q(e);return i.Value.fromJSON(n,t)},deserializeNode:function(e,t){var n=Q(e);return i.Node.fromJSON(n,t)},serialize:function(e,t){return Z(e.toJSON(t))},serializeNode:function(e,t){return Z(e.toJSON(t))}},te=n(3),ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function re(e){var t=(arguments.length>1&&arguments[1]!==undefined?arguments[1]:{}).delimiter,n=t===undefined?"\n":t;return"document"===e.object||"block"===e.object&&i.Block.isBlockList(e.nodes)?e.nodes.map(re).join(n):e.text}var oe={deserialize:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},n=t.defaultBlock,r=n===undefined?"line":n,o=t.defaultMarks,a=o===undefined?[]:o,l=t.delimiter,s=l===undefined?"\n":l,u=t.toJSON,c=u!==undefined&&u;te.Set.isSet(a)&&(a=a.toArray()),r=i.Node.createProperties(r),a=a.map(i.Mark.createProperties);var d={object:"value",document:{object:"document",data:{},nodes:e.split(s).map(function(e){return ne({},r,{object:"block",data:{},nodes:[{object:"text",leaves:[{object:"leaf",text:e,marks:a}]}]})})}};return c?d:i.Value.fromJSON(d)},serialize:function(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return re(e.document,t)}},ae=n(871),ie={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},le={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},se={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:"ctrl+y"},ue={},ce=W||X,de=!ce;[].concat(Object.keys(ie)).concat(Object.keys(le)).concat(Object.keys(se)).forEach(function(e){var t="is"+e[0].toUpperCase()+e.slice(1);if(!ue[t]){var n=ie[e],r=le[e],o=se[e],a=n&&Object(ae.isKeyHotkey)(n),i=r&&Object(ae.isKeyHotkey)(r),l=o&&Object(ae.isKeyHotkey)(o);ue[t]=function(e){return!(!a||!a(e))||(!!(ce&&i&&i(e))||!!(de&&l&&l(e)))}}});var pe=ue,fe=n(122),he=n.n(fe),ye=n(1),ge=n.n(ye),me=n(28),ve=n.n(me);function _e(e,t){function n(n,r,o,a,i){var l=r[o];return null!=l||n?null==l&&n?new Error("The "+i+" `"+o+"` is marked as required in `"+a+"`, but it was not supplied."):t(l)?null:new Error("Invalid "+i+" `"+o+"` supplied to `"+a+"`, expected a Slate `"+e+"` but received: "+l):null}function r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(undefined,[!1].concat(t))}return r.isRequired=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return n.apply(undefined,[!0].concat(t))},r}var be={block:_e("Block",function(e){return i.Block.isBlock(e)}),blocks:_e("List<Block>",function(e){return i.Block.isBlockList(e)}),change:_e("Change",function(e){return i.Change.isChange(e)}),data:_e("Data",function(e){return i.Data.isData(e)}),document:_e("Document",function(e){return i.Document.isDocument(e)}),inline:_e("Inline",function(e){return i.Inline.isInline(e)}),inlines:_e("Inline",function(e){return i.Inline.isInlineList(e)}),leaf:_e("Leaf",function(e){return i.Leaf.isLeaf(e)}),leaves:_e("List<Leaf>",function(e){return i.Leaf.isLeafList(e)}),mark:_e("Mark",function(e){return i.Mark.isMark(e)}),marks:_e("Set<Mark>",function(e){return i.Mark.isMarkSet(e)}),node:_e("Node",function(e){return i.Node.isNode(e)}),nodes:_e("List<Node>",function(e){return i.Node.isNodeList(e)}),range:_e("Range",function(e){return i.Range.isRange(e)}),ranges:_e("List<Range>",function(e){return i.Range.isRangeList(e)}),value:_e("Value",function(e){return i.Value.isValue(e)}),text:_e("Text",function(e){return i.Text.isText(e)}),texts:_e("List<Text>",function(e){return i.Text.isTextList(e)})},we=n(950),Ce=n.n(we),Pe=n(42),Oe=n(1184),xe=n.n(Oe),Ee=n(1185),ke=n.n(Ee),De=function(e,t){if(!e)throw new Error("Invariant failed: "+(t||""))},Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},je=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Me=0;var Te=function(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=Me++,n={type:"placeholder",data:{key:t}},r=e.placeholder,o=e.when,a=e.style,i=a===undefined?{}:a;return De(r,"You must pass `SlateReactPlaceholder` an `options.placeholder` string."),De(o,"You must pass `SlateReactPlaceholder` an `options.when` query."),{decorateNode:function(e,t,r){if(!t.query(o,e))return r();var a=r(),i=e.getFirstText(),l=e.getLastText(),s={anchor:{key:i.key,offset:0},focus:{key:l.key,offset:l.text.length},mark:n};return[].concat(je(a),[s])},renderMark:function(e,n,o){var a=e.children,l=e.mark;if("placeholder"===l.type&&l.data.get("key")===t){var s=Se({pointerEvents:"none",display:"inline-block",width:"0",maxWidth:"100%",whiteSpace:"nowrap",opacity:"0.333"},i);return ge.a.createElement("span",null,ge.a.createElement("span",{contentEditable:!1,style:s},r),a)}return o()}}},Ae=function(e,t){return e===t};var Fe=function(e,t){var n;void 0===t&&(t=Ae);var r,o=[],a=!1,i=function(e,n){return t(e,o[n],n)};return function(){for(var t=arguments.length,l=new Array(t),s=0;s<t;s++)l[s]=arguments[s];return a&&n===this&&l.length===o.length&&l.every(i)?r:(r=e.apply(this,l),a=!0,n=this,o=l,r)}};n.d(t,"Editor",function(){return un}),n.d(t,"cloneFragment",function(){return Ct}),n.d(t,"findDOMNode",function(){return mt}),n.d(t,"findDOMRange",function(){return Zt}),n.d(t,"findNode",function(){return Pt}),n.d(t,"findRange",function(){return et}),n.d(t,"getEventRange",function(){return Ot}),n.d(t,"getEventTransfer",function(){return Mt}),n.d(t,"setEventTransfer",function(){return Ft}),n.d(t,"ReactPlugin",function(){return ln});var Ie=["onBeforeInput","onBlur","onClick","onContextMenu","onCompositionEnd","onCompositionStart","onCopy","onCut","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onInput","onFocus","onKeyDown","onKeyUp","onMouseDown","onMouseUp","onPaste","onSelect"];var Re=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Le=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$e=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},He=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},Ve=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=undefined;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(dn){o=!0,a=dn}finally{try{!r&&l["return"]&&l["return"]()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Ue=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},ze=/^([\w-]+)(?::(\d+))?$/;var Ke={parse:function(e){var t=ze.exec(e);if(!t)throw new Error('Invalid offset key string "'+e+'".');var n=Ve(t,3),r=(n[0],n[1]),o=n[2];return{key:r,index:parseInt(o,10)}},stringify:function(e){return e.key+":"+e.index}},qe="data-slate-zero-width",We="["+qe+"]",Xe="data-offset-key",Ye="["+Xe+"]",Ge="[data-key]",Je="[data-slate-void]";function Ze(e,t,n){Object(a.a)(!i.Value.isValue(n),"As of Slate 0.42.0, the `findPoint` utility takes an `editor` instead of a `value`.");var r=function(e,t){if(1===e.nodeType&&e.childNodes.length){var n=t===e.childNodes.length,r=n?"backward":"forward",o=n?t-1:t;for(e=Qe(e,o,r);1===e.nodeType&&e.childNodes.length;){var a=n?e.childNodes.length-1:0;e=Qe(e,a,r)}t=n?e.textContent.length:0}return{node:e,offset:t}}(e,t),l=r.node,s=r.offset,u=o()(e),c=l.parentNode,d=c.closest(Ye),p=void 0,f=void 0;if(d){var h=u.document.createRange(),y=d.closest(Ge);h.setStart(y,0),h.setEnd(l,s),f=y,p=h.cloneContents().textContent.length}else{var g=c.closest(Je);if(!g)return null;if(!(d=g.querySelector(Ye)))return null;p=(f=d).textContent.length}p===f.textContent.length&&c.hasAttribute(qe)&&p--;var m=d.getAttribute(Xe);if(!m)return null;var v=Ke.parse(m).key,_=n.value;return _.document.hasDescendant(v)?_.document.createPoint({key:v,offset:p}):null}function Qe(e,t,n){for(var r=e.childNodes,o=r[t],a=t,i=!1,l=!1;(8===o.nodeType||1===o.nodeType&&0===o.childNodes.length||1===o.nodeType&&"false"===o.getAttribute("contenteditable"))&&(!i||!l);)a>=r.length?(i=!0,a=t-1,n="backward"):a<0?(l=!0,a=t+1,n="forward"):(o=r[a],"forward"===n&&a++,"backward"===n&&a--);return o||null}function et(e,t){Object(a.a)(!i.Value.isValue(t),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var n=e.anchorNode||e.startContainer;if(!n)return null;var r=o()(n);(e instanceof r.Range||r.StaticRange&&e instanceof r.StaticRange)&&(e={anchorNode:e.startContainer,anchorOffset:e.startOffset,focusNode:e.endContainer,focusOffset:e.endOffset});var l=e,s=l.anchorNode,u=l.anchorOffset,c=l.focusNode,d=l.focusOffset,p=l.isCollapsed,f=t.value,h=Ze(s,u,t),y=p?h:Ze(c,d,t);return h&&y?f.document.createRange({anchor:h,focus:y}):null}function tt(e,t,n){var r=t.value,o=r.document;if(n.rangeCount){var a=et(n,t);if(a){var i=a,l=i.anchor,s=i.focus,u=o.getNode(l.key),c=o.getNode(s.key),d=o.getClosestInline(l.key),p=o.getClosestInline(s.key),f=o.getClosestBlock(s.key),h=o.getClosestBlock(l.key);if(h&&!t.isVoid(h)&&0===l.offset&&f&&t.isVoid(f)&&0!==s.offset&&(a=a.setFocus(s.setOffset(0))),d&&!t.isVoid(d)&&l.offset===u.text.length){var y=o.getClosestBlock(l.key).getNextText(l.key);y&&(a=a.moveAnchorTo(y.key,0))}if(p&&!t.isVoid(p)&&s.offset===c.text.length){var g=o.getClosestBlock(s.key).getNextText(s.key);g&&(a=a.moveFocusTo(g.key,0))}var m=o.createSelection(a);return m=(m=m.setIsFocused(!0)).set("marks",r.selection.marks)}}else t.blur()}function nt(e,t,n){var r=tt(0,t,n);t.select(r)}function rt(e,t,n){var r=Ze(n,0,t);if(r){var o=t.value,a=o.document,i=o.selection,l=a.getDescendant(r.key),s=a.getClosestBlock(l.key),u=l.getLeaves(),c=s.getLastText(),d=u.last(),p=0,f=0,h=u.find(function(e){if(p=f,(f+=e.text.length)>r.offset)return!0})||d,y=h.text,g=n.textContent,m=l===c,v=h===d,_=g.charAt(g.length-1);if(m&&v&&"\n"===_&&(g=g.slice(0,-1)),g!==y){var b=i.moveAnchorTo(r.key,p).moveFocusTo(r.key,f);b=a.resolveRange(b),t.insertTextAtRange(b,g,h.marks)}}}function ot(e,t){return e.nodeType===t.Node.TEXT_NODE}function at(e,t){if(!e.length)throw new Error("elements must be an Array");var n=e[e.length-1];return{elements:e.map(function(e){return function n(e,t){var r={};return r.node=e,ot(e,t)&&(r.text=e.textContent),r.children=Array.from(e.childNodes).map(function(e){return n(e,t)}),r}(e,t)}),parent:n.parentElement,next:n.nextElementSibling}}function it(e,t){var n=e.elements,r=e.next,o=e.parent;n.forEach(function(e){return function n(e,t){var r=e.node;ot(r,t)&&r.textContent!==e.text&&(r.textContent=e.text),e.children.forEach(function(e){n(e,t),r.appendChild(e.node)});for(var o=e.children.length;r.childNodes.length>o;)r.removeChild(r.childNodes[0]);var a=r.dataset;if(a){var i=a.key;if(i){var l=new t.Set(Array.from(t.document.querySelectorAll("[data-key='"+i+"']")));l["delete"](r),l.forEach(function(e){return e.parentElement.removeChild(e)})}}}(e,t)});var a=n[n.length-1].node;e.next?o.insertBefore(a,r):o.appendChild(a);for(var i=a,l=n.length-2;l>=0;l--){var s=n[l].node;o.insertBefore(s,i),i=s}}var lt=function(){function e(t,n){Re(this,e),this.window=o()(t[0]),this.snapshot=at(t,this.window),this.data=n}return Ne(e,[{key:"apply",value:function(){it(this.snapshot,this.window)}},{key:"getData",value:function(){return this.data}}]),e}();function st(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:window;return e.nodeType===n.Node.TEXT_NODE&&(e=e.parentNode),e.closest(t)}var ut=function(){function e(t,n){var r=(arguments.length>2&&arguments[2]!==undefined?arguments[2]:{}).before,o=r!==undefined&&r;Re(this,e);var a=t.getSelection(),i=st(a.anchorNode,"[data-slate-editor] > *"),l=[i];if(o){var s=i.previousElementSibling;s&&l.unshift(s)}this.snapshot=new lt(l),this.selection=tt(0,n,a)}return Ne(e,[{key:"apply",value:function(e){var t=this.snapshot,n=this.selection;t.apply(),e.moveTo(n.anchor.key,n.anchor.offset)}}]),e}();function ct(){}var dt=function pn(e,t){var n=this,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};Re(this,pn),this.__call__=function(){n.fn(),n.preventFurtherCalls()},this.preventFurtherCalls=function(){n.fn=ct},this.resume=function(e){n.cancel(),e?(n.mode="timeout",n.timeoutId=n.window.setTimeout(n.__call__,e)):(n.mode="animationFrame",n.callbackId=n.window.requestAnimationFrame(n.__call__))},this.cancel=function(){"timeout"===n.mode?n.window.clearTimeout(n.timeoutId):n.window.cancelAnimationFrame(n.callbackId),n.onCancel&&n.onCancel()},this.__setTimeout__=function(e){null!=e&&n.window.setTimeout(function(){n.cancel(),n.preventFurtherCalls()},e)},this.fn=t,this.window=e,this.resume(),this.onCancel=r.onCancel,this.__setTimeout__(r.timeout)},pt=s()("slate:android");pt.reconcile=s()("slate:reconcile"),pt("ANDROID_API_VERSION",{ANDROID_API_VERSION:Y});var ft=0,ht=1;function yt(){var e=ft,t=new window.Set,n=null,r=null,a=null,i=null,l=!1,s=null;function u(e,n,r){var o=r.from;pt.reconcile({from:o});var a=e.getSelection();t.forEach(function(e){rt(0,n,e)}),nt(0,n,a),t.clear()}return{onBeforeInput:function(t,a,u){var d=!t.nativeEvent;pt("onBeforeInput",{isNative:d,event:t,status:e,e:c()(t,["data","inputType","isComposing","nativeEvent"])});var p,f=o()(t.target);if(l)return t.preventDefault(),void(l=!1);switch(Y){case 25:break;case 26:case 27:if(i&&(i.cancel(),r.resume()),d){if("insertParagraph"===t.inputType||"insertLineBreak"===t.inputType){pt("onBeforeInput:enter:native",{});var h=f.getSelection(),y=tt(0,a,h);l=!0,t.preventDefault(),a.moveTo(y.anchor.key,y.anchor.offset),a.splitBlock()}}else{if(function(e,t){if(!Array.isArray(t))throw new Error("chars must be an array of one character strings");if(null==e)return!1;var n=e[e.length-1];return t.includes(n)}(t.data,["."]))return pt("onBeforeInput:period"),r.cancel(),void(s="period");null!=(p=t.data)&&10===p[p.length-1].charCodeAt(0)&&(r&&r.cancel(),f.requestAnimationFrame(function(){pt("onBeforeInput:enter:react",{}),n.apply(a),a.splitBlock()}))}break;case 28:i&&(i.cancel(),r.resume());break;default:e!==ht&&u()}},onCompositionEnd:function(a,i,l){pt("onCompositionEnd",{event:a});var c=o()(a.target),d=c.getSelection().anchorNode;switch(Y){case 26:case 27:n=new ut(c,i),e=ht}s="reconcile",t.add(d),r=new dt(c,function(){e=ft,u(c,i,{from:"onCompositionEnd:reconciler"}),s=null})},onCompositionStart:function(n,r,o){pt("onCompositionStart",{event:n}),e=ht,t.clear()},onCompositionUpdate:function(e,t,n){pt("onCompositionUpdate",{event:e})},onInput:function(n,l,d){switch(pt("onInput",{event:n,status:e,e:c()(n,["data","nativeEvent","inputType","isComposing"])}),Y){case 24:case 25:break;case 26:case 27:case 28:var p=n.nativeEvent;if(28===Y&&"insertText"===p.inputType&&" "===p.data)return r&&r.cancel(),i&&i.cancel(),void u(window,l,{from:"onInput:space"});if((26===Y||27===Y)&&"period"===s){pt("onInput:period:abort");var f=window.getSelection().anchorNode;return void t.add(f)}if("deleteContentBackward"===p.inputType){pt("onInput:delete",{keyDownSnapshot:a});var h=o()(n.target);return r&&r.cancel(),i&&i.cancel(),void(i=new dt(h,function(){pt("onInput:delete:callback",{keyDownSnapshot:a}),a.apply(l),l.deleteBackward(),i=null},{onCancel:function(){i=null}}))}if(e===ht){var y=window.getSelection().anchorNode;return void t.add(y)}if(28===Y){pt("onInput:fallback");var g=window.getSelection().anchorNode;return t.add(g),void window.requestAnimationFrame(function(){pt("onInput:fallback:callback"),u(window,l,{from:"onInput:fallback"})})}break;default:if(e===ht)return;d()}},onKeyDown:function(t,l,s){pt("onKeyDown",{event:t,status:e,e:c()(t,["char","charCode","code","key","keyCode","keyIdentifier","keyLocation","location","nativeEvent","which"])});var d=o()(t.target);switch(Y){case 25:"Enter"===t.key&&s();break;case 26:case 27:if("Enter"===t.key){if(pt("onKeyDown:enter",{}),i)i.cancel(),t.preventDefault(),d.requestAnimationFrame(function(){pt("onKeyDown:enter:callback"),n.apply(l),l.splitBlock()});else{t.preventDefault();var p=d.getSelection(),f=tt(0,l,p);l.moveTo(f.anchor.key,f.anchor.offset),l.splitBlock()}return}a=new ut(d,l,{before:!0});break;case 28:if("Enter"===t.key)return pt("onKeyDown:enter"),t.preventDefault(),r&&r.cancel(),i&&i.cancel(),void d.requestAnimationFrame(function(){u(d,l,{from:"onKeyDown:enter"}),l.splitBlock()});a=new ut(d,l,{before:!0}),pt("onKeyDown:snapshot",{keyDownSnapshot:a});break;default:e!==ht&&s()}},onSelect:function(t,n,r){switch(pt("onSelect",{event:t,status:e}),Y){case 26:case 27:case 28:!function(e){var t=e.getSelection(),n=t.anchorNode,r=n.parentElement.dataset;if(r&&"n"===r.slateZeroWidth&&1===n.textContent.length&&0!==t.anchorOffset){var o=e.document.createRange();o.setStart(n,0),o.setEnd(n,0),t.removeAllRanges(),t.addRange(o)}}(o()(t.target))}}}}var gt={FRAGMENT:"application/x-slate-fragment",HTML:"text/html",NODE:"application/x-slate-node",RICH:"text/rtf",TEXT:"text/plain"};function mt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window;i.Node.isNode(e)&&(e=e.key);var n=t.document.querySelector('[data-key="'+e+'"]');if(!n)throw new Error('Unable to find a DOM node for "'+e+'". This is often because of forgetting to add `props.attributes` to a custom component.');return n}function vt(e){var t=window.document;if(t&&t.body.createTextRange){var n=t.body.createTextRange();n.collapse(),n.select()}else e.removeAllRanges()}var _t=gt.FRAGMENT,bt=gt.HTML,wt=gt.TEXT;function Ct(e,t){var n=arguments.length>2&&arguments[2]!==undefined?arguments[2]:function(){return undefined};Object(a.a)(!i.Value.isValue(t),"As of Slate 0.42.0, the `cloneFragment` utility takes an `editor` instead of a `value`.");var r=o()(e.target),l=r.getSelection(),s=t.value,u=s.document,c=s.fragment,d=s.selection,p=d.start,f=d.end,h=u.getClosestVoid(p.key,t),y=u.getClosestVoid(f.key,t);if(!l.isCollapsed||h){var g=ee.serializeNode(c),m=l.getRangeAt(0),v=m.cloneContents(),_=v.childNodes[0];if(v.childNodes.forEach(function(e){e.textContent&&""!==e.textContent.trim()&&(_=e)}),y){var b=m.cloneRange(),w=mt(y,r);b.setEndAfter(w),v=b.cloneContents()}if(h&&(_=v.childNodes[0].childNodes[1].firstChild),[].slice.call(v.querySelectorAll(We)).forEach(function(e){var t="n"===e.getAttribute(qe);e.textContent=t?"\n":""}),3===_.nodeType){var C=r.document.createElement("span");C.style.whiteSpace="pre",C.appendChild(_),v.appendChild(C),_=C}_.setAttribute("data-slate-fragment",g);var P=i.Value.create({document:c}),O=oe.serialize(P),x=r.document.createElement("div");if(x.appendChild(v),e.clipboardData&&e.clipboardData.setData&&!z)return e.preventDefault(),e.clipboardData.setData(wt,O),e.clipboardData.setData(_t,g),e.clipboardData.setData(bt,x.innerHTML),void n();var E=e.target.closest("[data-slate-editor]");x.setAttribute("contenteditable",!0),x.style.position="absolute",x.style.left="-9999px",E.appendChild(x),l.selectAllChildren(x),r.requestAnimationFrame(function(){E.removeChild(x),vt(l),l.addRange(m),n()})}}function Pt(e,t){Object(a.a)(!i.Value.isValue(t),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`.");var n=e.closest("[data-key]");if(!n)return null;var r=n.getAttribute("data-key");return r&&t.value.document.getNode(r)||null}function Ot(e,t){Object(a.a)(!i.Value.isValue(t),"As of Slate 0.42.0, the `findNode` utility takes an `editor` instead of a `value`."),e.nativeEvent&&(e=e.nativeEvent);var n=e,r=n.clientX,l=n.clientY,s=n.target;if(null==r||null==l)return null;var u=t.value.document,c=Pt(s,t);if(!c)return null;if(t.query("isVoid",c)){var d=s.getBoundingClientRect(),p="inline"===c.object?r-d.left<d.left+d.width-r:l-d.top<d.top+d.height-l,f=c.getFirstText(),h=u.createRange();if(p){var y=u.getPreviousText(f.key);if(y)return h.moveToEndOfNode(y)}var g=u.getNextText(f.key);return g?h.moveToStartOfNode(g):null}var m=o()(s),v=void 0;if(m.document.caretRangeFromPoint)v=m.document.caretRangeFromPoint(r,l);else if(m.document.caretPositionFromPoint){var _=m.document.caretPositionFromPoint(r,l);(v=m.document.createRange()).setStart(_.offsetNode,_.offset),v.setEnd(_.offsetNode,_.offset)}else if(m.document.body.createTextRange){v=m.document.body.createTextRange();try{v.moveToPoint(r,l)}catch(w){return null}}var b=et(v,t);return b||null}var xt=gt.FRAGMENT,Et=gt.HTML,kt=gt.NODE,Dt=gt.RICH,St=gt.TEXT,jt=/ data-slate-fragment="([^\s"]+)"/;function Mt(e){!z&&e.nativeEvent&&(e=e.nativeEvent);var t=e.dataTransfer||e.clipboardData,n=Tt(t,xt),r=Tt(t,kt),o=Tt(t,Et),a=Tt(t,Dt),i=Tt(t,St),l=void 0;if(!n&&o&&~o.indexOf(' data-slate-fragment="')){var s=jt.exec(o),u=Ve(s,2),c=(u[0],u[1]);c&&(n=c)}if(i){var d=function(e){var t="SLATE-DATA-EMBED::";if(e.substring(0,t.length)!==t)return{TEXT:e};try{return JSON.parse(e.substring(t.length))}catch(dn){throw new Error("Unable to parse custom Slate drag event data.")}}(i);d[xt]&&(n=d[xt]),d[kt]&&(r=d[kt]),d[St]&&(i=d[St])}n&&(n=ee.deserializeNode(n)),r&&(r=ee.deserializeNode(r));try{t.items&&t.items.length?l=Array.from(t.items).map(function(e){return"file"===e.kind?e.getAsFile():null}).filter(function(e){return e}):t.files&&t.files.length&&(l=Array.from(t.files))}catch(dn){t.files&&t.files.length&&(l=Array.from(t.files))}var p={files:l,fragment:n,html:o,node:r,rich:a,text:i};return p.type=function(e){return e.fragment?"fragment":e.node?"node":e.rich&&e.html?"html":e.rich&&e.text?"text":e.files&&e.files.length?"files":e.html?"html":e.text?"text":"unknown"}(p),p}function Tt(e,t){return e.types&&e.types.length?-1!==Array.from(e.types).indexOf(t)&&e.getData(t)||null:t===St&&e.getData("Text")||null}var At=gt.TEXT;function Ft(e,t,n){var r=gt[t.toUpperCase()];if(!r)throw new Error('Cannot set unknown transfer type "'+r+'".');e.nativeEvent&&(e=e.nativeEvent);var o=e.dataTransfer||e.clipboardData;try{o.setData(r,n),o.setData("text",o.getData("text"))}catch(dn){var a="SLATE-DATA-EMBED::",i=o.getData(At),l={};if(i.substring(0,a.length)===a)try{l=JSON.parse(i.substring(a.length))}catch(u){throw new Error("Failed to parse Slate data from `DataTransfer` object.")}else l[At]=i;l[r]=n;var s=""+a+JSON.stringify(l);o.setData(At,s)}}var It=s()("slate:after");var Rt=s()("slate:before");function Nt(){var e,t,n,r,a,i,l,s=(arguments.length>0&&arguments[0]!==undefined?arguments[0]:{}).plugins,u=s===undefined?[]:s,c=q?[yt()]:[],d=(e=null,t=0,n=!1,r=!1,a=!1,{onBeforeInput:function(e,t,n){var r=!!e.nativeEvent;t.readOnly||r&&G||(Rt("onBeforeInput",{event:e}),n())},onBlur:function(t,n,a){if(!r&&!n.readOnly){var i=t.relatedTarget,l=t.target,s=o()(l);if(e!==s.document.activeElement){if(i){var u=he.a.findDOMNode(n);if(i===u)return;if(i.hasAttribute("data-slate-spacer"))return;var c=Pt(i,n);if(u.contains(i)&&c&&!n.isVoid(c))return}Rt("onBlur",{event:t}),a()}}},onClick:function(e,t,n){Rt("onClick",{event:e}),n()},onCompositionEnd:function(e,r,o){var a=t;window.requestAnimationFrame(function(){t>a||(n=!1)}),Rt("onCompositionEnd",{event:e}),o()},onCompositionStart:function(e,r,o){n=!0,t++,r.value.selection.isCollapsed||r["delete"](),Rt("onCompositionStart",{event:e}),o()},onCopy:function(e,t,n){var a=o()(e.target);r=!0,a.requestAnimationFrame(function(){return r=!1}),Rt("onCopy",{event:e}),n()},onCut:function(e,t,n){if(!t.readOnly){var a=o()(e.target);r=!0,a.requestAnimationFrame(function(){return r=!1}),Rt("onCut",{event:e}),n()}},onDragEnd:function(e,t,n){a=!1,Rt("onDragEnd",{event:e}),n()},onDragEnter:function(e,t,n){Rt("onDragEnter",{event:e}),n()},onDragExit:function(e,t,n){Rt("onDragExit",{event:e}),n()},onDragLeave:function(e,t,n){Rt("onDragLeave",{event:e}),n()},onDragOver:function(e,t,n){var r=Pt(e.target,t);t.isVoid(r)&&e.preventDefault(),z&&e.preventDefault(),a||(a=!0,z||(e.nativeEvent.dataTransfer.dropEffect="move")),Rt("onDragOver",{event:e}),n()},onDragStart:function(e,t,n){a=!0,Rt("onDragStart",{event:e}),n()},onDrop:function(e,t,n){t.readOnly||(e.preventDefault(),Rt("onDrop",{event:e}),n())},onFocus:function(t,n,a){if(!r&&!n.readOnly){var i=he.a.findDOMNode(n),l=o()(t.target);e=l.document.activeElement,V&&t.target!==i?i.focus():(Rt("onFocus",{event:t}),a())}},onInput:function(e,t,r){n||t.value.selection.isBlurred||(Rt("onInput",{event:e}),r())},onKeyDown:function(e,t,r){t.readOnly||(n?pe.isCompose(e)&&e.preventDefault():(!W&&(pe.isBold(e)||pe.isDeleteBackward(e)||pe.isDeleteForward(e)||pe.isDeleteLineBackward(e)||pe.isDeleteLineForward(e)||pe.isDeleteWordBackward(e)||pe.isDeleteWordForward(e)||pe.isItalic(e)||pe.isRedo(e)||pe.isSplitBlock(e)||pe.isTransposeCharacter(e)||pe.isUndo(e))&&e.preventDefault(),Rt("onKeyDown",{event:e}),r()))},onPaste:function(e,t,n){t.readOnly||(e.preventDefault(),Rt("onPaste",{event:e}),n())},onSelect:function(t,a,i){if(!r&&!n&&!a.readOnly){var l=o()(t.target);e=l.document.activeElement,Rt("onSelect",{event:t}),i()}}}),p=(i=null,l=!1,{onBeforeInput:function(e,t,n){var r=t.value;if(e.nativeEvent)return e.preventDefault(),t.insertText(e.data),n();var o=e.getTargetRanges(),a=Ve(o,1)[0];if(!a)return n();It("onBeforeInput",{event:e}),e.preventDefault();var i=r.document,l=r.selection,s=et(a,t);switch(e.inputType){case"deleteByDrag":case"deleteByCut":case"deleteContent":case"deleteContentBackward":case"deleteContentForward":t.deleteAtRange(s);break;case"deleteWordBackward":t.deleteWordBackwardAtRange(s);break;case"deleteWordForward":t.deleteWordForwardAtRange(s);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":t.deleteLineBackwardAtRange(s);break;case"deleteSoftLineForward":case"deleteHardLineForward":t.deleteLineForwardAtRange(s);break;case"insertLineBreak":case"insertParagraph":i.hasVoidParent(l.start.path,t)?t.moveToStartOfNextText():t.splitBlockAtRange(s);break;case"insertFromYank":case"insertReplacementText":case"insertText":var u=null==e.data?e.dataTransfer.getData("text/plain"):e.data;if(null==u)break;t.insertTextAtRange(s,u,l.marks),l.marks&&r.document!==t.value.document&&t.select({marks:null})}n()},onBlur:function(e,t,n){It("onBlur",{event:e}),t.blur(),n()},onClick:function(e,t,n){if(t.readOnly)return n();var r=t.value.document,o=Pt(e.target,t);if(!o)return n();It("onClick",{event:e});var a=r.getAncestors(o.key);o&&(t.isVoid(o)||a.some(function(e){return t.isVoid(e)}))&&t.focus().moveToEndOfNode(o),n()},onCopy:function(e,t,n){It("onCopy",{event:e}),Ct(e,t),n()},onCut:function(e,t,n){It("onCut",{event:e}),Ct(e,t,function(){var e=t.value,n=e.endBlock,r=e.endInline,o=e.selection.isCollapsed,a=n&&t.isVoid(n)&&o,i=r&&t.isVoid(r)&&o;a?t.removeNodeByKey(n.key):i?t.removeNodeByKey(r.key):t["delete"]()}),n()},onDragEnd:function(e,t,n){It("onDragEnd",{event:e}),i=null,n()},onDragStart:function(e,t,n){It("onDragStart",{event:e}),i=!0;var r=t.value,o=r.document,a=Pt(e.target,t),l=o.getAncestors(a.key),s=a&&(t.isVoid(a)||l.some(function(e){return t.isVoid(e)})),u=r.blocks.some(function(e){return e.key===a.key});s&&!u&&t.moveToRangeOfNode(a);var c=t.value.fragment;Ft(e,"fragment",ee.serializeNode(c)),n()},onDrop:function(e,t,n){var r=t.value,a=r.document,l=r.selection,s=o()(e.target),u=Ot(e,t);if(!u)return n();It("onDrop",{event:e});var c=Mt(e),d=c.type,p=c.fragment,f=c.text;if(t.focus(),i&&l.end.key===u.end.key&&l.end.offset<u.end.offset&&(u=u.moveForward(l.start.key===l.end.key?0-l.end.offset+l.start.offset:0-l.end.offset)),i&&t["delete"](),t.select(u),"text"===d||"html"===d){var h=u.anchor,y=a.hasVoidParent(h.key,t);if(y){for(var g=a.getNode(h.key);y&&(g=a.getNextText(g.key));)y=a.hasVoidParent(g.key,t);g&&t.moveToStartOfNode(g)}f&&f.split("\n").forEach(function(e,n){n>0&&t.splitBlock(),t.insertText(e)})}"fragment"===d&&t.insertFragment(p);var m=mt(a.getNode(u.focus.key),s);m&&m.dispatchEvent(new MouseEvent("mouseup",{view:s,bubbles:!0,cancelable:!0})),n()},onFocus:function(e,t,n){It("onFocus",{event:e}),!l||z||K?t.focus():t.deselect().focus(),n()},onInput:function(e,t,n){It("onInput");var r=o()(e.target),a=r.getSelection();rt(0,t,a.anchorNode),nt(0,t,a),n()},onKeyDown:function(e,t,n){It("onKeyDown",{event:e});var r=t.value,o=r.document,a=r.selection,i=o.hasVoidParent(a.start.path,t);if(pe.isSplitBlock(e)&&!W)return i?t.moveToStartOfNextText():t.splitBlock();if(pe.isDeleteBackward(e)&&!W)return t.deleteCharBackward();if(pe.isDeleteForward(e)&&!W)return t.deleteCharForward();if(pe.isDeleteLineBackward(e))return t.deleteLineBackward();if(pe.isDeleteLineForward(e))return t.deleteLineForward();if(pe.isDeleteWordBackward(e))return t.deleteWordBackward();if(pe.isDeleteWordForward(e))return t.deleteWordForward();if(pe.isRedo(e))return t.redo();if(pe.isUndo(e))return t.undo();if(pe.isMoveLineBackward(e))return e.preventDefault(),t.moveToStartOfBlock();if(pe.isMoveLineForward(e))return e.preventDefault(),t.moveToEndOfBlock();if(pe.isExtendLineBackward(e))return e.preventDefault(),t.moveFocusToStartOfBlock();if(pe.isExtendLineForward(e))return e.preventDefault(),t.moveFocusToEndOfBlock();if(pe.isMoveBackward(e))return e.preventDefault(),a.isCollapsed?t.moveBackward():t.moveToStart();if(pe.isMoveForward(e))return e.preventDefault(),a.isCollapsed?t.moveForward():t.moveToEnd();if(pe.isMoveWordBackward(e))return e.preventDefault(),t.moveWordBackward();if(pe.isMoveWordForward(e))return e.preventDefault(),t.moveWordForward();if(pe.isExtendBackward(e)){var l=r.previousText,s=r.startText,u=l&&o.hasVoidParent(l.key,t);if(i||u||""===s.text)return e.preventDefault(),t.moveFocusBackward()}if(pe.isExtendForward(e)){var c=r.nextText,d=r.startText,p=c&&o.hasVoidParent(c.key,t);if(i||p||""===d.text)return e.preventDefault(),t.moveFocusForward()}n()},onMouseDown:function(e,t,n){It("onMouseDown",{event:e}),l=!0,n()},onMouseUp:function(e,t,n){It("onMouseUp",{event:e}),l=!1,n()},onPaste:function(e,t,n){It("onPaste",{event:e});var r=t.value,o=Mt(e),a=o.type,i=o.fragment,l=o.text;if("fragment"===a&&t.insertFragment(i),"text"===a||"html"===a){if(!l)return n();var s=r.document,u=r.selection,c=r.startBlock;if(t.isVoid(c))return n();var d=c,p=s.getInsertMarksAtRange(u),f=oe.deserialize(l,{defaultBlock:d,defaultMarks:p}).document;t.insertFragment(f)}n()},onSelect:function(e,t,n){It("onSelect",{event:e});var r=o()(e.target);nt(0,t,r.getSelection()),l=!1,n()}});return[].concat(c,[d],Ue(u),[p])}var Lt=s()("slate:leaves"),Bt=function(e){function t(){var e,n,r;Re(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),$t.call(r),He(r,n)}return $e(t,e),Ne(t,[{key:"shouldComponentUpdate",value:function(e){return e.index!==this.props.index||e.marks!==this.props.marks||e.text!==this.props.text||e.parent!==this.props.parent}},{key:"render",value:function(){this.debug("render",this);var e=this.props,t=e.node,n=e.index,r=Ke.stringify({key:t.key,index:n});return ge.a.createElement("span",{"data-slate-leaf":!0,"data-offset-key":r},this.renderMarks())}},{key:"renderMarks",value:function(){var e=this.props,t=e.marks,n=e.node,r=e.offset,o=e.text,a=e.editor,i=this.renderText(),l={"data-slate-mark":!0};return t.reduce(function(e,i){var s={editor:a,mark:i,marks:t,node:n,offset:r,text:o,children:e,attributes:l};return a.run("renderMark",s)||e},i)}},{key:"renderText",value:function(){var e=this.props,t=e.block,n=e.node,r=e.editor,o=e.parent,a=e.text,i=e.index,l=e.leaves;if(r.query("isVoid",o))return ge.a.createElement("span",{"data-slate-zero-width":"z","data-slate-length":o.text.length},"\ufeff");if(""===a&&"block"===o.object&&""===o.text&&o.nodes.last()===n)return ge.a.createElement("span",{"data-slate-zero-width":"n","data-slate-length":0},"\ufeff",ge.a.createElement("br",null));if(""===a)return ge.a.createElement("span",{"data-slate-zero-width":"z","data-slate-length":0},"\ufeff");var s=t.getLastText(),u=a.charAt(a.length-1),c=n===s,d=i===l.size-1;return c&&d&&"\n"===u?ge.a.createElement("span",{"data-slate-content":!0},a+"\n"):ge.a.createElement("span",{"data-slate-content":!0},a)}}]),t}(ge.a.Component);Bt.propTypes={block:be.block.isRequired,editor:ve.a.object.isRequired,index:ve.a.number.isRequired,leaves:be.leaves.isRequired,marks:be.marks.isRequired,node:be.node.isRequired,offset:ve.a.number.isRequired,parent:be.node.isRequired,text:ve.a.string.isRequired};var $t=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];Lt.apply(undefined,[t,e.props.node.key+"-"+e.props.index].concat(r))}},Ht=s()("slate:node"),Vt=function(e){function t(){var e,n,r;Re(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Ut.call(r),He(r,n)}return $e(t,e),Ne(t,[{key:"render",value:function(){var e=this;this.debug("render",this);var t=this.props,n=t.decorations,r=t.editor,o=t.node,a=t.style,l=r.value.document,s=o.key,u=n.filter(function(e){var t=e.start,n=e.end;if(t.key===s||n.key===s)return!0;if(t.key===n.key)return!1;var r=l.assertPath(s),o=t.path||l.assertPath(t.key),a=n.path||l.assertPath(n.key);return-1!==i.PathUtils.compare(r,o)&&1!==i.PathUtils.compare(r,a)}),c=0===u.size?o.getLeaves():o.getLeaves(u),d=0,p=c.map(function(t,n){var r=e.renderLeaf(c,t,n,d);return d+=t.text.length,r});return ge.a.createElement("span",{"data-key":s,style:a},p)}}]),t}(ge.a.Component);Vt.propTypes={block:be.block,decorations:Ce.a.list.isRequired,editor:ve.a.object.isRequired,node:be.node.isRequired,parent:be.node.isRequired,style:ve.a.object},Vt.defaultProps={style:null};var Ut=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node.key;Ht.apply(undefined,[t,a+" (text)"].concat(r))},this.shouldComponentUpdate=function(t){var n=t,r=e.props;if(n.node!==r.node)return!0;if("block"===n.parent.object){var o=r.parent.nodes.last(),a=n.parent.nodes.last();if(r.node===o&&n.node!==a)return!0}return!n.decorations.equals(r.decorations)},this.renderLeaf=function(t,n,r,o){var a=e.props,i=a.block,l=a.node,s=a.parent,u=a.editor,c=n.text,d=n.marks;return ge.a.createElement(Bt,{key:l.key+"-"+r,block:i,editor:u,index:r,marks:d,node:l,offset:o,parent:s,leaves:t,text:c})}},zt=s()("slate:void"),Kt=function(e){function t(){var e,n,r;Re(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),qt.call(r),He(r,n)}return $e(t,e),Ne(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.node,r=e.readOnly,o="block"===n.object?"div":"span",a=ge.a.createElement(o,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},this.renderText()),i=ge.a.createElement(o,{contentEditable:!!r&&null},t);return this.debug("render",{props:e}),ge.a.createElement(o,{"data-slate-void":!0,"data-key":n.key,contentEditable:!(!r&&"block"!==n.object)&&null},r?null:a,i)}}]),t}(ge.a.Component);Kt.propTypes={block:be.block,children:ve.a.any.isRequired,editor:ve.a.object.isRequired,node:be.node.isRequired,parent:be.node.isRequired,readOnly:ve.a.bool.isRequired};var qt=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key+" ("+a.type+")";zt.apply(undefined,[t,""+i].concat(r))},this.renderText=function(){var t=e.props,n=t.block,r=t.decorations,o=t.node,a=t.readOnly,i=t.editor,l=o.getFirstText();return ge.a.createElement(Vt,{block:"block"===o.object?o:n,decorations:r,editor:i,key:l.key,node:l,parent:o,readOnly:a})}};function Wt(e,t){var n=Object(te.Set)().asMutable(),r=[];return function(e,t){if(t.isEmpty())return e.nodes.toArray().map(function(e,t){return{child:e,index:t}});var n=Le({},e.key,0),r=1;e.forEachDescendant(function(e){n[e.key]=r,r+=1});var o=e.nodes.toArray(),a=o.map(function(e,t){return{child:e,index:t,order:n[e.key]}});return t.forEach(function(e){var t=n[e.start.key],i=t===undefined?0:function(e,t,n){var r=e.findIndex(function(e){return n<t[e.key]});if(r<=0)return 0;var o=e[r-1];return t[o.key]}(o,n,t);a.push({isRangeStart:!0,order:i-.5,decoration:e});var l=(n[e.end.key]||r)+.5;a.push({isRangeEnd:!0,order:l,decoration:e})}),a.sort(function(e,t){return e.order>t.order?1:-1})}(e,t).forEach(function(e){e.isRangeStart?n.add(e.decoration):e.isRangeEnd?n.remove(e.decoration):r.push(n.toList())}),r}var Xt=s()("slate:node"),Yt=function(e){function t(){var e,n,r;Re(this,t);for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),Gt.call(r),He(r,n)}return $e(t,e),Ne(t,[{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.editor.run("shouldNodeComponentUpdate",t,e),r=e,o=t;if(null!=n){if(n)return!0;Object(Pe.a)(!1!==n,"Returning false in `shouldNodeComponentUpdate` does not disable Slate's internal `shouldComponentUpdate` logic. If you want to prevent updates, use React's `shouldComponentUpdate` instead.")}return r.readOnly!==o.readOnly||(r.node!==o.node||(!(!r.isSelected&&!o.isSelected)||(!(!r.isFocused&&!o.isFocused)||!r.decorations.equals(o.decorations))))}},{key:"render",value:function(){var e=this;this.debug("render",this);var t=this.props,n=t.editor,r=t.isSelected,o=t.isFocused,a=t.node,i=t.decorations,l=t.parent,s=t.readOnly,u=n.value.selection,c=a.getSelectionIndexes(u,r),d=i.concat(a.getDecorations(n)),p=Wt(a,d),f=[];a.nodes.forEach(function(t,n){var r=!!c&&c.start<=n&&n<c.end;f.push(e.renderNode(t,r,p[n]))});var h={"data-key":a.key};a.isLeafBlock()&&("rtl"===a.getTextDirection()&&(h.dir="rtl"));var y={key:a.key,editor:n,isFocused:o,isSelected:r,node:a,parent:l,readOnly:s},g=n.run("renderNode",Be({},y,{attributes:h,children:f}));return n.query("isVoid",a)?ge.a.createElement(Kt,this.props,g):g}}]),t}(ge.a.Component);Yt.propTypes={block:be.block,decorations:Ce.a.list.isRequired,editor:ve.a.object.isRequired,isFocused:ve.a.bool.isRequired,isSelected:ve.a.bool.isRequired,node:be.node.isRequired,parent:be.node.isRequired,readOnly:ve.a.bool.isRequired};var Gt=function(){var e=this;this.debug=function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var a=e.props.node,i=a.key,l=a.type;Xt.apply(undefined,[t,i+" ("+l+")"].concat(r))},this.renderNode=function(t,n,r){var o=e.props,a=o.block,i=o.editor,l=o.node,s=o.readOnly,u=o.isFocused,c="text"===t.object?Vt:Yt;return ge.a.createElement(c,{block:"block"===l.object?l:a,decorations:r,editor:i,isSelected:n,isFocused:u&&n,key:t.key,node:t,parent:l,readOnly:s})}};function Jt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window,n=mt(e.key,t),r=0,o=Array.from(n.querySelectorAll("[data-slate-content], [data-slate-zero-width]")),a=!0,i=!1,l=undefined;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value,d=c.childNodes[0],p=d.textContent.length,f=p;c.hasAttribute("data-slate-length")&&(f=parseInt(c.getAttribute("data-slate-length"),10));var h=r+f;if(e.offset<=h)return{node:d,offset:Math.min(p,Math.max(0,e.offset-r))};r=h}}catch(dn){i=!0,l=dn}finally{try{!a&&u["return"]&&u["return"]()}finally{if(i)throw l}}return null}function Zt(e){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:window,n=e.anchor,r=e.focus,o=e.isBackward,a=e.isCollapsed,i=Jt(n,t),l=a?i:Jt(r,t);if(!i||!l)return null;var s=t.document.createRange(),u=o?l:i,c=o?i:l;return s.setStart(u.node,u.offset),s.setEnd(c.node,c.offset),s}var Qt=["auto","overlay","scroll"],en=W&&!!window.navigator.userAgent.match(/os 11_/i);function tn(e){if(!en&&e.anchorNode){var t=o()(e.anchorNode),n=function(e,t){for(var n=e.parentNode,r=void 0;!r&&n.parentNode;){var o=t.getComputedStyle(n).overflowY;if(Qt.includes(o)){r=n;break}n=n.parentNode}return r||t.document.body}(e.anchorNode,t),r=n===t.document.body||n===t.document.documentElement,a=xe()(e),i=e.getRangeAt(0).cloneRange();i.collapse(a);var l=i.getBoundingClientRect();U&&i.collapsed&&0===l.top&&0===l.height&&(0===i.startOffset?i.setEnd(i.endContainer,1):i.setStart(i.startContainer,i.startOffset-1),0===(l=i.getBoundingClientRect()).top&&0===l.height&&i.getClientRects().length&&(l=i.getClientRects()[0]));var s=void 0,u=void 0,c=void 0,d=void 0,p=0,f=0,h=0,y=0,g=0,m=0,v=0,_=0;if(r){s=t.innerWidth,u=t.innerHeight,c=t.pageYOffset,d=t.pageXOffset}else{var b=n.offsetWidth,w=n.offsetHeight,C=n.scrollTop,P=n.scrollLeft,O=t.getComputedStyle(n),x=O.borderTopWidth,E=O.borderBottomWidth,k=O.borderLeftWidth,D=O.borderRightWidth,S=O.paddingTop,j=O.paddingBottom,M=O.paddingLeft,T=O.paddingRight,A=n.getBoundingClientRect();s=b,u=w,p=A.top+parseInt(x,10),f=A.left+parseInt(k,10),h=parseInt(x,10)+parseInt(E,10),y=parseInt(k,10)+parseInt(D,10),g=parseInt(S,10),m=parseInt(j,10),v=parseInt(M,10),_=parseInt(T,10),c=C,d=P}var F=l.top+c-p,I=l.left+d-f,R=d,N=c;I<d?R=I-v:I+l.width+y>d+s&&(R=I+y+_-s),F<c?N=F-g:F+l.height+h>c+u&&(N=F+h+m+l.height-u),r?t.scrollTo(R,N):(n.scrollTop=N,n.scrollLeft=R)}}var nn=/Permission denied to access property "nodeType"/,rn=s()("slate:content");rn.update=s()("slate:update");var on=function(e){function t(){var e,n,r;Re(this,t);for(var a=arguments.length,i=Array(a),l=0;l<a;l++)i[l]=arguments[l];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.tmp={isUpdatingSelection:!1,isComposing:!1},r.handlers=Ie.reduce(function(e,t){return e[t]=function(e){return r.onEvent(t,e)},e},{}),r.updateSelection=function(){var e=r.props.editor.value.selection,t=e.isBackward,n=o()(r.element),a=n.getSelection(),i=n.document.activeElement;if(rn.enabled&&rn.update("updateSelection",{selection:e.toJSON()}),a){var l=a.rangeCount,s=a.anchorNode,u=!1;if(e.isBlurred&&i===r.element&&(r.element.blur(),u=!0),e.isUnset&&l&&r.isInEditor(s)&&(vt(a),u=!0),e.isFocused&&i!==r.element&&(r.element.focus({preventScroll:!0}),u=!0),e.isFocused&&e.isSet){var c=!!l&&a.getRangeAt(0),d=Zt(e,n);if(!d)return void Object(Pe.a)(!1,"Unable to find a native DOM range from the current selection.");var p=d.startContainer,f=d.startOffset,h=d.endContainer,y=d.endOffset;if(c&&(p===c.startContainer&&f===c.startOffset&&h===c.endContainer&&y===c.endOffset||p===c.endContainer&&f===c.endOffset&&h===c.startContainer&&y===c.startOffset))return;u=!0,r.tmp.isUpdatingSelection=!0,vt(a),a.setBaseAndExtent?t?a.setBaseAndExtent(d.endContainer,d.endOffset,d.startContainer,d.startOffset):a.setBaseAndExtent(d.startContainer,d.startOffset,d.endContainer,d.endOffset):a.addRange(d),tn(a),setTimeout(function(){V&&r.element&&r.element.focus(),r.tmp.isUpdatingSelection=!1})}u&&rn.enabled&&(rn("updateSelection",{selection:e,native:a,activeElement:i}),rn.update("updateSelection-applied",{selection:e}))}},r.ref=function(e){r.element=e},r.isInEditor=function(e){var t=r.element,n=void 0;try{if(8===e.nodeType)return!1;n=3===e.nodeType?e.parentNode:e}catch(dn){if(V&&nn.test(dn.message))return!1;throw dn}return n.isContentEditable&&(n===t||n.closest("[data-slate-editor]")===t)},r.onNativeSelectionChange=ke()(function(e){r.props.readOnly||o()(e.target).document.activeElement===r.element&&r.props.onEvent("onSelect",e)},100),r.renderNode=function(e,t,n){var o=r.props,a=o.editor,i=o.readOnly,l=a.value,s=l.document,u=l.selection.isFocused;return ge.a.createElement(Yt,{block:null,editor:a,decorations:n,isSelected:t,isFocused:u&&t,key:e.key,node:e,parent:s,readOnly:i})},He(r,n)}return $e(t,e),Ne(t,[{key:"componentDidMount",value:function(){o()(this.element).document.addEventListener("selectionchange",this.onNativeSelectionChange),G&&this.element.addEventListener("beforeinput",this.handlers.onBeforeInput),this.updateSelection()}},{key:"componentWillUnmount",value:function(){var e=o()(this.element);e&&e.document.removeEventListener("selectionchange",this.onNativeSelectionChange),G&&this.element.removeEventListener("beforeinput",this.handlers.onBeforeInput)}},{key:"componentDidUpdate",value:function(){rn.update("componentDidUpdate"),this.updateSelection()}},{key:"onEvent",value:function(e,t){var n=this;if(rn("onEvent",e),"onCompositionStart"==e&&(this.tmp.isComposing=!0),"onCompositionEnd"==e&&window.requestAnimationFrame(function(){return n.tmp.isComposing=!1}),!this.tmp.isUpdatingSelection||"onSelect"!==e&&"onBlur"!==e&&"onFocus"!==e){if(!q&&"onSelect"===e&&!this.tmp.isComposing){var r=this.props.editor,a=r.value.selection,i=et(o()(t.target).getSelection(),r);if(i&&i.equals(a.toRange()))return void this.updateSelection()}if("onDragEnd"===e||"onDragEnter"===e||"onDragExit"===e||"onDragLeave"===e||"onDragOver"===e||"onDragStart"===e||"onDrop"===e)if(t.target.closest("[data-slate-editor]")!==this.element)return;("onBeforeInput"!==e&&"onBlur"!==e&&"onCompositionEnd"!==e&&"onCompositionStart"!==e&&"onCopy"!==e&&"onCut"!==e&&"onFocus"!==e&&"onInput"!==e&&"onKeyDown"!==e&&"onKeyUp"!==e&&"onPaste"!==e&&"onSelect"!==e||this.isInEditor(t.target))&&this.props.onEvent(e,t)}}},{key:"render",value:function(){var e=this,t=this.props,n=this.handlers,r=t.id,o=t.className,a=t.readOnly,i=t.editor,l=t.tabIndex,s=t.role,u=t.tagName,c=t.spellCheck,d=i.value,p=u,f=d.document,h=d.selection,y=d.decorations,g=f.getSelectionIndexes(h),m=f.getDecorations(i).concat(y),v=Wt(f,m),_=f.nodes.toArray().map(function(t,n){var r=!!g&&g.start<=n&&n<g.end;return e.renderNode(t,r,v[n])}),b=Be({outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},a?{}:{WebkitUserModify:"read-write-plaintext-only"},t.style);return rn("render",{props:t}),rn.enabled&&rn.update("render",{text:d.document.text,selection:d.selection.toJSON(),value:d.toJSON()}),ge.a.createElement(p,Be({},n,{"data-slate-editor":!0,ref:this.ref,"data-key":f.key,contentEditable:!a||null,suppressContentEditableWarning:!0,id:r,className:o,autoCorrect:t.autoCorrect?"on":"off",spellCheck:c,style:b,role:a?null:s||"textbox",tabIndex:l,"data-gramm":!1}),_)}}]),t}(ge.a.Component);on.propTypes={autoCorrect:ve.a.bool.isRequired,className:ve.a.string,editor:ve.a.object.isRequired,id:ve.a.string,readOnly:ve.a.bool.isRequired,role:ve.a.string,spellCheck:ve.a.bool.isRequired,style:ve.a.object,tabIndex:ve.a.number,tagName:ve.a.string},on.defaultProps={style:{},tagName:"div"};var an=[].concat(Ue(Ie),["commands","decorateNode","queries","renderEditor","renderMark","renderNode","schema"]);function ln(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},t=e.placeholder,n=e.plugins,r=n===undefined?[]:n;var o=[],a=an.reduce(function(t,n){return n in e&&(t[n]=e[n]),t},{});return o.push(Nt({plugins:[a].concat(Ue(r))})),t&&o.push(Te({placeholder:t,when:function(e,t){return"document"===t.object&&""===t.text&&1===t.nodes.size&&1===t.getTexts().size}})),o.push({decorateNode:function(e,t,n){return[]},renderEditor:function(e,t,n){return ge.a.createElement(on,{autoCorrect:e.autoCorrect,className:e.className,editor:t,id:e.id,onEvent:function(e,n){return t.run(e,n)},readOnly:e.readOnly,role:e.role,spellCheck:e.spellCheck,style:e.style,tabIndex:e.tabIndex,tagName:e.tagName})},renderNode:function(e,t,n){var r=e.attributes,o=e.children,a=e.node.object;if("block"!==a&&"inline"!==a)return null;var i="block"===a?"div":"span";return ge.a.createElement(i,Be({},r,{style:{position:"relative"}}),o)}}),o}var sn=s()("slate:editor"),un=function(e){function t(){var e,n,r;Re(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return n=r=He(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.state={value:r.props.defaultValue},r.tmp={mounted:!1,change:null,resolves:0,updates:0},r.resolveController=Fe(function(){Object(Pe.a)(r.tmp.resolves<5||r.tmp.resolves!==r.tmp.updates,"A Slate <Editor> component is re-resolving the `plugins`, `schema`, `commands`, `queries` or `placeholder` prop on each update, which leads to poor performance. This is often due to passing in a new references for these props with each render by declaring them inline in your render function. Do not do this! Declare them outside your render function, or memoize them instead."),r.tmp.resolves++;var e=ln(Be({},r.props,{value:r.props.value||r.state.value}));r.controller=new i.Editor({plugins:[e],onChange:function(e){r.tmp.mounted?r.handleChange(e):r.tmp.change=e}},{controller:r,construct:!1}),r.controller.run("onConstruct")}),He(r,n)}return $e(t,e),Ne(t,[{key:"componentDidMount",value:function(){this.tmp.mounted=!0,this.tmp.updates++,this.props.autoFocus&&this.focus(),this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentDidUpdate",value:function(){this.tmp.updates++,this.tmp.change&&(this.handleChange(this.tmp.change),this.tmp.change=null)}},{key:"componentWillUnmount",value:function(){this.tmp.mounted=!1}},{key:"render",value:function(){sn("render",this);var e=Be({},this.props,{editor:this}),t=e.commands,n=e.placeholder,r=e.plugins,o=e.queries,a=e.schema;this.resolveController(r,a,t,o,n);var i=e.options,l=e.readOnly,s=e.value,u=this.state.value,c=s||u;return this.controller.setReadOnly(l),this.controller.setValue(c,i),this.controller.run("renderEditor",Be({},e,{value:c}))}},{key:"handleChange",value:function(e){var t=this.props.onChange;this.state.value&&this.setState({value:e.value}),t(e)}},{key:"applyOperation",value:function(){var e;return(e=this.controller).applyOperation.apply(e,arguments)}},{key:"command",value:function(){var e;return(e=this.controller).command.apply(e,arguments)}},{key:"hasCommand",value:function(){var e;return(e=this.controller).hasCommand.apply(e,arguments)}},{key:"hasQuery",value:function(){var e;return(e=this.controller).hasQuery.apply(e,arguments)}},{key:"normalize",value:function(){var e;return(e=this.controller).normalize.apply(e,arguments)}},{key:"query",value:function(){var e;return(e=this.controller).query.apply(e,arguments)}},{key:"registerCommand",value:function(){var e;return(e=this.controller).registerCommand.apply(e,arguments)}},{key:"registerQuery",value:function(){var e;return(e=this.controller).registerQuery.apply(e,arguments)}},{key:"run",value:function(){var e;return(e=this.controller).run.apply(e,arguments)}},{key:"withoutNormalizing",value:function(){var e;return(e=this.controller).withoutNormalizing.apply(e,arguments)}},{key:"call",value:function(){var e;return(e=this.controller).call.apply(e,arguments)}},{key:"change",value:function(){var e;return(e=this.controller).change.apply(e,arguments)}},{key:"onChange",value:function(){var e;return(e=this.controller).onChange.apply(e,arguments)}},{key:"applyOperations",value:function(){var e;return(e=this.controller).applyOperations.apply(e,arguments)}},{key:"setOperationFlag",value:function(){var e;return(e=this.controller).setOperationFlag.apply(e,arguments)}},{key:"getFlag",value:function(){var e;return(e=this.controller).getFlag.apply(e,arguments)}},{key:"unsetOperationFlag",value:function(){var e;return(e=this.controller).unsetOperationFlag.apply(e,arguments)}},{key:"withoutNormalization",value:function(){var e;return(e=this.controller).withoutNormalization.apply(e,arguments)}},{key:"operations",get:function(){return this.controller.operations}},{key:"readOnly",get:function(){return this.controller.readOnly}},{key:"value",get:function(){return this.controller.value}},{key:"editor",get:function(){return this.controller.editor}},{key:"schema",get:function(){Object(a.a)(!1,"As of Slate 0.42, the `editor.schema` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}},{key:"stack",get:function(){Object(a.a)(!1,"As of Slate 0.42, the `editor.stack` property no longer exists, and its functionality has been folded into the editor itself. Use the `editor` instead.")}}]),t}(ge.a.Component);un.propTypes=Be({autoCorrect:ve.a.bool,autoFocus:ve.a.bool,className:ve.a.string,defaultValue:be.value,id:ve.a.string,onChange:ve.a.func,options:ve.a.object,placeholder:ve.a.any,plugins:ve.a.array,readOnly:ve.a.bool,role:ve.a.string,schema:ve.a.object,spellCheck:ve.a.bool,style:ve.a.object,tabIndex:ve.a.number,value:be.value},Ie.reduce(function(e,t){return e[t]=ve.a.func,e},{})),un.defaultProps={autoFocus:!1,autoCorrect:!0,onChange:function(){},options:{},placeholder:"",plugins:[],readOnly:!1,schema:{},spellCheck:!0};var cn={Editor:un,cloneFragment:Ct,findDOMNode:mt,findDOMRange:Zt,findNode:Pt,findRange:et,getEventRange:Ot,getEventTransfer:Mt,setEventTransfer:Ft,ReactPlugin:ln};t["default"]=cn},917:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(4)),c=l(n(1230)),d=l(n(920)),p=n(918),f=n(235),h=n(1290),y=n(859),g=l(n(810));window.$;var m=function(e){function t(t){var n=e.call(this,t)||this,r=n.props.searchType;return n.state={searchText:y.getNowSearchText(r)},n}return o(t,e),t.prototype.componentDidMount=function(){g["default"].addChangeListener(this.onChange)},t.prototype.componentWillUnmount=function(){g["default"].removeChangeListener(this.onChange)},t.prototype.onChange=function(){var e=this.props.searchType;this.setState({searchText:y.getNowSearchText(e)})},t.prototype.renderPage=function(e,t){var n=this.props,r=n.isPreview,o=n.isContainer,a=n.isLink,i=[];return function l(e){var t=e.arr,n=e.deep,r=void 0===n?0:n,o=e.idx,a=void 0===o?"":o,i=e.domArr,u=e.searchText,d=e.searchShowKeyArr,h=e.isPreview,y=e.isContainer,g=e.isLink,m=e.clickFunc,v=e.selectKey,_=e.selectArr;t.forEach(function(e,t){if(e){var n=e.pageHierarchy,o=e.id,b=e.isFold;if(!d||-1!=d.indexOf(o)){var w=a+t,C=!y&&!h&&p.isStructSelect(w,_),P=y?v==o:-1!=_.indexOf(o);if(i.push(s["default"].createElement(c["default"],{data:e,key:o,isCurrent:o==v,isSelect:P,isDeepColor:i.length%2==1,isParentSelect:C,idx:w,deep:r,searchText:u,searchShowKeyArr:d,isPreview:h,isLink:g,isContainer:y,clickFunc:y&&m?m:undefined})),n&&n.length&&!b){var O=r+1,x=w+"|";l({arr:y&&!g?n:f.getPrdAllStructDataArr(n),deep:O,idx:x,domArr:i,searchText:u,searchShowKeyArr:d,isPreview:h,isLink:g,isContainer:y,clickFunc:m,selectKey:v,selectArr:_})}}}})}({arr:n.arr,domArr:i,searchText:e,searchShowKeyArr:t,isPreview:r,isContainer:o,isLink:a,clickFunc:n.clickFunc,selectKey:n.selectKey,selectArr:n.selectArr}),{domArr:i}},t.prototype.render=function(){var e=this.props,t=e.isContainer,n=e.isLink,r=e.showArr,o=this.state.searchText,a=h.getAllSearchShowKeyArr({searchTitle:o,arr:r}),i=this.renderPage(o,a).domArr;return s["default"].createElement("div",{className:"prd-page-list"},i,i.length||!t&&!n?undefined:s["default"].createElement(d["default"],null))},a([u["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"onChange",null),a([u["default"],i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],t.prototype,"renderPage",null),t}(s["default"].Component);t["default"]=m},918:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=window,a=o.$,i=o.isMac,l=r(n(38)),s=r(n(96)),u=n(235),c=n(985),d=n(797),p=n(858),f=p.structBaseVal.DOMHEIGHT,h=p.structBaseVal.ONEDEEPWIDTH,y=p.structBaseVal.BASEDEEPLEFT,g=p.structBaseVal.DOMPADDING;function m(e){var t=!0,n="",r=0,o=e.split("|");return o.length>1&&(t=!1,r=o[o.length-1],o.length=o.length-1,n=o.join("|")),{isFirstDeep:t,deepTestStr:n,deepVal:r}}function v(e,t,n){var r,o=!0,i=a('.drag-page-comp[data-id="'+e+'"]')[0];if(i){var l=i.getAttribute("data-idx");if(-1!=n.indexOf(e))o=!1;else{var s=a(".drag-page-comp.current-page-comp"),c=m(s[0].getAttribute("data-idx")),d=c.isFirstDeep,p=c.deepTestStr,f=c.deepVal,h=function(e){var t=e.domArr,n=e.isFirstDeep,r=e.deepTestStr,o=e.deepVal,a=!0,i=[];return t.forEach(function(e,t){var l=e.getAttribute("data-idx"),s=e.getAttribute("data-id");if(i.push(s),t>0){var u=m(l),c=u.isFirstDeep,d=u.deepTestStr,p=u.deepVal;c!=n?a=!1:d!=r?a=!1:p-o!=t&&(a=!1)}}),{isOrderArr:a,idArr:i}}({domArr:s,isFirstDeep:d,deepTestStr:p,deepVal:f}),y=h.isOrderArr;if(r=h.idArr,y){var g=m(l),v=g.isFirstDeep,_=g.deepTestStr,b=g.deepVal;if("top"==t)v==d&&p==_&&b==f+s.length&&(o=!1);else if("inner"==t){var w=r[r.length-1],C=a('.drag-page-comp[data-id="'+w+'"]')[0];if(C){var P=C.getAttribute("data-idx"),O=u.findAllParentByIdx({idx:P}),x=u.findStructInHierarchy({structId:w});x.indexOf(w)==x.length-1&&O[O.length-1]==e&&(o=!1)}else o=!1}else if("bottom"==t){v==d&&p==_&&b+1==f&&(o=!1)}}}}else o=!1;return{allowExchange:o,idArr:r}}function _(e,t,n){var r,o,s,c=e.metaKey,p=e.ctrlKey,f=e.shiftKey,h=e.button,y=e.currentTarget,g=i?c:p,m=!1,v="",_=l["default"].getSelectStructKey(),b=a.extend(!0,[],l["default"].getSelectStructArr()),w=a.extend(!0,[],l["default"].getTemporarySelectArr()),C=l["default"].getAllSelectArr(),P=-1!=y.className.indexOf("is-parent-select"),O=y.getAttribute("data-idx");if(g){if(P)return{needClear:m};var x=b.indexOf(t),E=w.indexOf(t);_!=t&&(-1==x&&-1==E?(r=_,s=O,(o=C).forEach(function(e,t){if(r!=e){var n=a('.drag-page-comp[data-id="'+e+'"]')[0];n&&n.getAttribute("data-idx").slice(0,s.length)==s&&o.splice(t,1)}}),b.push(t)):-1!=x?b.splice(x,1):w.splice(E,1)),l["default"].setTemporarySelectArr(w,!0),l["default"].setSelectStructArr(b)}else if(f){var k=[],D=_;-1==b.indexOf(_)&&(D=b[b.length-1]);var S=u.findStructInHierarchy({structId:D}),j=u.findStructInHierarchy({structId:t});if(S[0]==j[0]){var M=S.indexOf(t),T=(x=S.indexOf(D),Math.min(M,x)),A=Math.max(M,x);S.forEach(function(e,t){var n=b.indexOf(e);t>=T&&t<=A&&(k.push(e),-1!=n&&D!=e&&b.splice(n,1))})}else{var F=a('.drag-page-comp[data-id="'+_+'"]')[0],I=a('.drag-page-comp[data-id="'+t+'"]')[0];if(F&&I){var R=F.getAttribute("data-idx"),N=function(e,t){var n="down",r=!1;return e.some(function(e,o){var a=parseInt(e),i=t[o];if(!i)return n="up",r=!0,!0;var l=parseInt(i);return a>l?(n="up",!0):a<l&&(n="down",!0)}),{direction:n,selectParent:r}}(R.split("|"),(M=I.getAttribute("data-idx")).split("|")),L=N.direction,B=N.selectParent,$=function(e){var t,n,r,o,a=e.direction,i=e.selectKeyIdx,l=e.currentIdx,s=e.id,c=e.selectStructKey,d=!1;"down"==a?(n=i,r=l,o=s):(n=l,r=i,o=c),t=u.findAllParentByIdx({idx:r});var p=u.findStructInHierarchy({structId:o});return p.indexOf(o)==p.length-1&&(d=!0),{allParentArr:t,isAllSelect:d,startIdx:n,endIdx:r}}({direction:L,selectKeyIdx:R,currentIdx:M,id:t,selectStructKey:_}),H=$.startIdx,V=$.endIdx,U=$.isAllSelect,z=$.allParentArr,K=a(".drag-page-comp"),q=!1;K.forEach(function(e){var t=e.getAttribute("data-idx"),n=e.getAttribute("data-id"),r=b.indexOf(n);t==H?q=!0:t==V&&(k.push(n),-1!=r&&_!=n&&b.splice(r,1),q=!1),q&&(U||B?k.push(n):-1==z.indexOf(n)&&k.push(n))})}}l["default"].setTemporarySelectArr(k,!0),l["default"].setSelectStructArr(b)}else{-1!=C.indexOf(t)?(0==h&&(m=!0),_!=t&&"folder"!=n&&l["default"].setSelectStructKey(t),_!=t&&-1==b.indexOf(t)||"folder"!=n||(v=t)):(a(".prd-content-panel")[0].scrollTop=0,d.elementDeselect(),l["default"].setTemporarySelectArr([],!0),"folder"!=n&&l["default"].setSelectStructKey(t,!0),l["default"].setSelectStructArr([t]))}return{needClear:m,saveId:v}}function b(e,t,n){var r=a.extend(!0,[],l["default"].getStructHierarchy());if(e.forEach(function(e){var t=u.findStructInHierarchy({structId:e,parentHierarchy:r}),n=t.indexOf(e);t.splice(n,1)}),"inner"!=n){var o=u.findStructInHierarchy({structId:t,parentHierarchy:r}),i=o.indexOf(t)+("top"==n?0:1);e.forEach(function(e){o.splice(i,0,e),i+=1})}else{var d=s["default"].getPrdStructById(t),p=d.pageHierarchy,f=d.isFold;f&&c.changeValById({key:"isFold",val:!f,id:t,noEmit:!0}),e.forEach(function(e){p.push(e)})}l["default"].setStructHierarchy(r)}function w(e,t){var n=e.split("|"),r=!1;n.length=n.length-1;var o=l["default"].getStructHierarchy();return n.some(function(e,n){var a=o[e];if(-1!=t.indexOf(a))return r=!0,!0;var i=s["default"].getPrdStructById(a).pageHierarchy;return o=i,!1}),r}function C(e,t,n,r){var o="",i=r,u="",c=-1,d="";if("inner"==(d="page"==n?t>f/2?"bottom":"top":t<f/3?"top":t<f/3*2?"inner":"bottom"))o=i,u=d;else{var p=a('.drag-page-comp[data-id="'+i+'"]')[0];if(p){var m=function(e,t){var n,r,o=!1,i=!1;"top"==t?((n=a(e).prev()[0])||(o=!0),r=e):(n=e,(r=a(e).next()[0])||(i=!0));var l=P(n);return{topId:o?"":n.getAttribute("data-id"),topIdx:o?"":n.getAttribute("data-idx"),bottomId:i?"":r.getAttribute("data-id"),bottomIdx:i?"":r.getAttribute("data-idx"),isFirstDom:o,isEndDom:i,isChild:!l}}(p,d),v=m.topId,_=m.topIdx,b=m.bottomId,w=m.bottomIdx,C=m.isFirstDom,O=m.isEndDom,x=m.isChild;if(C)o=i,u="top";else{var E=void 0,k=void 0,D=!1;if(O)E=0,k=_.split("|").length-1,"page"!=n&&(k+=1,D=!0);else{var S=w.split("|").length-1,j=_.split("|").length-1;if(S>j)o=b,u="top",c=S,d="top",i=b;else if(S<j){E=S,k=j,x&&(k=E),"page"!=s["default"].getPrdStructById(v).type&&(k+=1,D=!0)}else o=v,u="bottom",c=S,d="bottom",i=v}if(!a.isUndefined(E)&&!a.isUndefined(k)){var M=function(e,t){for(var n=[],r=e;r<=t;r++)n.push(r);return n}(E,k),T=_.split("|"),A=l["default"].getStructHierarchy();u="bottom",M.some(function(t,n){var r=T[n];A&&A.length&&(o=A[r]);var a=s["default"].getPrdStructById(o).pageHierarchy;return A=a,c=t,n==M.length-1&&D&&(u="inner"),e-g<t*h+y})}}}}return{targetId:o,targetPosi:u,lineId:i,linePosi:d,lineDeep:c}}function P(e){var t=!0,n=!1,r=a(".drag-page-comp"),o=r[r.length-1].getAttribute("data-idx");if(e){var i=e.className,l=e.getAttribute("data-idx");["current-page-comp","is-parent-select"].some(function(e){return-1!=i.indexOf(e)&&("current-page-comp"==e&&l==o&&-1!=l.indexOf("|")?(n=!0,!1):(t=!1,!0))})}else t=!1;return{isVaild:t,isLast:n}}t.testAllowExchange=v,t.changeSelectStruct=_,t.exchangePage=b,t.isStructSelect=w,t.getMouseEndTarget=C,t.testIsVaild=P,t["default"]={exchangePage:b,changeSelectStruct:_,testAllowExchange:v,isStructSelect:w,getMouseEndTarget:C,testIsVaild:P}},919:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(38)),a=n(918),i=n(1286),l=n(797),s=n(828),u=n(342),c=r(n(198)),d=r(n(96)),p=r(n(827)),f=window.$,h=n(10)["default"];function y(e){var t=e.currentTarget,n=t.getAttribute("data-id"),r=t.getAttribute("data-ispreview"),i=d["default"].getPrdStructById(n).type;if(r){if("folder"==i){var l=f(t).find(".has-child-icon")[0];return void f(l).mousedown()}return o["default"].setSelectStructArr([n],!0),void o["default"].setSelectStructKey([n])}var c=e.clientX,y=e.clientY,g=!1,m=a.changeSelectStruct(e,n,i),v=m.needClear,_=m.saveId;s.initDragChangePosi({autoChangeFunc:function(e){var t=f(".prd-page-list")[0],n=f.offset(t,!0).top;return u.getDragScrollRatio(e,!0,n)},arriveCriticalFunc:function(){var e=p["default"].getDragChangePosiSet().ratio,t=f(".prd-page-list")[0].scrollTop,n=t<=0&&-1==e;return n||(f(".prd-page-list")[0].scrollTop=Math.max(t+20*e,0)),n}}),f.setDrag({name:"moveComment",posi:[c,y],target:e.target,moveFunc:function(e){g||(g=!0,o["default"].setIsDraging(!0))},endFunc:function(e){s.endDragChangePosi();var t=o["default"].getDragOption(),n=t.targetId,r=t.targetPosi,i=o["default"].getAllSelectArr(),l=o["default"].getSelectStructKey();if(g){o["default"].setDragOption({targetId:"",targetPosi:"",lineId:"",linePosi:"",lineDeep:-1},!0),o["default"].setIsDraging(!1,!0),o["default"].setMoveOption({x:null,y:null});var u=a.testAllowExchange(n,r,i),c=u.allowExchange,d=u.idArr;c&&(a.exchangePage(d,n,r),h.createData({type:"exchangePrdPosi",name:"PRD 交换目录位置",autoSaveType:"prd"}))}else v&&(o["default"].setTemporarySelectArr([],!0),_?o["default"].setSelectStructArr([_]):o["default"].setSelectStructArr([l]))}})}function g(e){e.stopPropagation(),e.preventDefault();var t=e.currentTarget.getAttribute("data-ispreview"),n=e.currentTarget.getAttribute("data-iscontainer");if(!t&&!n){var r=o["default"].getAllSelectArr(),a=e.currentTarget.getAttribute("data-id"),s=i.getContentArr(r.length,a);c["default"].rightMenuUpdate({left:e.clientX,top:e.clientY,content:s}),l.elementDeselect()}}function m(e,t){var n,r=e.target,o=r.className,a=f.extend(!0,[],t);if(!(n=-1==o.indexOf("drag-page-comp")?f(r).parents(".drag-page-comp")[0]:r))return a;var i,l=n.getAttribute("data-idx"),s=a;l.split("|").forEach(function(e,t){var n=(i=f.isString(s[e])?d["default"].getPrdStructById(s[e]):s[e]).pageHierarchy;s=n});var u=i.isFold;return f.isUndefined(u)||(i.isFold=!u),a}t.handleMouseDown=y,t.handleContextMenu=g,t.handleChangeFoldData=m,t["default"]={handleMouseDown:y,handleContextMenu:g,handleChangeFoldData:m}},920:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=(window.$,function(e){function t(t){var n=e.call(this,t)||this;return n.state={notFind:!1},n}return o(t,e),t.prototype.render=function(){return i["default"].createElement("div",{className:"prd-result-not-find-panel"},i["default"].createElement("div",{className:"not-find-icon"}),i["default"].createElement("div",{className:"not-find-text"},"无搜索结果"))},t}(i["default"].Component));t["default"]=l},921:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.text,n=e.top,r=void 0===n?0:n,o=e.type,a=void 0===o?"":o;return i["default"].createElement("div",{className:l["default"]("prd-head-tips-panel",{"is-web":"webView"==a})},i["default"].createElement("p",{style:{marginTop:r},className:"tips-text"},"为提升文档流畅度，此图暂显示为示意图，预览时显示为实际",t))},t}(i["default"].Component);t["default"]=s},922:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(30)),a=n(831);t.PrdEditElementMove=function(e,t){o["default"].updateValById({id:t,updateVal:{isEdit:!1}}),a.dragElementCoverMove(e)}},949:function(e,t,n){"use strict";t.atob=self.atob.bind(self),t.btoa=self.btoa.bind(self)},950:function(e,t,n){"use strict";var r=n(3),o="<<anonymous>>",a={listOf:function(e){return u(e,"List",r.List.isList)},mapOf:function(e,t){return c(e,t,"Map",r.Map.isMap)},orderedMapOf:function(e,t){return c(e,t,"OrderedMap",r.OrderedMap.isOrderedMap)},setOf:function(e){return u(e,"Set",r.Set.isSet)},orderedSetOf:function(e){return u(e,"OrderedSet",r.OrderedSet.isOrderedSet)},stackOf:function(e){return u(e,"Stack",r.Stack.isStack)},iterableOf:function(e){return u(e,"Iterable",r.Iterable.isIterable)},recordOf:function(e){return l(function(t,n,o,a,l){for(var s=arguments.length,u=Array(s>5?s-5:0),c=5;c<s;c++)u[c-5]=arguments[c];var d=t[n];if(!(d instanceof r.Record)){var p=i(d),f=a;return new Error("Invalid "+f+" `"+l+"` of type `"+p+"` supplied to `"+o+"`, expected an Immutable.js Record.")}for(var h in e){var y=e[h];if(y){var g=d.toObject(),m=y.apply(undefined,[g,h,o,a,l+"."+h].concat(u));if(m)return m}}})},shape:p,contains:p,mapContains:function(e){return d(e,"Map",r.Map.isMap)},list:s("List",r.List.isList),map:s("Map",r.Map.isMap),orderedMap:s("OrderedMap",r.OrderedMap.isOrderedMap),set:s("Set",r.Set.isSet),orderedSet:s("OrderedSet",r.OrderedSet.isOrderedSet),stack:s("Stack",r.Stack.isStack),seq:s("Seq",r.Seq.isSeq),record:s("Record",function(e){return e instanceof r.Record}),iterable:s("Iterable",r.Iterable.isIterable)};function i(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":e instanceof r.Iterable?"Immutable."+e.toSource().split(" ")[0]:t}function l(e){function t(t,n,r,a,i,l){for(var s=arguments.length,u=Array(s>6?s-6:0),c=6;c<s;c++)u[c-6]=arguments[c];return l=l||r,a=a||o,null!=n[r]?e.apply(undefined,[n,r,a,i,l].concat(u)):t?new Error("Required "+i+" `"+l+"` was not specified in `"+a+"`."):void 0}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function s(e,t){return l(function(n,r,o,a,l){var s=n[r];if(!t(s)){var u=i(s);return new Error("Invalid "+a+" `"+l+"` of type `"+u+"` supplied to `"+o+"`, expected `"+e+"`.")}return null})}function u(e,t,n){return l(function(r,o,a,l,s){for(var u=arguments.length,c=Array(u>5?u-5:0),d=5;d<u;d++)c[d-5]=arguments[d];var p=r[o];if(!n(p)){var f=l,h=i(p);return new Error("Invalid "+f+" `"+s+"` of type `"+h+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}if("function"!=typeof e)return new Error("Invalid typeChecker supplied to `"+a+"` for propType `"+s+"`, expected a function.");for(var y=p.toArray(),g=0,m=y.length;g<m;g++){var v=e.apply(undefined,[y,g,a,l,s+"["+g+"]"].concat(c));if(v instanceof Error)return v}})}function c(e,t,n,r){return l(function(){for(var o=arguments.length,a=Array(o),i=0;i<o;i++)a[i]=arguments[i];return u(e,n,r).apply(undefined,a)||t&&(s=t,l(function(e,t,n,r,o){for(var a=arguments.length,i=Array(a>5?a-5:0),l=5;l<a;l++)i[l-5]=arguments[l];var u=e[t];if("function"!=typeof s)return new Error("Invalid keysTypeChecker (optional second argument) supplied to `"+n+"` for propType `"+o+"`, expected a function.");for(var c=u.keySeq().toArray(),d=0,p=c.length;d<p;d++){var f=s.apply(undefined,[c,d,n,r,o+" -> key("+c[d]+")"].concat(i));if(f instanceof Error)return f}})).apply(undefined,a);var s})}function d(e){var t=arguments[1]===undefined?"Iterable":arguments[1],n=arguments[2]===undefined?r.Iterable.isIterable:arguments[2];return l(function(r,o,a,l,s){for(var u=arguments.length,c=Array(u>5?u-5:0),d=5;d<u;d++)c[d-5]=arguments[d];var p=r[o];if(!n(p)){var f=i(p);return new Error("Invalid "+l+" `"+s+"` of type `"+f+"` supplied to `"+a+"`, expected an Immutable.js "+t+".")}var h=p.toObject();for(var y in e){var g=e[y];if(g){var m=g.apply(undefined,[h,y,a,l,s+"."+y].concat(c));if(m)return m}}})}function p(e){return d(e)}e.exports=a},954:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,o=l(n(1191)),a=l(n(1268)),i=l(n(1269));function l(e){return e&&e.__esModule?e:{"default":e}}(r=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).enterModule)&&r(e);var s,u,c=void 0,d=void 0,p={},f={},h=[],y=[],g=null,m={},v=["leftMenu","rightMenu","leftNav","rightNav"],_=["leftMenuBack","rightMenuBack","leftNavBack","rightNavBack"],b={setUpdateFunc:function(e,t){d=e,c=t},getEventType:function(e){return{tA:"tap",dT:"doubletap",hV:"hover",sH:"swipeH",sV:"swipeV",sL:"swipeleft",sR:"swiperight",sT:"swipeup",sD:"swipedown",tM:"timer"}[e]},setEvents:function(e){var t=[],n={},r=void 0,a=!1;if($.isAdvancedAllContr(e.type)&&e.childrenIndex)return b.setAdvancedContrEvents(e),!1;for(var i in e.events)e.events[i].disable||(r=i,"tM"==i?(a=!0,b.isParentMoving(e.updateParent)||function(){var n=e.events[i];t[t.length]=setTimeout(function(){b.triggerActions(n.actions,{pageIndex:e.pageIndex,pageKey:e.pageKey,targetId:e.targetId,symbolParent:e.symbolParent})},100*n.delay)}()):"hV"==i?function(){var t=e.events[i],n=b.getContrSelector(e);n.on("mouseenter",function(){b.triggerActions(t.actions,{pageIndex:e.pageIndex,pageKey:e.pageKey,targetId:e.targetId,symbolParent:e.symbolParent,eventType:"mouseenter"})}),n.off("mouseleave").on("mouseleave",function(){b.triggerActions(t.actions,{pageIndex:e.pageIndex,pageKey:e.pageKey,targetId:e.targetId,symbolParent:e.symbolParent,eventType:"mouseleave"})})}():function(){var t,r,a=b.getContrSelector(e)[0],l=(0,o["default"])(new window.Hammer(a,{touchAction:"auto"})),s=e.events[i].actions,u=b.getEventType(i);-1!==["swipeV","swipedown","swipeup"].indexOf(u)&&l.get("swipe").set({direction:window.Hammer.DIRECTION_VERTICAL}),"swipeH"!=u&&"swipeV"!=u||(u="swipe"),r=s,n[t=u]={hammertime:l,func:function(t){$.hasClass(a,"moving")&&$.isUndefined($(a).attr("data-prevstate"))||b.triggerActions(r,{pageIndex:e.pageIndex,pageKey:e.pageKey,targetId:e.targetId,symbolParent:e.symbolParent}),t.stopPropagation(),t.preventDefault()}},l.on(t,n[t].func)}());if(r){var l='<div class="gesture-tag">'+("tA"==r?"":"<img src='"+window.staticUrl+window.gestureImg[r]+"'/>")+"</div>";b.getContrSelector(e).append(l).addClass("event-show "+r)}return h=h.concat(t),b.saveTmEventData(e,a),{timers:t,eventHammers:n,eTypeClass:r}},setAdvancedContrEvents:function(e){var t=(e.symbolParent?e.symbolParent.join("|")+"~":"")+e.targetId+"~"+e.childrenIndex.join("|");window.advancedContrEvents&&(window.advancedContrEvents[t]=function(){b.triggerActions(e.events.tA.actions,{pageIndex:e.pageIndex,pageKey:e.pageKey,targetId:e.targetId,symbolParent:e.symbolParent})})},saveTmEventData:function(e,t){!m[e.pageKey]&&t&&(m[e.pageKey]={}),t?m[e.pageKey][e.targetId]=!0:m[e.pageKey]&&m[e.pageKey][e.targetId]&&delete m[e.pageKey][e.targetId],m[e.pageKey]&&0===$.objLength(m[e.pageKey])&&delete m[e.pageKey]},triggerActions:function(e,t){if($.query(".mode-btn-mark.active"))return!1;var n=[];$(".current .event-show").removeClass("animating"),$(window).resize(),e.forEach(function(e){if("state"==e.type){var r=void 0,o=void 0;if(t.symbolParent)for(var l=t.symbolParent.length;l>0;l--){var s=$("#"+t.symbolParent.slice(0,l).join(" #")).find("."+e.contr);if(s){r=s,o=t.symbolParent.slice(0,l);break}}else r=$("#"+e.contr);var u=e.endState,d=+r.attr("data-state"),y=e.contr;if(o&&(y=o.join("_")+"_"+e.contr),"mouseleave"==t.eventType){var g=r.attr("data-prevstate");if(d!=u&&d!=g)return!1;u=g}if(u==d||r.attr("data-nextstate")==u)return f[y]&&u==d&&b.killTimeline({contrId:e.contr,endState:d,pageIndex:t.pageIndex,timelineContrId:y,contr:r}),!1;if("mouseenter"==t.eventType&&r.attr("data-prevstate",d),!1===e.animOn)c({contrId:e.contr,state:u,pageIndex:t.pageIndex,parentArr:b.getParentArr(r)});else{f[y]&&(b.killTimeline({contrId:e.contr,endState:u,pageIndex:t.pageIndex,timelineContrId:y,contr:r}),d=u);var m=a["default"].getTimeline(y,d,u);m||(m=i["default"].getTimeline({contrId:e.contr,curr:d,next:u,symbolParent:o}),a["default"].setTimeline(y,d,u,m)),"disabled"==m?c({contrId:e.contr,state:u,pageIndex:t.pageIndex}):"noChange"==m?c({contrId:e.contr,state:u,pageIndex:t.pageIndex,parentArr:b.getParentArr(r)}):(f[y]=m,r.addClass("moving").attr("data-nextstate",u),n.push(m),p[e.contr]=!0,m.eventCallback("onComplete",function(){r.removeAttr("data-nextstate"),c({contrId:e.contr,state:u,pageIndex:t.pageIndex,parentArr:b.getParentArr(r)}),delete f[y],p[e.contr]&&delete p[e.contr]}))}}else if("page"==e.type){var v=$.isUndefined(e.delay)?0:e.delay,_=setTimeout(function(){b.goToPage({curr:t.pageKey,next:e.page,transition:e.transition,time:e.time,distance:e.distance,reset:e.reset})},100*v);h=h.concat(_)}}),n.forEach(function(e){e.play(0)})},goToPage:function(e){if(e.next==e.curr&&!e.reset||$("#page"+e.curr).hasClass("moving")||-1==e.next&&0===y.length||g==e.curr)return!1;var t=$("#page"+e.curr),n=void 0,r=$("#pageContainer"),a=e.next==e.curr;if(b.completeTimeline(),a&&(e.transition="empty"),-1==e.next){var i=y[y.length-1],l=$.isUndefined(e.transition)||"default"==e.transition;n=!0,e.next=i.page,e.transition=l?i.transition:e.transition,e.distance=l?i.distance:e.distance,y.pop()}$(".page.prev").removeClass("prev"),t.removeClass("current").addClass("prev"),t[0].style.animationDuration="";var s=$("#page"+e.next).addClass("current");s[0].style.animationDuration="";var u=t.attr("data-islandscape")!=s.attr("data-islandscape");if(r.attr("class","pageContainer"),e.transition&&"empty"!=e.transition&&"0"!=e.time?(r.addClass("mobile-"+$.humpToHythen(e.transition)+" page-animating"),-1==v.indexOf(e.transition)&&-1==_.indexOf(e.transition)||$.isUndefined(e.distance)||($.setKeyframes(e.transition,e.distance),r.addClass("mobile-"+$.humpToHythen(e.transition)+"-"+$.getDistance(e.distance))),$.isUndefined(e.time)||(t.css("animationDuration",100*e.time+"ms"),s.css("animationDuration",100*e.time+"ms")),t.addClass("moving").on("webkitAnimationEnd",function(){t.off("webkitAnimationEnd"),b.resetPage({currPageDom:t,nextPageDom:s,transition:e.transition,curr:e.curr,next:e.next})}),s.addClass("moving").on("webkitAnimationEnd",function(){s.off("webkitAnimationEnd"),b.resetPage({currPageDom:t,nextPageDom:s,transition:e.transition,curr:e.curr,next:e.next})})):b.resetPage({currPageDom:t,nextPageDom:s,curr:e.curr,next:e.next}),-1!=v.indexOf(e.transition)){var c=(0,o["default"])(new window.Hammer($.getElById("pageMask"),{touchAction:"auto"}));c.on("tap",function t(n){var r=b.goToPage({curr:e.next,next:-1,transition:"default",time:e.time,distance:e.distance});$.isUndefined(r)&&c.off("tap",t),n.stopPropagation()})}n||a||(y.length>0&&-1!=_.indexOf(y[y.length-1].transition)?y[y.length-1].transition="empty":y.push({page:e.curr,transition:$.transitionReverse(e.transition),distance:$.isUndefined(e.distance)?undefined:e.distance}));a||(g=e.curr),b.setPageInfo({curr:e.curr,next:e.next,notToparent:e.notToparent,reset:e.reset,nextPageDom:s}),e.transition&&"empty"!=e.transition&&(window.fixedData&&window.fixedData[e.curr]&&b.correctFixedContr(t),window.fixedData&&window.fixedData[e.next]&&b.correctFixedContr(s)),u&&window.initResize()},setPageInfo:function(e){var t=b.getPageIndex(e.curr),n=b.getPageIndex(e.next);window.pages[t].active=!1,window.pages[n].active=!0,e.reset&&(e.nextPageDom[0].scrollTop=0),d(n,e.reset),e.notToparent||window.setPreviewActivePage&&window.setPreviewActivePage(t,n)},resetPage:function(e){e.currPageDom.removeClass("moving"),e.nextPageDom.removeClass("moving"),-1==v.indexOf(e.transition)&&($("#pageContainer").attr("class","pageContainer"),e.transition&&(window.fixedData&&window.fixedData[e.curr]&&b.correctFixedContr(e.currPageDom,!0),window.fixedData&&window.fixedData[e.next]&&b.correctFixedContr(e.nextPageDom,!0)))},getPageIndex:function(e){var t=void 0;return window.pages.some(function(n,r){return n.key==e&&(t=r),n.key==e}),t},correctFixedContr:function(e,t){var n=e[0].scrollTop;e.find(".fixed").each(function(){var e=$(this);if(t)e.css({top:"",bottom:""}),window.isLocal&&e.css({left:""}),e.removeClass("correct-fixed");else{var r=$(this)[0].offsetTop,o=e.hasClass("correct-fixed")?0:n;e.addClass("correct-fixed"),window.isLocal?e.css({left:$(this).attr("data-ori-left"),top:+$(this).attr("data-ori-top")+o,bottom:0}):e.css({top:o+r,bottom:0})}})},offEvents:function(e){var t=b.getContrSelector(e);for(var n in e.eventHammers){var r=e.eventHammers[n];r.hammertime.off(n,r.func)}t.attr("data-prevstate")&&t.off("mouseenter"),$.isAdvancedAllContr(e.type)||t.removeAttr("style"),t.removeClass("event-show "+e.eTypeClass).children(".gesture-tag").remove(),"text"==e.type&&t.find("p").removeAttr("style"),"wrapbox"==e.type&&t.find(".insetBorder").removeAttr("style"),t.find(".outerBorderBox")&&t.find(".outerBorderBox").removeAttr("style"),e.timers.forEach(function(e){clearTimeout(e)})},completeTimeline:function(){for(var e in f)f[e].progress(1);h.forEach(function(e){clearTimeout(e)}),h=[]},killTimeline:function(e){e.contr.removeAttr("data-nextstate"),f[e.timelineContrId].kill(),c({contrId:e.contrId,state:e.endState,pageIndex:e.pageIndex,parentArr:b.getParentArr(e.contr)}),delete f[e.timelineContrId]},isParentMoving:function(e){if(!e)return!1;for(var t in p)if(-1!=e.indexOf(t))return!0;return!1},hasTmEvents:function(e){return!!m[e]},getContrSelector:function(e){var t=void 0,n="";return e.symbolParent?(t=e.symbolParent.concat()).push(e.targetId):t=[e.targetId],t.forEach(function(e){n+="#"+e+" "}),$(n)},advanceContrDomLevel:function(e){var t=[];switch(e){case"menu":t=["li","li","li","li"];break;case"dropdown":t=["li"]}return t},getParentArr:function(e){var t=[];return e.parents(".cDiv, .mDiv").forEach(function(e){t.push(e.id)}),0==t.length?null:t.reverse()}},w=b;t["default"]=w,(s=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0))["default"])&&(s.register(c,"UpdateContrFunc","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(d,"UpdatePageFunc","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(p,"ChangingContr","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(f,"RunningTimeline","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(h,"RunningTimer","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(y,"PageHistory","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(g,"PrevPage","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(m,"pageContrTm","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(v,"EFFECTARR","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(_,"BACKEFFECTARR","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(b,"EventHandle","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js"),s.register(w,"default","/Users/liniuniu/project/xiaopiu-team/browser/src/mobileJs/handle/EventHandle.js")),(u=("undefined"!=typeof reactHotLoaderGlobal?reactHotLoaderGlobal:n(0)).leaveModule)&&u(e)}).call(this,n(7)(e))},981:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.allListDeepArr=["num-list-1","num-list-2","num-list-3","num-list-4","num-list-5","num-list-6","unordered-list-1","unordered-list-2","unordered-list-3","unordered-list-4","unordered-list-5","unordered-list-6"],t.numListDeepArr=["num-list-1","num-list-2","num-list-3","num-list-4","num-list-5","num-list-6"],t.unorderedListDeepArr=["unordered-list-1","unordered-list-2","unordered-list-3","unordered-list-4","unordered-list-5","unordered-list-6"],t.fontSizeArr=["heading-one","heading-two","heading-three","heading-four","heading-five"],t.titleNameArr=["标题 1","标题 2","标题 3","标题 4","标题 5"],t.textAlignArr=["left","center","right","justify"],t.listFontSizeArr=[24,22,20,18,16],t["default"]={allListDeepArr:t.allListDeepArr,numListDeepArr:t.numListDeepArr,unorderedListDeepArr:t.unorderedListDeepArr,fontSizeArr:t.fontSizeArr,textAlignArr:t.textAlignArr,listFontSizeArr:t.listFontSizeArr}},985:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(96));function a(e){var t,n=e.key,r=e.val,a=e.id,i=e.noEmit,l=void 0!==i&&i;o["default"].getPrdStructById(a)&&o["default"].updateValById({id:a,updateVal:(t={},t[""+n]=r,t),noEmit:l})}t.changeValById=a,t["default"]={changeValById:a}},995:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(913)),i=o(n(38)),l=n(33),s=o(n(236)),u=5,c=100,d=["xLeft","xMiddle","xRight"],p=["yTop","yMiddle","yBottom"];function f(e){var t=e.dragPosi,n=e.otherPosi,r=e.saveAdhereObj,o=e.dragLineKeyObj,a=void 0===o?undefined:o,i=h({posi:t}),l=h({posi:n}),s=r,c=s.x,f=s.y;[[a&&a.x?[a.x]:d,d,c,"x"],[a&&a.y?[a.y]:p,p,f,"y"]].forEach(function(e){var t=e[0],n=e[1],r=e[2],o=e[3];t.forEach(function(e){var t=i[e];n.forEach(function(n){var a=function(e){var t=u;for(var n in e){var r=Math.abs(+n);r<t&&(t=r)}return t}(r),s=l[n],c=t-s,d=Math.abs(c);d<=a&&(r[""+c]||(r[""+c]=[]),r[""+c].push({type:o,val:c,absVal:d,dragKey:e,otherKey:n,dragPosi:i,otherPosi:l}),d<a&&function(e,t){for(var n in t){var r=Math.abs(+n);r>e&&delete t[n]}}(d,r))})})})}function h(e){var t=e.posi,n=t.x,o=t.y,a=t.width,i=t.height;return r({},t,{xLeft:n,xMiddle:n+a/2,xRight:n+a,yTop:o,yMiddle:o+i/2,yBottom:o+i})}function y(e){var t=e.dragPosi,n=e.dragLineKeyObj,r=void 0===n?undefined:n,o={x:{},y:{}};!function(e){var t=e.dragPosi,n=e.saveAdhereObj,r=e.dragLineKeyObj,o=void 0===r?undefined:r,a=s["default"].width,i=s["default"].height;f({dragPosi:t,otherPosi:{x:0,y:0,width:a-=c,height:i},saveAdhereObj:n,dragLineKeyObj:o})}({dragPosi:t,saveAdhereObj:o,dragLineKeyObj:r}),function(e){var t=e.dragPosi,n=e.saveAdhereObj,r=e.dragLineKeyObj,o=void 0===r?undefined:r,a=l.findAllElement({isReturnArr:!0}),s=i["default"].getSelectElementArr();a.forEach(function(e){var r=e.id,a=e.x,i=e.y,l=e.width,u=e.height;-1==s.indexOf(r)&&f({dragPosi:t,otherPosi:{x:a,y:i,width:l,height:u},saveAdhereObj:n,dragLineKeyObj:o})})}({dragPosi:t,saveAdhereObj:o,dragLineKeyObj:r});var d=function(e){var t,n=e.saveAdhereObj,r=0,o=0;for(var a in n){var i=u,l=!1;for(var s in n[a])i=Math.min(Math.abs(+s),i);for(var s in n[a])Math.abs(+s)!=i||l||(n[a]=((t={})[""+s]=n[a][s],t),"x"==a?r=+s:"y"==a&&(o=+s),l=!0)}return{adhereX:r,adhereY:o}}({saveAdhereObj:o}),p=d.adhereX,h=d.adhereY;return a["default"].setPrdAdhereLineData(o),{adhereX:p,adhereY:h}}t.dragMoveAdhereFunc=y,t["default"]={dragMoveAdhereFunc:y}},996:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(1)),l=a(n(12)),s=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.isDelete,n=void 0!==t&&t,r=e.type,o=void 0===r?"页面":r;return i["default"].createElement("div",{className:"prd-guide-icon-text-box"},i["default"].createElement("div",{className:"guide-icon"}),i["default"].createElement("div",{className:l["default"]("guide-text",{"not-find":n})},n?"原"+o+"已被删除请重新选择":"双击选择"+o))},t}(i["default"].Component);t["default"]=s},997:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__decorate||function(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var s=l(n(1)),u=l(n(12)),c=l(n(4)),d=l(n(11)),p=n(829),f=function(e){function t(t){var n=e.call(this,t)||this;return n.state={isModifyTitle:!1,isComposition:!0},n}return o(t,e),t.prototype.componentDidUpdate=function(){this.inputDom&&this.inputDom.focus()},t.prototype.handleModifyTitle=function(){this.setState({isModifyTitle:!0})},t.prototype.handleChangeTitle=function(e){e.currentTarget.value.gblen()>24&&(e.currentTarget.value=e.currentTarget.value.slice(0,24),d["default"].show("列表项文本内容不能超过个24字符"))},t.prototype.handleGetComposition=function(e){"compositionend"==e.type?!1||this.handleChangeTitle(e):!0},t.prototype.handleInputBlur=function(e){var t=e.currentTarget.value,n=this.props.element,r=n.id,o=n.modifyTitle;if(""==t)return d["default"].show("列表项文本内容不能为空"),this.inputDom.focus(),!1;o!=t&&p.handleUpdateTitle(t.slice(0,24),r),this.setState({isModifyTitle:!1})},t.prototype.handleMouseDown=function(e){e.stopPropagation()},t.prototype.render=function(){var e=this,t=e.props,n=t.element,r=n.type,o=n.width,a=n.showPhoneShell,i=(n.isEdit,t.title),l=e.state.isModifyTitle;return s["default"].createElement("div",{className:u["default"]("prd-page-contr-title-panel",{"is-show-phone-shell":a}),style:{width:o},onDoubleClick:e.handleModifyTitle},s["default"].createElement("div",{className:"prd-page-contr-title-icon "+r+"-icon"}),l?s["default"].createElement("input",{className:u["default"]("page-title-modify-input",{"is-modify-title":l}),autoComplete:"off",autoCorrect:"off",spellCheck:!1,defaultValue:i,onMouseDown:e.handleMouseDown,onBlur:e.handleInputBlur,ref:function(t){return e.inputDom=t},onCompositionStart:e.handleGetComposition,onCompositionUpdate:e.handleGetComposition,onCompositionEnd:e.handleGetComposition}):s["default"].createElement("div",{className:"page-contr-title-text"},i))},a([c["default"],i("design:type",Function),i("design:paramtypes",[]),i("design:returntype",void 0)],t.prototype,"handleModifyTitle",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleChangeTitle",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleGetComposition",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",Object)],t.prototype,"handleInputBlur",null),a([c["default"],i("design:type",Function),i("design:paramtypes",[Object]),i("design:returntype",void 0)],t.prototype,"handleMouseDown",null),t}(s["default"].Component);t["default"]=f},998:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(t,"__esModule",{value:!0});var l=i(n(1)),s=i(n(12)),u=window,c=u.$,d=u.isPrototypeTool,p=function(e){function t(t){var n=e.call(this,t)||this;return n.state={},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.clickFunc,n=void 0===t?c.noop:t,r=e.btnStyle,o=e.type;return d?l["default"].createElement("div",a({className:s["default"]("element-edit-btn-panel",{"is-remarks-btn":"pageRemark"==o,a_c:!0}),style:r,onMouseDown:n},c.addHoverData({text:"编辑内容"})),l["default"].createElement("div",{className:"btn-icon"})):null},t}(l["default"].Component);t["default"]=p}}]);