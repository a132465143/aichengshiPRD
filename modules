_jsload_('mouse', 'w.Ob.ob({nG:"_docMsMov",I1:function(){var a=this.La.xc;w.C.h(a,"mousedown",this.XV,this);this.uK||(this.uK=function(){this.RA=!1},this.bs=function(a){if(!this.Bf&&!this.Vf){var c=this.zg(a,!0,!0);this.r(this.nG,{event:a,eX:c})}},w.l.ae||(this.bs=w.a.ZW(this.bs,150,this)));this.IX();w.C.h(document,"mousedown",this.uK,this);w.C.h(document,"mouseout",this.bs,this);this.h(this.nG,this.pX,this);w.C.h(a,"mouseover",this.jda,this);w.C.h(a,"mouseup",this.YV,this);w.C.h(a,"contextmenu",this.$z,this);w.C.h(a, "rightclick",this.$z,this)},zaa:function(){var a=this.La.xc;w.C.I(document,"mousemove",this.bs,this);w.C.I(a,"mousemove",this.tK,this)},IX:function(){var a=this.La.xc;w.C.h(document,"mousemove",this.bs,this);w.C.h(a,"mousemove",this.tK,this)},jda:function(){this.RA=!0},V5:function(){var a=this.La.xc;w.C.I(a,"mousedown",this.XV,this);w.C.I(document,"mousedown",this.uK,this);w.C.I(document,"mouseout",this.bs,this);this.I(this.nG,this.pX,this);w.C.I(document,"mousemove",this.bs,this);w.C.I(a,"mousemove", this.tK,this);w.C.I(a,"mouseup",this.YV,this);w.C.I(a,"contextmenu",this.$z,this);w.C.I(a,"rightclick",this.$z,this)},K1:function(){w.C.h(this.La.xc,"mousewheel",this.WV,this)},Y5:function(){w.C.I(this.La.xc,"mousewheel",this.WV,this)},J1:function(){this.h("mousemove",this.JR);this.h("mouseout",this.KR);this.h("mouseover",this.LR);this.h("mouseup",this.MR);this.h("mousedown",this.IR);this.h("rightclick",this.OR);this.h("contextmenu",this.AR);this.h("rdblclick",this.PR)},X5:function(){this.I("mousemove", this.JR);this.I("mouseout",this.KR);this.I("mouseover",this.LR);this.I("mouseup",this.MR);this.I("mousedown",this.IR);this.I("rightclick",this.OR);this.I("contextmenu",this.AR);this.I("rdblclick",this.PR)},keyboardEnableChanged:function(){this.get("keyboardEnable")?this.G1():this.tH()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.NR):this.I("mousewheel",this.NR)},$z:function(a){w.C.preventDefault(a)},M5:function(a){var b=this.zg(a,!1,!0),c=0;"3D"==this.J.view.type? (this.ia("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/800,a=this.get("zoom")+a,this.eU(a,b.Bd,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.R.Ux=(this.R.Ux||0)+c,this.r("mousewheel",b))},WV:function(a){this.get("scrollWheel")&&this.M5(a)},vK:function(a,b){w.C.preventDefault(a);b=this.zg(a,!1,!0);var c= this.R;if(!this.Or(b.sb,c.nq)){c.nq=b.sb;if(c.ho){if(!c.Mc&&(b.sb.x!==this.R.Gm.x||b.sb.y!==this.R.Gm.y)){var d;this.SG(c.mq)&&c.mq.get("draggable")&&(d=c.mq);!d&&this.get("dragEnable")&&(d=this);d&&(c.Mc=!0,c.gn=d,c.Gf=c.Gm,c.fn=c.UL)}c.Mc&&(c.ei=b,b.button=a.buttons||a.button||0,this.KH())}if(a.preventDefault)a.preventDefault();else return!1}},iD:function(a){this.IX();w.j.Na(this.K,"amap-drag");a=this.zg(a);w.j.Tba();w.j.RU();this.R&&(this.R.Mc=!1);this.Bf&&!this.Vf&&this.r("moveend");this.R.Em&& (this.R.Em=!1,this.R.Mc=!1,this.R.gn.r("dragend",a));this.R.ho=!1;this.R.nq=null;this.R.Gf=null;w.C.I(document,"mousemove",this.vK,this);w.C.I(document,"mouseup",this.iD,this);try{w.C.I(window.parent.document,"mouseup",this.iD,this)}catch(b){}w.C.kja(this.La.xc)},kda:function(a,b){b=b||this.zg(a);var c=this.get("size"),d;0<=b.sb.x&&b.sb.x<=c.width&&0<=b.sb.y&&b.sb.y<=c.height&&(d=!0);this.xW&&!d?this.r("mouseout",b):!this.xW&&d&&this.r("mouseover",b);this.xW=d},tK:function(a){if(!this.Bf&&!this.Vf&& (w.C.preventDefault(a),w.l.Xo&&(a=window.event),a)){a=this.zg(a);var b=this.R,c=a.ad,d;this.R.ho||(c instanceof w.D.Lg?d=c.Bc.get("cursor"):c instanceof w.w.qc&&(d=c.get("cursor")),d&&c!==this||(d=this.J.Mg.defaultCursor),d=this.J.get("optimalCursor")||d,this.K.style.cursor=d||"");d=b.p5;var e=a.Eq;d!==e&&(d&&b.WQ&&b.WQ.r("mouseout",a),e&&c&&(c.r("mouseover",a),c.get("topWhenMouseOver")&&c.Bc.setTop(!0)));a.ad.r("mousemove",a);a.ad!==this&&this.r("mousemove",a);b.p5=a.Eq||null;b.WQ=a.ad||null}},R:{Mc:!1}, XV:function(a){this.RA=!0;w.j.qba();w.j.IU();this.R.nq=null;this.R.Gf=null;var b=this.zg(a,!0);this.R.LU=new Date;this.R.mq=b.ad;this.R.Gm=b.sb;this.R.n5=b.button;this.R.ho=!0;this.R.o5=b;this.R.Mc||(this.R.UL=b);this.Pd&&this.Pd.stop();var c=b.ad;!c.Bc&&c.get("dragEnable")&&(this.R.ho=!0);w.j.Ha(this.K,"amap-drag");c=!1;b.ad.r("mousedown",b);b.ad!==this&&(this.r("mousedown",b),c=b.ad.get("draggable"));c=c||this.get("dragEnable");w.C.Fha(this.La.xc);w.C.h(document,"mousemove",this.vK,this);w.C.h(document, "mouseup",this.iD,this);try{window.parent.document&&w.l.Xo&&w.C.h(window.parent.document,"mouseup",this.iD,this)}catch(d){}w.C.stopPropagation(a);c&&this.zaa()},pX:function(a){this.kda(a.event,a.eX)},Rla:function(a){this.vK(a.event,a.eX)},YV:function(a){a=this.zg(a);var b=a.ad,c=this.J.get("allBubble")||b.get("bubble");b!==document&&(b.r("mouseup",a),a.ad!==this&&c&&this.r("mouseup",a));this.Or(a.sb,this.R.Gm)&&(this.Xe&&this.Or(this.R.kt,a.sb)&&a.button===this.R.n5?(clearTimeout(this.Xe),this.Xe= null,w.C.DW(a)?c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a):b.r("rdblclick",a),this.R.kt=null):(w.C.DW(a)?(this.r("clickstart",a),c?(b.r("click",a),b!==this&&this.r("click",a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&b.Bc.setTop(!0),this.r("clickend",a)):c?(b.r("rightclick",a),b!==this&&this.r("rightclick",a),this.r("contextmenu",a)):(b.r("rightclick",a),b.r("contextmenu",a)),this.R.kt=a.sb,this.Xe&&clearTimeout(this.Xe),this.Xe=setTimeout(w.a.bind(function(){clearTimeout(this.Xe); this.Xe=null;this.R.kt=null},this),260)))}});w.Ob.ob({NR:function(a){this.ia("mousewheel",a);var b=this;if(1<=Math.abs(this.R.Ux)&&!this.A_){var c=this.R.Ux;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.rB(a.Bd,c);this.R.Ux=0;this.A_=!0;setTimeout(function(){b.A_=!1;b.R.Ux=0},w.l.Iy?50:40)}},JR:function(a){this.ia("mousemove",a)},KR:function(a){this.ia("mouseout",a)},LR:function(a){this.ia("mouseover",a)},MR:function(a){this.ia("mouseup",a)},IR:function(a){this.ia("mousedown",a)},OR:function(a){this.ia("rightclick",a)},AR:function(a){this.ia("contextmenu", a)},PR:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.rB(a.Bd,-1);this.ia("rdblclick",a)}});w.Ob.ob({V4:function(){this.Cw={left:[37],right:[39],HC:[40],pv:[38],kh:[187,107,61],lh:[189,109,173]};this.u2={left:this.Ft(this.oB(100,0)),right:this.Ft(this.oB(-100,0)),HC:this.Ft(this.oB(0,-100)),pv:this.Ft(this.oB(0,100)),kh:this.Ft(this.zT(1)),lh:this.Ft(this.zT(-1))}},G1:function(){this.get("keyboardEnable")&&(this.Cw||this.V4(),w.C.h(document,"keydown",this.lB,this),w.C.h(document,"keyup",this.wR,this))},tH:function(){w.C.I(document,"keydown",this.lB,this);w.C.I(document,"keyup",this.wR,this)}, wR:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},lB:function(a){var b=a.keyCode,c;for(c in this.Cw)if(this.Cw.hasOwnProperty(c))for(var d=0;d<this.Cw[c].length;d+=1)if(b===this.Cw[c][d]){if(!this.RA)return;if(!a.ctrlKey&&!a.shiftKey){this.u2[c]();w.C.preventDefault(a);return}37===b?(this.t5(),w.C.preventDefault(a)):39===b?(this.o9(),w.C.preventDefault(a)):38===b?(this.q8(),w.C.preventDefault(a)):40===b&&(this.p8(),w.C.preventDefault(a))}},Ft:function(a){return function(){a()}}, t5:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},o9:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},p8:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},q8:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},zT:function(a){var b=this.J;return function(){1===a?b.zoomIn():b.zoomOut()}}, oB:function(a,b){var c=this.J;return function(){c.panBy(a,b)}}}); ')
_jsload_('vectorlayer', '(function(a){a.lL||(a.lL=function(){function a(b,c,d){for(var e=0,g=d.length;e<g;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h);}}function c(a, b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c=0,d=a.length;c< d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function g(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219),e.setUint32(h+ 1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<=c){if(128>c)return e.setUint8(h, c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+(-c).toString(16).substr(1)); }if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,s=Array.isArray(c),r=null;s?q=c.length:(r=Object.keys(c),q=r.length);16>q?(e.setUint8(h,q|(s?144:128)),k=1):65536>q?(e.setUint8(h,s?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,s?221:223),e.setUint32(h+1,q),k=5);if(s)for(s=0;s<q;s++)k+=g(c[s],e,h+k);else for(s=0;s<q;s++)var u=r[s],k=k+g(u, e,h+k),k=k+g(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19>a)return 9;throw Error("Number too big 0x"+ a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var g=Object.keys(a),c=g.length,e=0;e<c;e++)var k=g[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536>c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+ c.toString(16));}throw Error("Unknown type "+b);}var k={};k.Roa=a;k.Qoa=c;k.Poa=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.FI=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.yE=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.vI=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b}; e.prototype.parse=function(){var a=this.view.getUint8(this.offset);if(160===(a&224))return this.offset++,this.yE(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.vI(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.yE(a);case 218:return a= this.view.getUint16(this.offset+1),this.offset+=3,this.yE(a);case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.yE(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.FI(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.FI(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.FI(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+ 1),this.offset+=2,a;case 205:return a=this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a= this.view.getInt32(this.offset+1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.vI(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.vI(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a= this.view.getFloat64(this.offset+1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.Pj=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.BJ=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);g(a,c,0);return b};return{TU:function(a,b){b(null,{pu:a.pu,Wc:a.Wc,Ba:k.BJ(a.Ba)})},EU:function(a,b){b(null,{pu:a.pu,Wc:a.Wc,Ba:k.Pj(a.Ba)})}}},a.zu=a.l.vn?new a.Os(a.lL,{hostWorker:a.fD, clientId:"msg",lazy:"untilCall"}):new a.Os(function(){},{hostWorker:a.fD,clientId:"msg",lazy:"untilCall"}))})(w);!w.rF&&w.l.vn&&(w.rF=function(){function a(a,b){return a.bind?a.bind(b):function(){a.apply(b,arguments)}}function b(){v="unsupport";p.length=0;c();this.r("disable")}function c(){r&&(clearTimeout(r.Oaa),r.onopen=r.onmessage=r.onerror=null,3!==r.readyState&&r.close(),r=null)}function d(){B=!0;this.flush();this.r("open")}function e(){B?(v="closed",c()):b.call(this)}function g(a,b){if("unsupport"===v)return!1;"connected"===v?h.call(this,a):("closed"===v&&this.Naa(),p.push({data:a,jz:b}));x+=1}function h(a){var c= this;r.readyState===WebSocket.OPEN&&(r.send(a),t&&clearTimeout(t),t=setTimeout(function(){b.call(c);t=null},5E3),y&&clearTimeout(y),y=setTimeout(function(){c.close();y=null},1E4))}var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0,l={},m="undefined"===typeof window||!k,n=null,p=[],q=[],s=+new Date,r=null,u=1,v="closed",x=0,t=null,y=null,B=!1;m||(l.Dea=function(){if(q.length){var a=w.A.Rb+"://webapi.amap.com/count?",b=["type=v","k="+w.A.key,"u="+w.A.Sm,"m="+(w.l.Y?1:0),"pf="+w.l.Pr,"frq="+ q.join(",")];new w.Sa.fb(a+b.join("&"))}},w.extend(l,w.ka),w.event.V(window,"beforeunload",l.Dea,l));l.tfa=function(a){if("encode"===a.Wc)g.call(this,a.Ba);else if("decode"===a.Wc)if(a=a.Ba,"ack"===a.type)switch(a.command){case "tiles":this.r("ack",a);break;case "retain":v="connected";this.flush();break;case "close":b.call(this)}else 0===a.content.errcode&&("tiles"===a.type?this.r("tiles",a):"traffic"===a.type&&this.r("traffic",a))};l.Jha=function(a){x=a};l.ir=function(){return x};l.close=function(){r&& (v="closed",r.close())};l.Naa=function(){var c=this;"closed"===v&&(null===n&&(n=m?this.A.yN+"://"+this.A.vv:w.A.yN+"://"+w.A.vv),r=new WebSocket(n),r.binaryType="arraybuffer",v="connecting",r.onopen=a(d,this),r.onclose=a(e,this),r.onerror=a(b,this),r.ontimeout=a(b,this),r.onmessage=a(this.ufa,this),r.Oaa=setTimeout(function(){r.readyState!==WebSocket.OPEN&&b.call(c)},1200))};l.wy=function(){return"connected"===v};l.Rda=function(){return"closed"===v};l.flush=function(){if("connected"===v){for(var a= 0,b=p.length;a<b;a++)h.call(this,p[a].data);p.length=0}};l.SK=function(){return"unsupport"!==v};l.send=function(a){var b=this,c=u++;a={Wc:"encode",Ba:a,pu:s};var d=this.TU;m||(d=w.zu.TU);d(a,function(a,d){a||g.call(b,d.Ba,c)});return c};l.QU=function(a){for(var b=0,c=p.length;b<c;b++)if(p[b].jz===a)return p.splice(b,1),!0;return!1};l.p$=function(a){q.push(a)};l.ufa=function(a){var b=this;t&&(clearTimeout(t),t=null);var c=this.EU,d=self.vx;m||(c=w.zu.EU,d=w.zu.vx);d([a.data]);c({pu:s,Wc:"decode",Ba:a.data}, function(a,c){a||b.tfa(c)})};return l});w.Mh={ZZ:function(){0===w.Da.be&&w.Mh.aW()},Ooa:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Tn===b)return!0},raa:function(a,b){var c="limg-"+a.key+"-"+b.q.Ac;w.Da[c]&&delete w.Da[c]},mV:function(a){return w.Da[a.Tn?a.Tn:a]},$k:function(a){var b=null,c=null,d=!1;a.Tn?(b=a,c=b.Tn,(a=b.url)&&(d=!0)):c=a;var e=w.Da[c];d&&e&&e.src!==a&&(e=w.Da[c]=null);if(!e&&a){d="data:"===a.substr(0,5);e=document.createElement("img");d||(e.crossOrigin="Anonymous");w.Da[c]=e;e.loaded=!1; w.Da.be+=1;w.C.h(e,"load",this.jD,this);w.C.h(e,"error",this.$V,this);var g=this;e.iv=setTimeout(function(){e.loaded||g.aW()},300);e.src=a;b&&(e.jla=c,b.url=null)}},aW:function(){for(var a=0;a<w.Da.Np.length;a+=1)w.Da.Np[a].set("display")},jU:function(a){w.C.I(a,"load",this.jD,this);w.C.I(a,"error",this.$V,this)},jD:function(a){a=a.target;a.loaded=!0;w.Da.be-=1;this.jU(a);this.ZZ();a.iv&&(clearTimeout(a.iv),a.iv=null)},$V:function(a){a=a.target;a.loaded=!1;w.Da.be-=1;this.jU(a);this.ZZ();a.iv&&(clearTimeout(a.iv), a.iv=null)}};w.w.vk=w.w.qc.extend({B:function(a,b,c){this.bC=c;w.Da.Np.push(this);this.Ac=w.a.wV("layer");this.kb=2;a.get("textRatio");this.MN=25;this.X("tiles",a);this.yja=a.get("vdataUrl")||b.J.get("vdataUrl")||w.A.vv;this.ji=!0;this.fa=a;this.tj=w.l.Y?!1:!0;this.g=b;this.ai=this.$h=!0;this.he("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.he("zooms detectRetina visible merge sort zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.xv=new Image,this.xv.src=this.get("watermark"));this.Soa="v4";this.wa={};this.fi={};this.ee=256;this.Ir=[];this.Ge=this.df=0;this.ja=w.l.ja&&this.get("detectRetina");this.ee=256*(this.ja?2:1);this.X("mapStyle",b);this.X("style",b);this.dn=0;this.X("features",b);this.De=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.td=!1;if(this.g.get("styleUrl")||"normal"===this.get("mapStyle"))this.td=!!this.g.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.fa.up()},Q9:function(){var a=!1,b=this.iQ();if(b){if(this.qh){var c="active"===this.qh.ww;b.aw(this.qh);c&&(b.hq(this.qh,"active"),a=!0)}w.l.maa&&!a&&b.NB()}},Vv:function(){this.Q9()},Az:function(a,b){var c=!0;if("hotspotout"===a)this.g.J.set("optimalCursor",null);else if("hotspotover"===a)this.g.J.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.iQ();if(d)switch(a){case "hotspotout":d.SB(b); break;case "hotspotover":d.hq(b,"hover");break;case "mouseup":d.hq(b,"hoverup");break;case "mousedown":d.hq(b,"active")}c&&(c=b.Oa,c=new w.G(c[0],c[1]),c=this.g.qe(c,3),this.g.J.r(a,{name:b.name,lnglat:c,id:b.gl,isIndoorPOI:b.PK}))},iQ:function(){if(!w.l.iW){var a=this.Q||this.pm;if(!a)return null;var b=this.g?this.g.J.get("hotspotOptions"):{},b=w.extend({},b);if(b.disableHighlight)return null;this.gx||(this.gx=new w.w.vk.I0(a));return this.gx}},jo:function(a){(a=this.FV(a))&&this.Az("hotspotclick", a)},rt:function(a){var b="mousemove"===a.type;if(!this.g.Vf||!b){var c=this.FV(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.qh!==c&&(this.qh&&this.Az("hotspotout",this.qh),this.Az("hotspotover",c)),!c&&this.qh&&this.Az("hotspotout",this.qh),c&&!b&&this.Az(a.type,c)}this.qh=c}},textIndexChanged:function(){this.set("display")},yfa:function(){this.g.h("click",this.jo,this);this.g.h("mousemove",this.rt,this);this.g.h("mousedown",this.rt,this);this.g.h("mouseup",this.rt,this)}, YI:function(){this.g.I("click",this.jo,this);this.g.I("mousemove",this.rt,this);this.g.I("mousedown",this.rt,this);this.g.I("mouseup",this.rt,this)},Tl:function(){return null},mn:function(){var a=this.yr?null:this.g.J.get("forceZooms");return{ji:!0,ee:256,visible:this.get("visible"),gd:a||this.get("zooms"),kC:this.tj&&this.ta,$h:!this.g.FE,ai:!this.g.FE,opacity:this.get("opacity"),qd:!1}},Jl:function(a){if(w.Q.canvas.vk)return new w.Q.canvas.vk(this,a)},Cx:function(a){0===a.indexOf("amap://styles/")&& (a="normal");var b=this.get("forceBig")||w.l.Y&&!this.ja?"6":"5";this.url=w.A.Rb+"://"+this.yja+"/tiles?mapType="+a+"&v="+(w.Lc?3:2)+"&style="+b;this.url+=this.ja?"&rd=2":"&rd=1";this.url+="&flds="+this.xa;this.url+="&t="},styleChanged:function(){this.g.ec||this.featuresChanged()}}); w.w.Yc=w.w.vk.extend({Jl:function(a){var b=this;if(!b.xv&&w.l.Je&&"vw"===b.g.get("baseRender")){var c=["wgl"];this.g.ec&&c.push("wgl2");if(w.hb.yy(c))return new w.Q.uf.Yc(b,a)}else if(c=["cmng","cgl"],this.g.ec&&c.push("cgl2"),w.hb.yy(c))return new w.Q.canvas.Yc(b,a);w.hb.eg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.bC:a&&(-1!==w.a.indexOf(a,"bg")&&-1!==w.a.indexOf(this.bC,"region")&&b.push("region"),-1!==w.a.indexOf(a,"building")&& -1!==w.a.indexOf(this.bC,"building")&&b.push("building"),-1!==w.a.indexOf(a,"road")&&-1!==w.a.indexOf(this.bC,"road")&&b.push("road"));this.xa=b;this.Cx(this.get("mapStyle")||"normal");this.set("reload")}});w.w.T0=w.w.Yc.extend({B:function(){this.kl(arguments);this.De=this.hm=17;this.xa=["building"];this.td=!0;this.Cx(this.get("mapStyle")||"normal");this.yr=!0},featuresChanged:function(){},mapStyleChanged:function(){}}); w.w.Wh=w.w.vk.extend({Jl:function(a){var b=this;if(this.FK()){if(this.rv=!0,w.Q.canvas.uF)return this.XT(),a=new w.Q.canvas.uF(this,a),a.h("afterLabelRender",this.Vv,this),a}else{b.rv=!1;if(w.Q.canvas.tF)return a=new w.Q.canvas.tF(this,a),a.h("afterLabelRender",this.Vv,this),a;a=["cmng","labelcanvas"];w.l.vJ&&a.push("labelDir");w.hb.eg(a,function(){b.set("display")})}},FK:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.g.get("nolimg")?!1:w.l.rv?!0:!1},Ada:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.g.get("nolimg")||w.l.qd||w.l.Y?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==w.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==w.a.indexOf(a,"point")&&c.push("poilabel"));a=this.FK();c.length&&(a||this.Ada())&&c.unshift("limg");this.xa=c;this.Cx(b);this.set("reload");(b=this.Q||this.pm)&&a^this.rv&&(this.gx&&(this.gx=this.gx.Q=null),b.I("afterLabelRender", this.Vv,this),b.Vt(),this.pm=this.Q=null)},XT:function(){this.Cr=w.A.Rb+"://"+(this.fa.get("vdataUrl")||this.g.J.get("vdataUrl")||w.A.vv)+"/limg?";var a=this.ja?2:1;this.Cr+="&font="+(w.l.Y&&!this.ja?"big":"small");this.Cr+="&scl="+a;this.Cr+="&t="},FV:function(a){return a.tf?(a=this.sV(this.g.bc(a.tf,20),!0))?a[0]:null:null},sV:function(a,b){var c=this.g.XC();if(c&&(c=c.nr(this)))return c.eu(a,b)}});w.w.vk.I0=w.aa.extend({B:function(a){this.w9(a)},w9:function(a){this.Q=a},SB:function(a){if(a.ww){a.ww=!1;var b=this.Q;b&&b.SB.apply(b,arguments)}},aw:function(a){a.ww=!1;var b=this.Q;b&&b.aw.apply(b,arguments)},hq:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.ww!==b){a.ww=b;var c=this.Q;c&&c.hq.apply(c,arguments)}},NB:function(){var a=this.Q;a&&a.NB()}});w.Ls={Ax:function(a,b){this.zf={};this.zf.pu=w.a.Jb(this.zf);b.Ic||(b.Ic=w.rF());this.Ic=b.Ic;this.Ic.h("tiles",this.RD,this);this.Ic.h("ack",this.QD,this);this.Ic.h("disable",this.PD,this)},xT:function(){if(this.eh&&!this.ak&&w.Uh.Bja||this.ak&&w.Uh.hea||!this.ak&&!this.eh&&this.ji&&w.kf.Eda)return!0},Yw:function(a){this.Cf=w.a.Ut(this.Cf,a)},qo:function(){return w.a.keys(this.Af).length?!0:!1},aB:function(a){w.a.Pb(a,function(a){w.Mh.$k(a)})},fA:function(){for(var a=this.Cf.length-1;0<=a;a--){var b= this.Cf[a];b.aq||b.abort()}this.Cf.splice(0,this.Cf.length)},Fu:function(a){if(this.q&&a.XK===this.q.Ac){this.Se||this.If?this.MH([this.q,"groupcomplete",null,null,"allbase"]):(this.Ri(),this.wq.AC(this.q,"groupcomplete",null,null,"allbase"));for(var b=0,c=a.Uc.length;b<c;b+=1)this.Qy(a.Uc[b],a.uu,a.Vu,a.Y)}},Qy:function(a,b){var c=a.Wc,d=this.wa.get(a.ll);if(d){var e=this.q.xa;d.xa||(d.Ga={},d.xa=[]);var g="";(this.g.jk&&!this.g.ec||this.Nda&&this.g.ec)&&this.KJ(c,a.Ba);"poilabel"===c||"roadlabel"=== c?(a.Qd||(g=a.Ba,a.Qd=null),d.xa.push.apply(d.xa,a.Ba),c===this.q.xa[this.q.xa.length-1]&&(d.Qd=null)):d.Ga[c]=a.Ba;"building"!==c&&"poilabel"!==c||!a.Xk||d.Te||(d.Te={},d.Te.je=a.Xk,w.pj&&w.pj.r("vecTileParsed.buildings",{Ln:d}));if("roadlabel"!==c&&"poilabel"!==c||this.sW||!w.l.vJ&&!this.g.ec)this.Se||this.If?this.MH([this.q,g,d,b,c]):(this.Ri(),this.wq.AC(this.q,g,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.Se||this.If?this.MH([this.q,"tileComplete",d, b,c]):(this.Ri(),this.wq.AC(this.q,"tileComplete",d,b,c)))}},nA:function(){if(this.g){var a=this.g.J.getMapStyle();this.jp=a;this.i5(a);this.Ic&&this.Ic.SK()&&(-1!==a.indexOf("amap://styles")&&(a="normal"),a={command:"status",payload:{mapType:a,style:w.l.Y&&!this.q.ja?"6":"5",rd:this.q.ja?2:1}},this.g.J.get("workerMode")&&this.xT()?(w.kf.caa(a,w.a.pp),this.Ic.Rda()||this.Ic.close()):this.Ic.send(a))}},mapStyleChanged:function(){this.nA()},styleChanged:function(){this.nA()},PD:function(){for(var a in this.zf)this.zf.hasOwnProperty(a)&& this.zf[a].Nb&&(this.yk(this.zf[a].Nb,this.zf[a].nc),delete this.zf[a],delete this.Af[a]);this.Ic=null;this.mj("mapStyle");this.set("display",1)},QD:function(a){var b=a.reqId;this.zf[b]&&(!a.content.status&&this.zf[b]&&this.yk(this.zf[b].Nb,this.zf[b].nc),delete this.zf[b],delete this.Af[b])},RD:function(a){var b=a.reqId;if((!/-1$/.test(b)||!this.qo())&&this.zf[b]){var c=a.content.opt,d=this.zf[b].Nb[0];c!==this.Ta&&!d.xg||d.xg&&2<(this.qo()||Math.abs(c-this.Ta))?this.yk(this.zf[b].Nb,this.zf[b].nc): this.Lr(a.content.data,c)}},sI:function(a,b){var c=a.ze,d=null;!this.bg&&(w.l.gf||w.l.bj&&!this.g.J.ta)&&18>=c.nc&&(b?d={Qd:!0,data:a.cba,url:this.kn(a.nc,[]),w:this.q,"x-vd-v":c.Ed,tv:c.rf,bgc:this.g.vd,vdataVersion:c.Ud,td:this.g.J.get("showBuildingBlock")}:this.ME||(d={Uc:a.data.Uc,"x-vd-v":c.Ed,tv:c.rf,bgc:this.g.vd,vdataVersion:c.Ud,Je:!!this.bg,url:this.kn(a.nc,[]),w:this.q,td:this.g.J.get("showBuildingBlock")}));d&&w.ym.set(d)},cL:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]? arguments[2]:!1;if(a.length)if(this.wY)this.tX=!0;else{void 0===this.Cf&&(this.Cf=[]);c||this.fA();void 0===this.Af&&(this.Af={});var d=1,e=[],g=this;18<b&&(d=Math.pow(2,b-18));for(var h=Math.pow(2,20-a[0].ma.z),k=0;k<a.length;k+=1){var l=a[k],m=l.ma;l.nc=b;m.S=h;if(18<b&&!this.bg){for(var n=0;n<d;n+=1)for(var p=0;p<d;p+=1){var q=new w.Xa(new w.uk(b,d*m.x+n,d*m.y+p));this.wa.Fc(q.key)||(this.wa.set(q.key,q),q.status="loading")}this.wa.set(l.key+"/"+b,l)}else this.wa.set(l.key,l),this.bg&&10>m.z&& this.jV(l)?this.set("display",0):l.status="loading"}this.B8(a,b,w.a.bind(function(a,d){var g=this;if(d.length){for(var h=0,k=d.length;h<k;h++){var l=d[h].ma,m=l.x,n=l.y,l=l.z;if(10>l){var p=Math.pow(2,l);if(m>=p||0>m)m=(m+p)%p}m=w.a.LC(m,n,l).join(",");w.a.ga(e,m)||e.push(m)}h=this.I3({Fia:d,xg:c,nc:b,$M:e});if(this.g.J.get("workerMode")&&this.xT())if(this.eh)w.Uh.aj(h,function(a,c){null!==c.data&&g.g&&(void 0===w.Uh.Wv&&(w.Uh.Wv=!0),c.GW?g.yk(c.Nb,b):(c.bk&&g.EB(),g.ak?(w.a.Pb(c.Nb,function(a){this.wa.set(a.key, a);a.Qd&&!a.Qd.loaded&&(w.Mh.$k(a.Qd,!0),a.Qd.loaded=!0);a.M&&a.M.Da&&this.aB(a.M.Da);a.Te&&a.Te.je&&w.pj&&w.pj.r("vecTileParsed.buildings",{Ln:a})},g),g.set("display"),g.sI(c,!0)):(w.a.Pb(c.Nb,function(a){var b=this.wa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Da&&this.aB(a.M.Da))},g),g.sI(c),c.data&&g.Fu(c.data))))});else{var q=w.kf.aX;if(!this.g.J.ta||w.kf.rba)q=w.kf.aj;this.nA();q(h,function(a,c){if(g.g){void 0===w.kf.Wv&&(w.kf.Wv=!0);c.GW&&g.yk(c.Nb,b);if(q===w.kf.aX){if(c.disabled){w.kf.rba= !0;g.set("display");return}if(c.d$)return}c.bk&&g.EB();c.data&&(g.g.vd!==c.Mq&&(g.g.vd=c.Mq),w.a.Pb(c.Nb,function(a){var b=this.wa.get(a.key);b&&(b.status=a.status,a.M&&a.M.Da&&this.aB(a.M.Da))},g),g.aB(c.icons),g.sI(c),c.data&&g.Fu(c.data))}})}else!this.eh&&this.Ic&&this.Ic.SK()?this.g.J.get("workerMode")?this.bB(d,b,e,c):(1>this.Ic.ir()||3<this.Bq?this.bB(d,b,e,c):((2===this.Ic.ir()||this.Ic.wy())&&this.nA(),this.A5(d,b,e,c)),this.Ic.Jha(this.Ic.ir()+1),this.Ic.TW&&this.Ic.p$(Math.ceil((new Date- this.Ic.TW)/1E3)),this.Ic.TW=new Date):this.bB(d,b,e,c)}},this));window.renderDelay&&(this.wY=setTimeout(function(){g.tX&&g.set("display",!1);g.tX=!1;g.wY=null},window.renderDelay))}},i5:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.ME=!0:this.ME=!1},B8:function(a,b,c){if(!this.bg&&(w.l.gf||w.l.bj&&!this.g.J.ta)&&(this.ak||!this.ME)&&18>=b){var d=w.ym,e=this,g=this.g,h=g.J;g.Ey||void 0!==g.AD||("dv"===h.get("baseRender")?g.AD=1:g.AD=2);d.get({type:h.ta?"NFS":"FS",td:this.q.yr|| this.q.td,Bia:a,Je:!!this.bg,w:this.q,url:this.kn(b,[]),timeout:500},function(d,h){if(e.q){if(!d&&h.DK.length){h.DK.length===a.length&&(g.Ey||g.AD--,e.EB());if(h.Uc){e.Ed=h.ze["x-vd-v"];e.rf=h.ze.tv;var m=h.ze.bgc;e.g.vd!==m&&(e.g.vd=m);h.DK.forEach(function(a){a.status="loaded"});m=e.EG(b,h.Uc);e.Fu(m)}else h.iea.forEach(function(a){e.Du(a,b,[],h.ze["x-vd-v"],!0)}),e.set("display");a=h.Oea}c(null,a)}})}else c(null,a)},A5:function(a,b,c,d){if(!d||!this.qo()){var e=[(new Date).getTime(),this.Ic.ir()+ 1&65535,d?1:0].join("-");d||(this.Af[e]=1);var g={command:"tiles",reqId:e,payload:{t:c,opt:b,cs:{level:b,flds:this.q.xa.join(","),v:w.Lc?"3":"2"}}},h;if(!this.Ic.wy()){var k=this;setTimeout(function(){k.Ic&&!k.Ic.wy()&&(k.Bq?k.Bq++:k.Bq=1,k.Ic.QU(h)&&(delete k.zf[e],delete k.Af[e],k.bB(a,b,c,d)))},300)}h=this.Ic.send(g);this.zf[e]={Nb:a,nc:b}}},wL:function(a){if(!a.ta||a.xg)a.status="",a.ta=void 0,a.qa=null,a.tc=null,a.Jc&&(a.Jc.tc=null,a.Jc.Jc=null,a.Jc=null),this.wa.Sn(a.key)},I3:function(a){var b= a.Fia,c=a.nc,d=a.$M;a=a.xg;var e=+new Date,g=this.eh&&w.Uh&&!w.Uh.Wv||!this.eh&&w.kf&&!w.kf.Wv;return{Ac:e,Mq:this.g.vd,eh:this.eh,ak:this.ak,td:this.q.td,Oda:!!w.Lc,Je:this.bg,WK:this.q.Ac,xa:this.q.xa,qd:this.q.ja,kb:this.q.kb,sK:Math.ceil(this.Mf.gD),Nb:w.a.filter(b,function(a){return"loaded"!==a.status}),nc:c,$M:d,xg:a,url:this.kn(c,d,b)+"&_id="+e,de:this.EG(c,[],g)}},EG:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:!0;w.Lc&&1<w.Lc.length&&(w.Lc=w.Lc[this.q.get("forceBig")|| w.l.Y&&!this.q.ja?1:0]);var d=w.Lc||null,e={Mda:"3D"===this.q.g.J.view.type,Y$:this.q.td,pC:w.A.pC||null,wla:this.q.get("businessIconsID"),Ed:this.Ed,rf:this.rf,Mma:this.q.get("iconsID"),XK:this.q.Ac,uu:a,mu:this.q.mu,Ky:this.q.fa.get("merge"),Uc:b,Y:this.q.get("forceBig")||w.l.Y,mode:this.q.get("mode"),vga:w.A.Rb,KY:this.q.get("forceBig")?1:this.q.kb,Vu:this.q.get("forceBig")?!1:this.q.ja};c&&(e.Lc=d);return e},gw:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d= 0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},Lr:function(a,b,c){if(this.q){for(var d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.rf=h.tv,this.Ud=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.g.vd!==h&&(this.g.vd=h))):this.Du(h,b,d))}if(d.length){var k=this;a=null;var l;this.bg?(a=w.WE,l=a.RX):(a=w.zu,l=this.eh?a["label:parseLabel"]:a["base:parseDataToVector"]);(function(){l(k.EG(b,d),function(a,c){if(k.q&& !a){var d=c.icons;if(d)for(var e=0;e<d.length;e+=1)w.Mh.$k(d[e]);!this.bg&&(w.l.gf||w.l.bj&&!k.g.J.ta)&&(k.ak||!k.ME)&&18>=b&&w.ym.set({Uc:c.data.Uc,"x-vd-v":k.Ed,tv:k.rf,bgc:k.g.vd,Ud:k.Ud,Je:!!k.bg,url:k.kn(10,[]),w:k.q,td:k.q.td},function(){});c.data&&k.Fu(c.data)}})})()}}},Du:function(a,b,c){function d(d,e,g){e=[g,d,e].join("/");18<b&&!l.bg&&(e+="/"+b);if((d=l.wa.get(e))&&"loaded"!==d.status)if(l.PZ(d,p)||d.xg){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Qd=e,"string"===typeof e.b&&(e.b=l.gw(e.b)), g="",g="object"===typeof e.u?e.u.url:e.u)d={url:g,Tn:"limg-"+d.key+"-"+l.q.Ac},e.u=d,w.Mh.$k(d,!0)}else{e={ti:d.ma,ll:e,Ba:a,Wc:m,mu:l.q.mu,EI:l.g.vd,NK:"building"===m,dh:"poilabel"===m||"roadlabel"===m||"building"===m&&l.q.td};if("poilabel"===m||"roadlabel"===m)e.Qd=d.Qd;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.yM(b,d,p,w.a.bind(l.wL,l)),18<b&&l.wa.Sn(e)}var e=a[0].split("-"),g=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.q.xa,p=18<b?Math.pow(2,b-18):1,e= l.Mf.gD,q=Math.pow(2,k);10>k&&(g<=e&&d(g+q,h,k),g>=q-e&&d(g-q,h,k));d(g,h,k)},MH:function(a){this.Iq||(this.Iq=[]);this.Iq.push(a)},Ri:function(){if(this.Iq&&this.Iq.length){for(var a=0,b=this.Iq.length;a<b;a+=1)this.wq.AC.apply(this.wq,this.Iq[a]);this.Iq=[]}},yk:function(a,b){for(var c=18<b?Math.pow(2,b-18):1,d=0;d<a.length;d+=1){var e=a[d];this.yM(b,e,c,w.a.bind(this.wL,this));18<b&&this.wa.Sn(e.key+"/"+b)}w.l.gf&&w.ym.Sn({Nb:a,url:this.kn(b,[]),w:this.q,Je:!!this.bg,td:this.q.td})},kn:function(a, b,c){return this.q.url+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].xg?1:0)},j4:function(){var a=this.q.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},EB:function(){this.g.Ey||w.Yd.ue.end({key:this.j4(),index:0,id:this.g.J.id})},bB:function(a,b,c){function d(a,c){var d=a.split("|");d[0]=c+d[0];var e=d,g="";d[d.length-1]&&(g=d[d.length-1],e=d.splice(0,d.length-1));l.Lr(e,b,!0);return g}var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1,g=new XMLHttpRequest; g.wp=[(new Date).getTime(),e?1:0].join("-");e||(this.Af[g.wp]=1);var h=this.kn(b,c,a),k=0,l=this;g.En="";g.onreadystatechange=function(){if(l.q&&!(2>g.readyState)){var c=4===g.readyState&&0===g.status;(b!==l.Ta&&!a[0].xg||a[0].xg&&(b>l.Ta||2<l.Ta-b)||c)&&!g.aq?(g.aq=!0,l.yk(a,b),g.onreadystatechange="",c||g.abort(),e?l.Yw(g):delete l.Af[g.wp]):g.aq||(3===g.readyState?(c=g.responseText.substring(k),g.En=d(c,g.En),k=g.responseText.length):4===g.readyState&&(l.EB(),delete l.Af[g.wp],c=g.responseText.substring(k), l.eh&&(c+="|"),d(c,g.En),g.En="",l.g.J.ta||w.Yd.ue.push({id:l.g.J.id,key:"ds",Un:g.responseText.length/2}),e&&l.Yw(g)))}};g.onerror=function(){};this.yK||(this.yK=1);g.open("GET",h,!0);g.send();e&&this.Cf.push(g)},PZ:function(a,b){var c=this.tm||this.Mf,d=a.ma.x,e=a.ma.y;return d>Math.floor(c.Sd/b)||d<Math.floor(c.pe/b)||e>Math.floor(c.yd/b)||e<Math.floor(c.zd/b)?!1:!0},yM:function(a,b,c,d){if(18<a){b=b.ma;for(var e=0;e<c;e+=1)for(var g=0;g<c;g+=1){var h=new w.uk(a,c*b.x+e,c*b.y+g)+"";(h=this.wa.get(h))&& d(h)}}else d(b),b.Jc&&d(b.Jc)}};w.Q.canvas.Wh=w.Q.zi.extend({ga:[w.Ls],B:function(a,b){arguments.callee.oa.apply(this,arguments);this.Ac=w.a.Jb(this);this.Cm=300;this.De=a.De;this.eh=this.ji=!0;this.X("mapStyle",a.g);this.X("style",a.g);this.ak=!0;this.zt=1;var c=this;this.wQ=function(){c.Yea=!0;c.set("display",0)};this.Ef();this.aL(a)},aL:function(a){a=w.l.Y||a.ja?"big":"small";var b=w.A.Rb+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";w.Mh.$k(w.A.Rb+"://vdata.amap.com/style_icon/icon-normal-"+a+".png",!0);w.Mh.$k(b,!0)},hw:function(a){w.Mh.raa(a, this);var b=w.Q.canvas.Wh.rc.hw;b&&b.apply(this,arguments)},Ef:function(){this.Ck=document.createElement("canvas");this.Ck.className="amap-labels";this.Ck.draggable=!1;this.Ck.BW=!0;this.zj=this.Ck.getContext("2d",{alpha:!0});this.ny=[];this.Cy=[];this.Uo=this.q.ja?16:8},Ur:function(a){var b=Math.pow(2,a.W.zoom-this.ce),c=this.q.ja?this.q.kb:1,d=a.W.gb.Ua(this.ep).wc(this.bf);this.transform={translate:this.transform.translate.add(d.Vc(c)),scale:b/c,rotate:0};this.gb=a.W.gb},Tu:function(a,b){if(!this.ra|| 3E4<Math.abs(this.gb.x-this.ra.x)/this.S||3E4<Math.abs(this.gb.y-this.ra.y)/this.S)this.ra=this.gb;this.re=this.ce;this.qi=this.bf;this.pi=!1;this.currentTime=+new Date;this.qN=b.qN;this.Cd=[this.Aa.Lb.x,this.Aa.Lb.y];this.tj=b.kC;var c=this.lj;this.Se=this.zoom<<0!==this.zoom;var d=this.gb.Ua(this.ra);d.x<-w.a.Za/2&&(d.x+=w.a.Za);d.x>w.a.Za/2&&(d.x-=w.a.Za);this.TI=d.wc(this.bf);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var g=e[0].ma.z,h=!1;!e.rg||w.Da.be||!(g<=this.zoom&&"in"===this.Gu|| g>=this.zoom&&"out"===this.Gu)&&this.Gu||this.labels&&this.labels.length&&!a.ck&&this.$D(this.labels.hv,this.Mf)||(h=!0,this.labels&&this.labels.Zk?(this.fp=this.labels.Zk,this.fp.zoom=this.labels.zoom):(this.fp=[],this.fp.zoom=null),this.labels=[],this.labels.zoom=g,this.labels.hv=this.Mf);if(h){for(g=e.length-1;0<=g;g-=1){var k=e[g],h=!1,l=k.xa;!l&&k.Jc&&k.Jc.xa&&(l=k.Jc.xa,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.hl>b.hl?-1:a.le>=b.le?-1:1})}}}if(this.gaa(a)){this.ld();if(!this.g.J.ta)return;this.iM(a);this.hn=this.labels}this.Yea=!1;this.Qe(a)},ld:function(){if(this.rg&&!this.q.ta){var a=this.q;w.Yd.ue.end({id:this.g.J.id,key:"rl",index:2});a.ta=!0;a.cd?a.ia("renderComplete"):(a.cd=!0,a.ia("complete"))}},kc:function(a,b){this.jp=a.jp;this.rk=a.rk;this.mm(a,b);this.Se||this.Ri();this.ep&&(a.UZ||a.WM&&w.l.Mj||a.If&&!a.Se&&a.L$)?this.Ur(a,b):this.Tu(a,b);this.ep=this.gb;this.pi&&this.set("display", 0)},Qe:function(a){var b=this.gb.Ua(this.ra);b.x<-w.a.Za/2&&(b.x+=w.a.Za);b.x>w.a.Za/2&&(b.x-=w.a.Za);this.transform={translate:new w.G(a.W.Aa.Vb.x*(this.q.ja?this.q.kb:1),a.W.Aa.Vb.y*(this.q.ja?this.q.kb:1)),scale:1/(this.q.ja?this.q.kb:1),rotate:0}},$D:function(a,b){return a.zd===b.zd&&a.pe===b.pe&&a.yd===b.yd&&a.Sd===b.Sd},eu:function(a,b){var c;if(this.zoom){var d=a.wc(Math.pow(2,20-this.zoom));this.labels&&(c=this.Gca(d,b))&&(c.PK=!1);!c&&this.Hb&&(c=this.Fca(d))&&(c.PK=!0)}return c?[c]:[]}, Gca:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Zk||this.labels,g=e.length-1;0<=g;g-=1){var h=e[g],k=h.Oa[0]/this.S,l=h.Oa[1]/this.S;if((h.gl||!b)&&this.vW(h,c,d,k,l))return h}},Fca:function(a){var b=a.x;a=a.y;for(var c=this.Hb.length-1;0<=c;c-=1){var d=this.Hb[c],e=d.Oa[0]/this.S,g=d.Oa[1]/this.S;if(d.gl&&this.vW(d,b,a,e,g))return d}},vW:function(a,b,c,d,e){for(var g=0;g<a.wb.length;g+=1){var h=a.wb[g][2],k=a.wb[g][3],l=a.wb[g][0],m=a.wb[g][1];this.q.ja&&(h/=this.q.kb,k/=this.q.kb,l/=this.q.kb, m/=this.q.kb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1},reloadChanged:function(){this.q&&(this.q.ta=!1);this.wa.clear();this.labels=[];this.ny=[];this.Cy=[];this.yb&&this.yb.parentNode&&this.yb.parentNode.removeChild(this.yb);this.Ck&&this.Ck.parentNode&&this.Ck.parentNode.removeChild(this.Ck);this.set("display")},gi:function(){return this.Ck},KJ:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Ub){var e="",g="",h="";d.Td&&(h=d.Td[0], e=h[3],g=h[4],h=d.Yi?"":h[7]);if(e=this.T.du&&this.T.du(e,g,h,d.Ub,d.Xq))d.visible=e[4],d.ik=e[3];if(d.Td)for(g=0;g<d.Td.length;g+=1)h=d.Td[g],h[3]=e[0],h[4]=e[1],d.un&&(h[7]=e[2])}}}});w.vF={kn:function(a,b,c){return this.q.Cr+b.join(";")+"&lv="+a+"&preload="+(c&&c[0]&&c[0].xg?1:0)},Lr:function(a,b){if(this.q){for(var c=[],d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(h=JSON.parse(h),h["x-vd-v"]?(this.Ed=h["x-vd-v"],this.Ud=[h.tv||"",h.vdv].join("-"),this.rf=h.tv,this.g.vd="#"+h.bgc.substring(2)):(this.Du(h,b,c,this.Ed||"v4"),d.push(h)))}d.length&&(w.l.gf||w.l.bj&&!this.g.J.ta)&&18>=b&&w.ym.set({Qd:!0,data:d,url:this.kn(b,[]),w:this.q,vdataVersion:this.Ud,"x-vd-v":this.Ed,tv:this.rf, bgc:this.g.vd,td:this.g.J.get("showBuildingBlock")});this.set("display")}},Nu:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.S;return[(c+a[0])*e,(d+a[1])*e]},Du:function(a,b,c,d,e){function g(c,g,l){c=[l,c,g].join("/");if(c=p.wa.get(c)){g=c.ma;var m=w.A.Rb+"://vdata.amap.com/icons/"+(h||k?"b":"n")+(10>g.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(p.PZ(c,r)||c.xg){if(-1!==s.indexOf(q))if("limg"===q)a[1]&&(c.Qd={url:"data:image/png;base64,"+a[1],Tn:"limg-"+c.key+"-"+p.q.Ac},w.Mh.$k(c.Qd, !0));else{if("roadlabel"===q)for(var n=1;n<a.length;n+=1){var v=a[n];v.qz=v[0];var E=w.a.qs(v[1],d);if(!(0>E[0]||256<=E[0]||0>E[1]||256<=E[1])){var A=p.Nu(E,g),E={Oa:A,name:v[0],Yi:!0,Bd:E,Da:[],wb:[],visible:!0,ik:!0},I=E.name;E.Xr=15>v[2]%90||75<v[2]%90?90*Math.floor((v[2]+15)/90):v[2];A=v[3];0<=v[8]&&(E.zB={name:v[6],KZ:v[7],dir:v[8]});var D=A[2];l=A[3];var F=-Math.floor(l/2);if(v[4])if("v5"<=d){var C=v[5].split(":"),H=C[1],H=parseInt(H)-1,C=w.A.Rb+"://vdata.amap.com/style_icon/icon-normal-"+(h|| k?"big":"small")+".png";E.Da.push(C);var C=Math.floor(H/10),K=H%10,L=0,J=0,N=0;k?(L=48,N=J=40):h?(L=J=40,N=36):(L=J=24,N=20);var M=L*Math.max(D+2,N)/N,C=[-M/2,-L/2,M,L,J*K,J*C,J,J];E.le=7;E.wb.push(C)}else{F=!1;H=parseInt(v[5]);153===H&&(0===I.indexOf("G")?(H="153g",F=!0):0===I.indexOf("S")&&(H="153s",F=!0));if(151===H||150===H)F=!1,0===I.indexOf("G")&&(H=150,F=!0),0===I.indexOf("S")&&(H=151,F=!0);152===H&&(H=151);!0===F&&(m=w.A.Rb+"://webapi.amap.com/theme/v1.3/icons/"+(h||k?"b/":"n/"));C=m+H+".png"; w.Mh.$k(C);E.Da.push(C);M=v[4][0]*u;v=v[4][1]*u;C=[-M/2,-v/2,M,v];E.wb.push(C);D=Math.min(M-3,D);l=Math.min(v,l);F=-Math.floor(l/2)+(k?3:1)}E.Da.push(c.Qd);E.le=11;E.wb.push([-Math.floor(D/2),F,D,l,A[0],A[1],A[2],A[3]]);c.xa||(c.xa=[]);c.xa.push(E)}}else if("poilabel"===q){I=[];for(n=1;n<a.length;n+=1)if(v=a[n],v.qz=v[0],E=w.a.qs(v[1],d),!(0>E[0]||256<=E[0]||0>E[1]||256<=E[1])){A=p.Nu(E,g);E={Oa:A,name:v[0].replace("^",""),un:!0,Bd:E,Da:[],wb:[],visible:!0,ik:!0};H=0;E.hl=v[8];v[6]&&("v5"<=d?(C=v[6].split(":"), H=C[1],F=Math.floor((parseInt(C[0].split("_")[1])-28)/2)):H=v[6]);if(H&&v[3]){if("v5"<=d){C=w.A.Rb+"://vdata.amap.com/style_icon/icon-"+(1===F?"biz-":"normal-")+(h||k?"big":"small")+".png";E.Da.push(C);H=parseInt(H)-1;C=Math.floor(H/10);K=H%10;k?(L=48,J=40,N=28):h?(L=J=40,N=28):(L=J=24,N=20);M=L;if(151===H||152===H||153===H)N-=4,D=v[7][0][2],M=L*Math.max(D+2,N)/N;C=[-M/2,-L/2,M,L,J*K,J*C,J,J]}else C=m+H+".png",w.Mh.$k(C),E.Da.push(C),C=[-Math.round(v[3][0]/2),-Math.round(v[3][1]/2),v[3][0],v[3][1]], k&&!e&&(C[0]*=u,C[1]*=u,C[2]*=u,C[3]*=u);E.wb.push(C)}if(v[2]&&v[7])for(D=v[2],C=0;C<v[2].length;C+=1){E.Da.push(c.Qd);A=v[7][C];k&&!e&&(D[C][0]=Math.round(D[C][0]*u),D[C][1]=Math.round(D[C][1]*u),D[C][2]=Math.round(D[C][2]*u),D[C][3]=Math.round(D[C][3]*u));M=D[C][0];K=D[C][1]-(k?4:2);L=A[3];J=A[2];M<-J&&H&&v[3]&&(M=-J+E.wb[0][0]);if("v5">d){if("375"===H||"3751"===H)J=Math.min(D[C][2],k?24:14),M=-Math.floor(J/2),K=-Math.floor(L/2)}else M-=2;E.le=L-4;4===l&&"\\u5317\\u4eac"===E.name&&(K=k?-50:-26);E.wb.push([M, K,J,A[3],A[0],A[1],A[2],A[3]])}E.Xl=v[5];E.Xl&&I.push(E.Xl);E.gl=v[4];E.im=v[9];E.iL=v[10];E.$e=H;E.vr=F;c.xa||(c.xa=[]);c.xa.push(E)}c.Te||(c.Te={},c.Te.je=I,w.pj&&w.pj.r("vecTileParsed.buildings",{Ln:c}))}q===s[s.length-1]&&(c.status="loaded",c.ta=c.qa=!0,c.Jc&&(c.Jc.ta=c.Jc.qa=!0))}}else p.yM(b,c,r,w.a.bind(p.wL,p))}}var h=w.l.Y,k=this.q.ja,l=a[0].split("-");1===l.length&&(l=a[0].split("_"));c=parseInt(l[1]);var m=parseInt(l[2]),n=parseInt(l[0]),p=this,q=l[3],s=this.q.xa,r=18<b?Math.pow(2,b-18): 1,l=Math.ceil(p.Mf.gD),u=this.q.ja?this.q.kb:1,v=Math.pow(2,n);10>n&&(c<=l&&g(c+v,m,n),c>=v-l&&g(c-v,m,n));g(c,m,n)}};w.Q.canvas.uF=w.Q.canvas.Wh.extend({ga:[w.vF]});w.Q.canvas.Wh.ob({iM:function(a){this.zt++;var b=this.Ck,c=this.zj;this.ju={};var d=this.q.ja?this.q.kb:1,e;0!==a.W.rotation?(e=2*Math.floor(a.W.Aa.Vb.x)*d,d*=2*Math.floor(a.W.Aa.Vb.y)):(e=a.size.width*d,d*=a.size.height);w.j.qm(b,e,d,!0);w.l.naa&&b.parentNode&&b.parentNode.appendChild(b);c.textBaseline="bottom";this.bW=0;a.Hb&&(this.eY(a.Hb,1,a.Hb),0===a.Hb.length&&this.labels&&this.labels.Zk&&this.labels.zoom===this.zoom&&this.labels.Zk.length!==this.labels.length&&(this.labels.Zk=null));this.labels&& this.eY(this.labels,0,a.Hb);!w.l.Y&&this.fp&&this.fp.length&&this.Eca(a);this.ny=this.ny&&this.yY(c,this.ny,480);this.Cy=this.Cy&&this.yY(c,this.Cy,200);a.Hb&&this.BY(a.Hb,c,w.oh.yV(this.g.J),this.hc,e,d);this.labels&&this.BY(this.labels,c,w.oh.yV(this.g.J),this.hc,e,d);this.fp=[];this.labels&&(this.labels.Uu=this.zoom,this.labels.Ru=this.gb,this.labels.fz=this.rotation,this.labels.DY=this.q.ja,this.labels.size=a.size);a.Hb&&(this.Hb=a.Hb);this.Hb&&(this.Hb.Uu=this.zoom,this.Hb.Ru=this.gb,this.Hb.fz= this.rotation,this.Hb.size=a.size);this.r("afterLabelRender")},zY:function(a,b,c){var d=void 0===b.ik?!0:b.ik,e=1,g=void 0===b.visible?!0:b.visible,h=null;if(b.Ub&&this.g.ec){var k=h="",l="";b.Td&&this.rJ&&(l=b.Td[0],h=l[3],k=l[4],l=b.Yi?"":l[7]);if(h=this.T.du&&this.T.du(h,k,l,b.Ub,b.Xq))g=h[4],d=h[3],e=h[5]}if(g){if(this.zj.globalAlpha!==c||e)this.zj.globalAlpha=c||e;g=0;for(k=b.Da.length;g<k;g+=1)(d||"CANVAS"===b.Da[g].tagName)&&this.Cba(a,b.Da[g],b.wb[g],b.Xr,c||e);this.zj.globalAlpha!==c&&(this.zj.globalAlpha= c);b.Td&&this.rJ&&this.rJ(a,b,h)}},Cba:function(a,b,c,d){var e=this.zj;b=this.Ql(b);if(!b)return 1;var g=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,g,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,g,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Ql:function(a){if(!a)return null;if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=w.Mh.mV(a))&&a.loaded)return a}, bD:function(a){var b=a.Oa,c=b[0];a.reverse&&(c>w.a.Za/2?c-=w.a.Za:c<-w.a.Za/2&&(c+=w.a.Za));return this.Ho(c,b[1])},Ho:function(a,b){var c=this.q.ja?this.q.kb:1,d=this.S,e=0,g=0,e=(a-this.Cd[0])/d,g=(b-this.Cd[1])/d;return[Math.round(e*c),Math.round(g*c)]},Lca:function(a){var b=a.Oa,c=b[0];a.reverse&&(c>w.a.Za/2?c-=w.a.Za:c<w.a.Za/2&&(c+=w.a.Za));return[c/this.S,b[1]/this.S]},dea:function(a,b){var c=a.Oa;return c[0]>b.od.x||c[1]>b.od.y||c[0]<b.Lb.x||c[1]<b.Lb.y?!1:!0},Eca:function(a){var b=this.fp; if(this.fp.zoom!==this.labels.zoom)for(var c=0,d=b.length;c<d;c+=1){var e=b[c];e.un&&this.dea(e,a.W.Aa)&&(this.Cy.push(e),e.zoom=b.zoom,e.BK=new Date)}},eY:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,g=a.Zk||a;if(0<e||d){a.Zk=[];for(var h=0,k=g.length;h<k;h+=1){var l=g[h],m=this.Lca(l);l.un||b?l.Xl&&d&&c.sX&&-1!==w.a.indexOf(c.sX,l.Xl)||(5>e&&this.yda(m,l,0<e,b,d)?a.Zk.push(l):w.l.Y||0===e&&!b||(this.ny.push(l),l.zoom=this.labels?this.labels.zoom:this.ce,l.BK=new Date)):l.Yi&&a.Zk.push(l)}}else a.Zk= a;return!1},yY:function(a,b,c,d,e){a=new Date;for(var g=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.BK)/(1/Math.pow(1.3,m)*c));if(0<m){g.push(l);var n=this.bD(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.zY(n,l,m)}else l.BK=void 0}g.length&&(this.bW=this.pi=1);return g},BY:function(a,b,c,d,e,g){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Zk;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Yi||k.Dm&&c&& 0<=c.indexOf(k.Dm))){var l=this.bD(k);-20>l[0]||l[0]>e+20||-20>l[1]||l[1]>g+20||this.zY(l,k)}}},gaa:function(a){this.hn&&this.hn.DY!==this.q.ja&&this.q.set("reload");if(this.bW)return!0;if(a.Hb&&a.Hb.length)if(this.Hb&&this.Hb.length){if(this.Hb!==a.Hb||this.Hb.Uu!==this.zoom||this.Hb.Ru!==this.gb||this.Hb.fz!==this.rotation||!this.Hb.size.qb(a.size))return!0}else return!0;else if(this.Hb&&this.Hb.length)return!0;return!this.labels||!this.g.dV&&this.labels===this.hn&&this.hn&&this.hn.Uu===this.zoom&& this.hn.Ru===this.gb&&!a.ck&&this.hn.fz===this.rotation&&this.hn.DY===this.q.ja&&this.hn.size.qb(a.size)?!1:!0},yda:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var g;e=b.Da.length;if(b.im>this.zoom)g=!0;else if(!c&&d)g=!1;else for(var h=0;h<e;h+=1){var k=b.wb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.zda(n,k,l,m)||(g=!0)}if(!g&&(c||d))for(h=0;h<e;h+=1)for(k=b.wb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.Uo),c=Math.ceil((k+m)/this.Uo),n=Math.floor(n/this.Uo), k=Math.floor(k/this.Uo),d=0,m=l-n;d<=m;d+=1)for(var l=0,p=c-k;l<=p;l+=1)this.ju[n+d]||(this.ju[n+d]={}),this.ju[n+d][k+l]=1;return!g},zda:function(a,b,c,d){var e=Math.ceil((a+c)/this.Uo);d=Math.ceil((b+d)/this.Uo);a=Math.floor(a/this.Uo);b=Math.floor(b/this.Uo);c=0;for(e-=a;c<=e;c+=1)if(this.ju[a+c])for(var g=0,h=d-b;g<=h;g+=1){if(1===this.ju[a+c][b+g])return!1}else this.ju[a+c]={};return!0}});w.Q.canvas.Wh.$_=w.aa.extend({B:function(a){this.Q=a},v9:function(a){this.jp=a;return this.XH([0,0,0])?!0:this.jp=!1},OQ:function(){return this.Q.Se?!1:!0},C4:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.F4.apply(this,b);case "label":return this.G4.apply(this,b);default:console.error("Unknown type",a)}}},bQ:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},P9:function(a){return 0>a?0:255<a?255: Math.round(a)},nT:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.P9(a[b+c]);return a},WH:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},m9:function(a){return[255-a[0],255-a[1],255-a[2]]},XH:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.jp){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},H4:function(a,b){var c=20,d=10;switch(b.Vl){case "active":c+=20,d+=20}return this.WH(this.XH(a,c),d)},uQ:function(a,b){var c=-110;switch(b.Vl){case "active":c+=30}return this.WH(this.XH(this.m9(a),c),50)},E4:function(a){return this.WH(a,20)},tQ:function(a, b,c,d,e,g){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],g),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.nT(c,d)},V3:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,g=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.AG(k,l,c,a);if(!(76.5>b[m+3])){e++;k<g[0]&&(g[0]=k);l<g[1]&&(g[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Lja:0<e?d/ e:0,Haa:[g[0],g[1],h[0]-g[0]+1,h[1]-g[1]+1]}},AG:function(a,b,c){return b*c+a},LB:function(a,b,c,d,e,g,h){var k=this.AG(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.mX||h.HZ&&!h.HZ.call(this,d,e,l,a))return!1;g.push([b,c]);return!0},r8:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},st:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},F9:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var g=a[d];this.r8(g, c[c.length-1])<=b&&c.push(g)}return this.st(c[c.length-1],a[a.length-1])?c:null},cla:function(){},s2:function(a,b,c,d){d=w.extend({mX:0.2,iX:4},d);var e,g,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(g=0;g<b&&!this.LB(a,g,e,b,c,h,d);g++);for(g=b-1;0<=g&&!this.LB(a,g,e,b,c,k,d);g--);}if(!h.length||!k.length)return null;for(g=0;g<b;g++){var n;e=h[0][0];n=k[0][0];if(g>=e&&g<=n)for(e=0;e<c&&!this.LB(a,g,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(g>=e&&g<=n)for(e=c-1;0<=e&&!this.LB(a,g,e,b,c, m,d);e--);}if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.st(l[l.length-1],k[0])&&this.st(k[k.length-1],m[0])&&this.st(m[m.length-1],h[0])&&this.st(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.F9(b[e],d.iX),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},D3:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var g=a[d][0], h=a[d][1];b[0]>g&&(b[0]=g);b[1]>h&&(b[1]=h);c[0]<g&&(c[0]=g);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},jQ:function(a,b){this.eT||(this.eT=document.createElement("canvas"));var c=this.eT;c.width=a;c.height=b;return c},b4:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},HP:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},SO:function(a,b){a.beginPath();for(var c= 0,d=b.length;c<d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.HP(e))):a[this.b4(e)].apply(a,this.HP(e))}},J3:function(a){a=this.uQ([255,255,255],{Vl:a.Vl});this.nT(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},D4:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*s+p-m[1])]}c=w.extend({Vl:"hover",HT:!0,padding:[1.5,1.5]},c);var e=a.width,g=a.height,h=this.jQ(2*e+10,g),k=h.getContext("2d"), l=this.D3(b),m=c.padding;w.l.qd&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],s=(l[3]+2*m[1])/l[3],l=0,r=b.length;l<r;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.SO(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,g,0,0,e,g);a=c.HT&&10<b.length;var u=c.strokeStyle||this.J3(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=w.l.qd?2:1.2;k.stroke();k.restore();return{qa:h,Df:[0,0,e,g],ld:a?function(a,c){this.G9(a,c,b,u)}:null}},G9:function(a,b,c,d){this.w2();var e=this.Q.zt;this.KO(a,c,{duration:200,NL:0,startTime:Date.now(),Hha:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=w.l.qd?2:1;a.translate(b[0],b[1])},Mja:function(){return this.Q.zt!==e}})},w2:function(){this.HF&&w.a.Wg(this.HF)},KO:function(a,b,c,d){this.OQ()?this.HF=w.a.pc(function(){this.HF= null;if(c.Mja.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var g=Math.round(b.length*e);if(c.NL<g){var h=1===e?b:b.slice(c.NL,g+1);h.length&&(a.save(),c.Hha.call(this,a,e),this.SO(a,h),a.stroke(),a.restore());c.NL=g}1>e?this.KO(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},E2:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,g=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.AG(c, m,e,g),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},u5:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},a5:function(a,b,c){for(var d=1/c,e=[],g=1;g<c;g++){var h=this.u5(a,b,d*g);e.length&&this.st(h,e[e.length-1])||e.push(h)}return e},b5:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],g=a[c];2===g.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.a5(e,g,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},e4:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.b5(a,5);return a},F4:function(a,b,c,d,e,g){b=a.Df;var h=c?c.HK:this.bQ(d,e,b);if(h){var k=c?c.eW:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.E2(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.Q.g)&&c.J?c.J.get("hotspotOptions"): {};c=w.extend({borderAnimation:!0},c);l=this.V3(l);a=!a.Xda&&0.46<=l.Lja;var s=e.createImageData(b,q);e=s.data;for(var r=a?this.uQ:this.E4,u=0,v=d.length;u<v;u+=4)this.tQ(d,u,e,u,r,{Vl:g});if(m&&(e=a&&!w.l.qd?this.s2(d,b,q,{HZ:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,mX:0.2,iX:4}):null,e||(e=l.Haa,e=this.e4(e[0],e[1],e[2],e[3],0.2)),e)){var x=this.D4(s,e,{Vl:g,fillStyle:"active"!==g?null:"#ddd",KD:h,HT:c.borderAnimation&&"hover"===g&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),s=null;return{KD:h, Su:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(x.qa,x.Df[0],x.Df[1],x.Df[2],x.Df[3],b[0],b[1],b[2],b[3]);x.ld&&(x.ld.call(this,a,b),x.ld=null)}}}return{KD:h,Su:function(a,b){if(m){var c=this.jQ(s.width,s.height);c.getContext("2d").putImageData(s,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(s,b[0],b[1]);s=null}}}}},G4:function(a,b,c,d,e,g){a=a.Df;if(c=c?c.HK:this.bQ(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.tQ(d,a,e,a,this.H4,{Vl:g});return{KD:c,Su:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},lQ:function(a,b,c){var d=c[2],e=c[3],g=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.IQ){if((b=this.Q.Ql(b))&&b.loaded)return c=[4,4],w.l.qd&&(c[0]*=2,c[1]*=2),{type:"icon",Xda:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,Df:[g-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",Df:[g,a,d,e]}}}); w.Q.canvas.Wh.ob({$P:function(){this.HG||(this.HG=new w.Q.canvas.Wh.$_(this));return!1===this.HG.v9(this.jp)?null:this.HG},hq:function(a,b){var c=this.$P();if(c&&c.OQ()&&a&&a.Da&&a.wb&&0===this.rotation){var d=this.zt,e=this.bD(a),g=[],h;a.mo||(a.mo=[]);var k=a.mo;for(h=a.wb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].eW===b)continue}var l=c.lQ(e,a.Da[h],a.wb[h]);if(l){var m=c.C4(l,a,k[h],this.Ck,this.zj,b);m&&(k[h]={eW:b,rev:d,HK:m.KD},g.push({Su:m.Su,Df:l.Df,Xy:"icon"===l.type? 2:1}))}}g.sort(function(a,b){return a.Xy-b.Xy});h=0;for(d=g.length;h<d;h++)g[h].Su.call(c,this.zj,g[h].Df),g[h].Su=null}},aw:function(a){a.mo&&(a.mo.length=0,a.mo=null)},NB:function(){var a=this.zj;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},SB:function(a){if(a&&a.Da&&a.wb&&a.mo){var b=this.zj,c=this.$P();if(c){for(var d=this.zt,e=this.bD(a),g=a.mo,h=0,k=a.wb.length;h<k;h++){var l=g[h];if(l&&(g[h]=null,d===l.rev)){var m=c.lQ(e,a.Da[h],a.wb[h]);m&&m.Df&&b.putImageData(l.HK,m.Df[0], m.Df[1])}}a.mo=null;this.zt++}}}});w.Cs={h:function(a,b,c,d,e){if(this.Nd(a,b,c||this))return this;var g=this.ve=this.ve||{};g[a]=g[a]||[];e?g[a].unshift({jb:b,ke:c||this,dk:d}):g[a].push({jb:b,ke:c||this,dk:d});"complete"===a&&this.ta&&this.r(a);return this},Nd:function(a,b,c){var d=this.ve;if(b&&c){if(d&&a in d&&d[a])for(var e=0;e<d[a].length;e+=1)if(d[a][e].jb===b&&d[a][e].ke===c)return!0;return!1}return d&&a in d&&d[a]&&0<d[a].length},I:function(a,b,c){if(!this.Nd(a))return this;var d=this.ve;if(d&&d[a])for(var e=0;e<d[a].length;e+= 1)if(!(d[a][e].jb!==b&&"mv"!==b||c&&d[a][e].ke!==c)){d[a].splice(e,1);d[a].length||(d[a]=null);break}return this},JD:function(a,b){if(!this.Nd(a))return this;var c=this.ve;if(c&&c[a])for(var d=0;d<c[a].length;d+=1)if(!b||c[a][d].ke===b){c[a].splice(d,1);c[a].length||(c[a]=null);break}return this},r:function(a,b){function c(a){var b=Array.prototype.slice.call(arguments,1),c,d,e,g;d=0;for(e=b.length;d<e;d+=1)for(c in g=b[d]||{},g)Object.prototype.hasOwnProperty.call(g,c)&&(a[c]=g[c]);return a}if(!this.Nd(a))return this; var d={type:a};b||"string"!==typeof b&&"number"!==typeof b&&"boolean"!==typeof b?("object"===typeof HTMLElement?b instanceof HTMLElement:b&&"object"===typeof b&&1===b.nodeType&&"string"===typeof b.nodeName)?d.value=b:d=c(d,b):d.value=b;for(var e=[].concat(this.ve[a]),g=0;g<e.length;g+=1)e[g].jb&&(e[g].jb.call(e[g].ke||this,d),e[g]&&e[g].dk&&this.ve[a]&&this.ve[a].splice(g,1));return this},bi:function(a){a?this.ve&&this.ve[a]&&(this.ve[a]=null):this.ve=null;return this}};(function(){if(w.l.Br&&!w.Uh){w.Uh=w.$E();var a=w.a.dK({Nu:"posToCoord",gw:"_decodeBoundsList"});w.Uh.Zj(null,new Function("\\n    return {\\n      "+a.posToCoord+": "+w.vF.Nu.toString()+",\\n      "+a._decodeBoundsList+": "+w.Ls.gw.toString()+"\\n  }"));w.Uh.Zj(null,function(){return{Lr:function(a,c){a.ak?this.lfa.call(this,a,c):this.mfa.call(this,a,c)},mfa:function(a,c){for(var d=a.LE,e=a.bk,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.tW&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.de.Ed=l["x-vd-v"], this.Ud=a.de.Ud=[l.tv||"",l.vdv].join("-"),this.rf=a.de.rf=l.tv):this.kfa(this.extend({},a,{Qx:l,Uc:g})))}g.length?this.parseLabel(this.extend({},a.de,{Uc:g}),function(d,g){var h=g.data,k=g.tda;c(d,{Ac:a.Ac,Nb:a.Nb.filter(function(a){return"loaded"===a.status}),data:h,tda:k,bk:e,ze:{Ed:a.de.Ed,Ud:a.de.Ud,rf:a.de.rf,nc:a.nc}},{Jr:!e,jn:e})}):c(null,{Ac:a.Ac,data:null,bk:e},{Jr:!e,jn:e})},kfa:function(a){function c(a,b,c){var n=[c,a,b].join("/");18<h&&!m&&(n+="/"+h);if((a=d.filter(function(a){return a.key=== n})[0])&&"loaded"!==a.status&&-1!==l.indexOf(v))if("limg"===v)b=g[1],a.Qd=b,"string"===typeof b.b&&(b.b=u.gw(b.b)),c="",(c="object"===typeof b.u?b.u.url:b.u)&&(b.u={url:c,Tn:"limg-"+a.key+"-"+e});else{b={ti:a.ma,ll:n,Ba:g,Wc:v,NK:"building"===v,dh:"poilabel"===v||"roadlabel"===v||"building"===v&&p};if("poilabel"===v||"roadlabel"===v)b.Qd=a.Qd;v===l[l.length-1]&&(a.status="loaded");k.push(b)}}var d=a.Nb,e=a.WK,g=a.Qx,h=a.nc,k=a.Uc,l=a.xa,m=a.Je,n=a.sK,p=a.td,q=g[0].split("-");a=parseInt(q[1]);var s= parseInt(q[2]),r=parseInt(q[0]),u=this,v=q[3],q=Math.pow(2,r);10>r&&(a<=n&&c(a+q,s,r),a>=q-n&&c(a-q,s,r));c(a,s,r)},lfa:function(a,c){for(var d=a.LE,e=a.bk,g=[],h=[],k=0,l=d.length;k<l;k+=1){var m=d[k];m&&(m=JSON.parse(m),m["x-vd-v"]?(this.Ed=a.de.Ed=m["x-vd-v"],this.Ud=a.de.Ud=[m.tv||"",m.vdv].join("-"),this.rf=a.de.rf=m.tv):(this.jfa(this.extend({},a,{Qx:m,Uc:g,Ed:this.Ed||"v4"})),h.push(m)))}c(null,{Ac:a.Ac,cba:h,Nb:a.Nb.filter(function(a){return"loaded"===a.status}),bk:e,ze:{Ed:a.de.Ed,Ud:a.de.Ud, rf:a.de.rf,nc:a.nc}},{Jr:!e,jn:e})},jfa:function(a){function c(a,b,c,e){var k=[e,b,c].join("/");if(a=a.filter(function(a){return a.key===k})[0])if(b=a.ma,c=q.Rb+"://vdata.amap.com/icons/"+(s||g?"b":"n")+(10>b.z?"39":"18")+"/1/",a&&"loaded"!==a.status&&-1!==h.indexOf(t))if("limg"===t)n[1]&&(a.Qd={url:"data:image/png;base64,"+n[1],Tn:"limg-"+a.key+"-"+m});else{if("roadlabel"===t)for(var l=1;l<n.length;l+=1){var r=n[l];r.qz=r[0];var u=d.qs(r[1],p);if(!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){var v=x.Nu(u, b),u={Oa:v,name:r[0],Yi:!0,Bd:u,Da:[],wb:[],visible:!0,ik:!0},H=u.name;u.Xr=15>r[2]%90||75<r[2]%90?90*Math.floor((r[2]+15)/90):r[2];v=r[3];0<=r[8]&&(u.zB={name:r[6],KZ:r[7],dir:r[8]});var K=v[2];e=v[3];var L=-Math.floor(e/2);if(r[4])if("v5"<=p){var J=r[5].split(":"),N=J[1],N=parseInt(N)-1,J=q.Rb+"://vdata.amap.com/style_icon/icon-normal-"+(s||g?"big":"small")+".png";u.Da.push(J);var J=Math.floor(N/10),M=N%10,T=0,W=0,Z=0;g?(T=48,Z=W=40):s?(T=W=40,Z=36):(T=W=24,Z=20);var Y=T*Math.max(K+2,Z)/Z,J=[-Y/ 2,-T/2,Y,T,W*M,W*J,W,W];u.le=7;u.wb.push(J)}else{L=!1;N=parseInt(r[5]);153===N&&(0===H.indexOf("G")?(N="153g",L=!0):0===H.indexOf("S")&&(N="153s",L=!0));if(151===N||150===N)L=!1,0===H.indexOf("G")&&(N=150,L=!0),0===H.indexOf("S")&&(N=151,L=!0);152===N&&(N=151);!0===L&&(c=q.Rb+"://webapi.amap.com/theme/v1.3/icons/"+(s||g?"b/":"n/"));J=c+N+".png";u.Da.push(J);Y=r[4][0]*y;r=r[4][1]*y;J=[-Y/2,-r/2,Y,r];u.wb.push(J);K=Math.min(Y-3,K);e=Math.min(r,e);L=-Math.floor(e/2)+(g?3:1)}u.Da.push(a.Qd);u.le=11;u.wb.push([-Math.floor(K/ 2),L,K,e,v[0],v[1],v[2],v[3]]);a.xa||(a.xa=[]);a.xa.push(u)}}else if("poilabel"===t){H=[];for(l=1;l<n.length;l+=1)if(r=n[l],r.qz=r[0],u=d.qs(r[1],p),!(0>u[0]||256<=u[0]||0>u[1]||256<=u[1])){v=x.Nu(u,b);u={Oa:v,name:r[0].replace("^",""),un:!0,Bd:u,Da:[],wb:[],visible:!0,ik:!0};N=0;u.hl=r[8];r[6]&&("v5"<=p?(J=r[6].split(":"),N=J[1],L=Math.floor((parseInt(J[0].split("_")[1])-28)/2)):N=r[6]);if(N&&r[3]){if("v5"<=p){J=q.Rb+"://vdata.amap.com/style_icon/icon-"+(1===L?"biz-":"normal-")+(s||g?"big":"small")+ ".png";u.Da.push(J);N=parseInt(N)-1;J=Math.floor(N/10);M=N%10;Z=W=T=0;g?(T=48,W=40,Z=28):s?(T=W=40,Z=28):(T=W=24,Z=20);Y=T;if(151===N||152===N||153===N)Z-=4,K=r[7][0][2],Y=T*Math.max(K+2,Z)/Z;J=[-Y/2,-T/2,Y,T,W*M,W*J,W,W]}else J=c+N+".png",u.Da.push(J),J=[-Math.round(r[3][0]/2),-Math.round(r[3][1]/2),r[3][0],r[3][1]],g&&(J[0]*=y,J[1]*=y,J[2]*=y,J[3]*=y);u.wb.push(J)}if(r[2]&&r[7])for(K=r[2],J=0;J<r[2].length;J+=1){u.Da.push(a.Qd);v=r[7][J];g&&(K[J][0]=Math.round(K[J][0]*y),K[J][1]=Math.round(K[J][1]* y),K[J][2]=Math.round(K[J][2]*y),K[J][3]=Math.round(K[J][3]*y));Y=K[J][0];M=K[J][1]-(g?4:2);T=v[3];W=v[2];Y<-W&&N&&r[3]&&(Y=-W+u.wb[0][0]);if("v5">p){if("375"===N||"3751"===N)W=Math.min(K[J][2],g?24:14),Y=-Math.floor(W/2),M=-Math.floor(T/2)}else Y-=2;u.le=T-4;4===e&&"\\u5317\\u4eac"===u.name&&(M=g?-50:-26);u.wb.push([Y,M,W,v[3],v[0],v[1],v[2],v[3]])}u.Xl=r[5];u.Xl&&H.push(u.Xl);u.gl=r[4];u.im=r[9];u.iL=r[10];u.$e=N;u.vr=L;a.xa||(a.xa=[]);a.xa.push(u)}a.Te||(a.Te={},a.Te.je=H)}t===h[h.length-1]&&(a.status= "loaded",a.ta=a.qa=!0,a.Jc&&(a.Jc.ta=a.Jc.qa=!0))}}var d=this,e=a.Nb,g=a.qd,h=a.xa,k=a.sK,l=a.kb,m=a.WK,n=a.Qx,p=a.Ed,q=this.A,s=this.l.Y,r=n[0].split("-");1===r.length&&(r=n[0].split("_"));a=parseInt(r[1]);var u=parseInt(r[2]),v=parseInt(r[0]),x=this,t=r[3],y=g?l:1,l=Math.pow(2,v);10>v&&(a<=k&&c(e,a+l,u,v),a>=l-k&&c(e,a-l,u,v));c(e,a,u,v)}}},function(a){a||(w.Uh.hea=!0)})}})();(function(){if(w.l.Br&&!w.kf){w.kf=w.$E();var a=w.a.dK({h:"on",Nd:"hasEvents",I:"off",JD:"offByContext",r:"emit",bi:"clearEvents"});w.kf.Zj(null,function(){return{aX:function(a,c){var d=this;if(3<this.Bq||this.disabled)return this.aj(a,c);var e=a.Nb,g=a.nc,h=a.xg,k=a.$M,l=a.Oda,m=a.xa;a.de.Lc?this.Lc=a.de.Lc:a.de.Lc=this.Lc;if(h&&this.qo())this.yk(e,c);else{var n=[(new Date).getTime(),this.ir()+1&65535,h?1:0].join("-");h||(this.Af[n]=1);var k={command:"tiles",reqId:n,payload:{t:k,opt:g,cs:{level:g, flds:m.join(","),v:l?"3":"2"}}},p=this.send(k);this.Qm[n]={Nb:e,nc:g,F:a,Cc:c,xg:h};this.wy()||setTimeout(function(){d.wy()||(d.Bq?d.Bq++:d.Bq=1,d.QU(p)&&(delete d.Qm[n],delete d.Af[n],d.aj(a,c)))},300);this.h("tiles",this.RD,this);this.h("ack",this.QD,this);this.h("disable",this.PD,this)}},caa:function(a){this.SK()&&this.send(a)},PD:function(){this.disabled=!0;this.close();for(var a in this.Qm)this.Qm.hasOwnProperty(a)&&this.rG(a)},rG:function(a){var c=this.Qm[a];c&&(this.yk(c.Nb,c.Cc),delete this.Qm[a], delete this.Af[a])},QD:function(a){var c=a.reqId,d=this.Qm[c];d&&(a.content.status?d.Cc&&(d.Cc(null,{Ac:d.F.Ac,d$:!0,bk:!0},{Jr:!1,jn:!0}),delete this.Qm[c],delete this.Af[c]):this.rG(c))},RD:function(a){var c=a.reqId,d=this.Qm[c];d&&(d.xg&&this.qo()?this.rG(c):this.Lr(this.extend({bk:!1},d.F,{LE:a.content.data,nc:a.content.opt}),d.Cc))},Lr:function(a,c){for(var d=a.LE,e=a.bk,g=[],h=0,k=d.length;h<k;h+=1){var l=d[h];l&&(a.tW&&(l=JSON.parse(l)),l["x-vd-v"]?(this.Ed=a.de.Ed=l["x-vd-v"],this.rf=a.de.rf= l.tv,this.Ud=a.Ud=[l.tv||"",l.vdv].join("-"),l.bgc&&(l="#"+l.bgc.substring(2),a.Mq!==l&&(a.Mq=l))):this.Du(this.extend({},a,{Qx:l,Uc:g})))}g.length?(d=this.extend({},a.de,{Uc:g}),(a.Je?this.RX:this.parseDataToVector)(d,function(d,g){c(d,{Ac:a.Ac,Nb:a.Nb.filter(function(a){return"loaded"===a.status}),data:g.data,Mq:a.Mq,bk:e,ze:{Ed:a.de.Ed,rf:a.de.rf,Ud:a.de.Ud,nc:a.nc}},{Jr:!e,jn:e})})):c(null,{Ac:a.Ac,Nb:[],data:null,bk:e},{Jr:!e,jn:e})}}});w.kf.Zj(null,w.lL);w.kf.Zj(null,new Function("\\n    return {\\n      "+ a.on+": "+w.Cs.h.toString()+",\\n      "+a.hasEvents+": "+w.Cs.Nd.toString()+",\\n      "+a.off+": "+w.Cs.I.toString()+",\\n      "+a.offByContext+": "+w.Cs.JD.toString()+",\\n      "+a.emit+": "+w.Cs.r.toString()+",\\n      "+a.clearEvents+": "+w.Cs.bi.toString()+"\\n    }\\n  "));w.kf.Zj(null,w.rF,function(a){a||(w.kf.Eda=!0)})}})(); ')
_jsload_('overlay', 'w.pa.dc=w.pa.Wd.extend({B:function(a,b){var c=a.length;this.Of=Array(c);for(var d,e,g=0;g<c;g+=1)if(d=a[g],e=new w.pa.XN(d),this.Of[g]=e,!b)if(0===g){if(0===d.length)break;e.$o(d)||d.reverse()}else 0!==d.length&&e.$o(d)&&d.reverse()},Tc:function(){if(0===this.Of.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.nf){for(var a=this.Of[0].Tc(),b=1;b<this.Of.length;b+=1){var c=this.Of[b].Tc();w.H.sU(a,c)||w.H.extend(a,c)}this.nf=a}return this.nf},MV:function(){return this.Of},ah:function(){return w.pa.Xd.Xz}, nd:function(a){for(var b=this.Of,c,d=0,e=b.length;d<e&&(c=b[d].nd(a),0<d&&(c=!c),c);d+=1);return c}});w.pa.Gs=w.pa.Wd.extend({B:function(a){var b=a.length;this.Ze=Array(b);for(var c=0;c<b;c+=1){var d=new w.pa.dc(a[c]);this.Ze[c]=d}},Tc:function(){if(!this.nf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Ze,c=0,d=b.length;c<d;c+=1)w.H.extend(a,b[c].Tc());this.nf=a}return this.nf},TJ:function(){return this.Oa},ah:function(){return w.pa.Xd.Vz},pV:function(){return this.Ze},nd:function(a){for(var b=!1,c=0,d=this.Ze.length;c<d;c+=1)if(this.Ze[c].nd(a)){b=!0;break}return b}});w.pa.Yn=w.pa.Wd.extend({B:function(a){this.Oa=a},Tc:function(){if(!this.nf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.Oa.length;b<c;b+=1)w.H.OC(a,this.Oa[b]);this.nf=a}return this.nf},TJ:function(){return this.Oa},ah:function(){return w.pa.Xd.dF},ir:function(){return this.Oa.length},Xt:function(a){return w.Qc.Ko(a,this.Oa)}});w.pa.XN=w.pa.Yn.extend({ah:function(){return w.pa.Xd.WN},$o:w.Qc.$o,nd:function(a){return w.Qc.nd(a,this.Oa)}});w.pa.Lv=w.pa.Wd.extend({B:function(a){var b=a.length;this.Ze=Array(b);for(var c=0;c<b;c+=1){var d=new w.pa.Yn(a[c]);this.Ze[c]=d}},pV:function(){return this.Ze},Tc:function(){if(!this.nf){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.Ze,c=0,d=b.length;c<d;c+=1)w.H.extend(a,b[c].Tc());this.nf=a}return this.nf},TJ:function(){return this.Oa},ah:function(){return w.pa.Xd.jF},ir:function(){return this.Oa.length},Xt:function(a){for(var b=Infinity,c=0,d=this.Ze.length;c<d;c+=1)b=Math.min(b,this.Ze[c].Xt(a)); return b}});w.D.Gb=w.D.Lg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.x$=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.Nq();this.X("display",b);b.h("zoomend",this.Dl,this)},Ym:function(){if("3D"==this.map.J.view.type){var a=this.M;a&&(a=a.Z)&&(delete a.Ba,delete a.Tt)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},np:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),b=a.Vc(b), d=[],e,g,h;e=0;for(g=c.length;e<g;e+=1)h=this.map.Fb(c[e]).add(b),d.push(this.map.qe(h));0<d.length&&this.set("path",d);if(this.IH&&0<this.IH.length)for(e=0,c=this.IH.length;e<c;e+=1)this.IH[e].np(a);this.x$.r("movepoly",{Ku:b})},My:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])},rw:function(a){this.get("options");return this.c5()?this.S3(a):this.wG(a)},c5:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, S3:function(a){if(!a||!a.length)return[];var b,c=[],d,e,g=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);g.push(this.xG(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.xG(a[d]),b=Math.round(Math.abs(h[0]-g[g.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].P-a[d].P))),"3D"==this.map.J.view.type&&(b=Math.round(b/1.2)),b=w.U.Mca(a[d-1],a[d],b),c.push.apply(c,b),g.push.apply(g,this.wG(b)),c.push(a[d]),g.push(h);return g},nC:function(a){var b= [],c=[],d,e,g,h,k,l,m=a.Z;m instanceof w.pa.Yn?l=[m]:m instanceof w.pa.Lv&&(l=m.Ze);m=[];a=a.Ka.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(g=l[d].Oa,g.length)for(h=0,k=g.length;h<k;h+=1)if(b=g[h],b=this.cf(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},Nq:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new w.Ig({sG:this.Bc.ZA,name:"polyline-"+w.a.Jb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new w.pa.Yn(this.rw(b)),style:this.get("options")});b.po=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.he("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){this.Ym(); var a=this.M,b=this.get("path");a&&(this.set("coords",this.rw(b)),a.Yg=!0,"c"!==this.map.get("overlayRender")&&a.Ka?(b=this.nC(a),w.l.dm||b.push("e"),b=b.join(" "),0===b.length&&a.Ka?(a.Ka.af.parentNode.removeChild(a.Ka.af),a.Ka.Xb.parentNode&&a.Ka.Xb.parentNode.removeChild(a.Ka.Xb),a.Ka=null):w.l.dm?(a.Ka.af.setAttribute("d",b),a.Ka.Xb&&a.Ka.Xb.setAttribute("d",b)):(a.Ka.af.path=b,a.Ka.Xb&&(a.Ka.Xb.path=b))):this.set("display"))},Dl:function(){},visibleChanged:function(){this.M&&(this.M.Ka?this.get("visible")? (this.M.Ka.af.style.display="block",this.M.Ka.Xb&&(this.M.Ka.Xb.style.display="block")):(this.M.Ka.af.style.display="none",this.M.Ka.Xb&&(this.M.Ka.Xb.style.display="none")):this.set("display"))},optionsChanged:function(){this.Ym();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.No(),this.M.Ka&&(this.M.Ka.af.parentNode&&this.M.Ka.af.parentNode.removeChild(this.M.Ka.af),this.M.Ka.Xb&&this.M.Ka.Xb.parentNode&&this.M.Ka.Xb.parentNode.removeChild(this.M.Ka.Xb))); this.set("display")}});w.D.Bv=w.D.Gb.extend({B:function(a,b){this.w$=a;arguments.callee.oa.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.Dl,this)},wG:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return w.EN.zV(a,this.map.cn,b,this.w$.F)},toleranceChanged:function(){this.pathChanged()},Dl:function(){this.pathChanged()}});w.D.dc=w.D.Lg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.JT=a;this.X("options",a);this.X("path",a);this.Nq();this.X("display",b)},Ym:function(){if("3D"==this.map.J.view.type){var a=this.M;a&&(a=a.Z.get("rings"))&&w.a.isArray(a)&&a.forEach(function(a){delete a.Ba;delete a.Tt})}},deltaPosChanged:function(){this.set("display")},np:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.Vc(b);var b=[],d,e;c.length&&c[0]instanceof w.U&&(c=[c],e=!0);for(var g= 0,h=c.length;g<h;g+=1){for(var k=c[g],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Fb(k[m]).add(a),l.push(this.map.qe(d));b.push(l)}0<b.length&&this.set("path",e?b[0]:b);this.JT.r("movepoly",{Ku:a})},My:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.JT.r("movepoly",{Ku:c})},rw:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof w.U&&(a=[a]);for(var b,c,d=[],e,g=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0; for(c=k.length;b<c;b+=1){var l=g.Fb(k[b]);e.push([l.x,l.y])}d.push(e)}return d},Nq:function(){if(this.map&&!this.M){var a=this.map,b=this.get("path"),b=this.M=new w.Ig({sG:this.Bc.ZA,name:"polygon-"+w.a.Jb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new w.pa.dc(this.rw(b)),style:this.get("options")});b.po=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.he(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.M,b=this.get("path"); this.Ym();a&&(this.set("coords",this.rw(b)),a.Yg=!0,"c"!==this.map.get("overlayRender")&&a.ea?(b=this.oC(a),0===b.length?(a.ea.parentNode.removeChild(a.ea),a.ea=null):w.l.dm?a.ea.setAttribute("d",b.join(" ")):(b.push("e"),a.ea.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.M&&(this.M.ea?this.get("visible")?this.M.ea.style.display="block":this.M.ea.style.display="none":this.set("display"))},optionsChanged:function(){this.Ym(); this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.No());this.set("display")},oC:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,g,h,k,l,m,n=a.ea.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.Z;a instanceof w.pa.dc?d=[a]:a instanceof w.pa.Gs&&(d=a.Ze);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],g=b.Of,h=g.length,0<h)for(var s= 0;s<h;s+=1){var r;k=g[s].Oa;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.cf(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,r=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;r&&q.push("L"+r[0]+" "+r[1])}return q}});w.D.Sf=w.D.Lg.extend({B:function(a,b){arguments.callee.oa.apply(this,arguments);this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.Nq();this.X("display",b)},np:function(a){var b=this.get("center");a=a.Vc(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Fb(b).add(a);b instanceof w.U?this.set("center",this.map.qe(c)):this.set("center",c);this.Bc.r("movepoly",{Ku:a})},My:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0], c.y+a[1]])},Nq:function(){if(this.map&&!this.M){var a=this.map,b=a.Fb(this.get("center")),c="px"===this.get("unit"),b=this.M=new w.Ig({Aw:!0,sG:this.Bc.ZA,name:"circle-"+w.a.Jb(this),zIndex:this.get("options").zIndex||1,map:a,Z:new w.pa.Tf([b.x,b.y]),style:this.get("options")});b.zr=c;b.po=this;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.he("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},Ym:function(){if("3D"==this.map.J.view.type){var a= this.M;a&&(a=a.Z)&&(delete a.Ba,delete a.Tt,delete a.o_)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.M,b=this.map.Fb(this.get("center"));a&&(a.Z.Oa=[b.x,b.y],this.Ym(),this.set("coords",[b.x,b.y]),this.Yg=!0,a.ea?this.nY():this.set("display"))},visibleChanged:function(){this.M&&(this.M.ea?this.get("visible")?this.M.ea.style.display="block":this.M.ea.style.display="none":this.set("display"))}, optionsChanged:function(){this.Ym();this.M&&(this.M.style=this.get("options"),this.M.zIndex=this.get("options").zIndex,this.M.No(),this.M.Yg=!0,this.set("display"))},JI:function(a){var b=[],c=[],d,c=a.Z;c instanceof w.pa.Tf&&(d=[c]);var c=this.map.get("resolution",Math.floor(this.map.get("zoom"))),e=a.ea.rotation,b=this.map.get("size"),g=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(g))+Math.abs(b.height*Math.sin(g)))/2,g=(Math.abs(b.width*Math.sin(g))+Math.abs(b.height*Math.cos(g)))/2,b=this.cf(d[0].Oa); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+g);a=a.get("remain")?5.23:a.zr?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").O/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},nY:function(){var a=this.M,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.ea)if(w.l.dm)b=this.JI(a),a.ea.setAttribute("d",b);else{b=this.map.get("resolution",Math.floor(this.map.get("zoom")));b=a.zr?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI* this.get("center").O/180));a.ea.style.width=Math.round(2*b);a.ea.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.cf(a.Z.Oa);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.ea.style.top=Math.round(e[1]-b);a.ea.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.M,b=this.get("radius");a&&(this.Ym(),a.Yg=!0,a.r("rad",{target:a,hj:b}),this.nY())}}); ')
_jsload_('wgl', '(function(){if(w.l.rm){var a=function(a){function c(a,b,c,d,g,h,k){var l=a.Ba;c=[];d=a.ti;var m=null,n=null,p;a.Ba=[];h=h&&16<b;for(var q=[],t=[],x=[],y=1,Y=l.length;y<Y;y+=1){var ca=l[y],R=ca[1].split("&"),m=s(B?B:R[0]),n=s(R[4]);p=ca[2];var da=ca[0],U=ca[3]*Math.pow(2,2)*k,V=ca[4],X={},Q=ca[5],ca=[];if(Q&&Q.length)for(var S=0,O=Q.length;S<O;S+=1){var P=Q[S].split("-"),R=P[1].split("^");ca[P[0]]=R;for(var P=0,ba=R.length;P<ba;P+=1)-1===e(c,R[P])&&c.push(R[P])}if(V&&V.length)for(Q=0,O=V.length;Q< O;Q+=1){P=V[Q].split("-");ba=parseInt(P[0]);X[ba]={};for(var R=1,ga=P.length;R<ga;R+=1)X[ba][parseInt(P[R])]=!0}Q=0;for(V=da.length;Q<V;Q+=1){R=da[Q];z||(q=[],x=[],t=[]);for(var R=u(R,v,b),O=r(R,d,g,!0),R=O[1],P=[],S=ga=ba=0,la=R.length-1;S<la;S+=1){var ja=R[S],pa=R[S+1],ba=ba+ja[0],ga=ga+pa[1];if(!X[Q]||!X[Q][S])if(h){var va=pa[0]-ja[0],ta=pa[1]-ja[1],ya=5E3+va+(5E3+ta)/1E4,ta=Math.sqrt(Math.pow(va,2)+Math.pow(ta,2)),va=Math.round(U/64),ta=Math.ceil(ta/64);va?t.push(0,0,ta,va,0,va,0,0,ta,0,ta,va): t.push(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);q.push(ja[0],ja[1],-U,ya);q.push(pa[0],pa[1],0,ya);q.push(ja[0],ja[1],0,ya);q.push(ja[0],ja[1],-U,ya);q.push(pa[0],pa[1],-U,ya);q.push(pa[0],pa[1],0,ya)}else x.push(ja[0],ja[1],0,-1,pa[0],pa[1],0,-1);P.push([ja[0],ja[1]])}S=R.length-1;ba=[ba/S+215440491,ga/S+106744817];P=G.Gp(h?P:R,[],0,1);ga=0;for(S=P.length;ga<S;ga+=1)for(R=0;3>R;R+=1)la=-U,h||(la=0),t.push(-1,-1),q.push(P[ga][R][0],P[ga][R][1],la,0);!z&&q.length&&(R=[m,n,p],O=[new Float32Array(q),new Float32Array(t), new Float32Array(x),R,O[1],ba],ca[Q]&&(O.nda=ca[Q]),a.Ba.push(O))}}z&&q.length&&(b=256*Math.pow(2,20-d.z),ba=[d.x*b+128,d.y*b+128],O=[new Float32Array(q),new Float32Array(t),new Float32Array(x),[m,n,p],null,ba],a.Ba.push(O));a.Xk=c;return a}function d(a,b,c,d,g,h){c=a.Ba;d=[];for(var k=a.ti,l=null,m=null,n={},p=1,q=c.length;p<q;p+=1){var t=c[p],x=t[1].split("&"),l=s(B?B:x[0]),m=s(x[2]),y=x[0]+x[2];n[y]||(n[y]={XZ:[],MY:[],gp:[],Ih:[],Vba:l,borderColor:m,Ub:t[2]});var l=n[y].XZ,m=n[y].MY,x=n[y].gp, y=n[y].Ih,z=t[0],ca=t[3]*Math.pow(2,2),R=t[4],da={};if((t=t[5])&&t.length)for(var U=0,V=t.length;U<V;U+=1)for(var X=t[U].split("-")[1].split("^"),Q=0,S=X.length;Q<S;Q+=1)-1===e(d,X[Q])&&d.push(X[Q]);if(R&&R.length)for(t=0,V=R.length;t<V;t+=1)for(X=R[t].split("-"),Q=parseInt(X[0]),da[Q]={},U=1,S=X.length;U<S;U+=1)da[Q][parseInt(X[U])]=!0;t=0;for(R=z.length;t<R;t+=1){for(var O=z[t],O=u(O,v,b),O=r(O,k,g,!0)[1],U=[],V=0,X=O.length-1;V<X;V+=1){var Q=O[V],S=O[V+1],P=[Q[0]-0*ca,Q[1]-0.3*ca],ba=[S[0]-0*ca, S[1]-0.3*ca];da[t]&&da[t][V]||(h?((S[0]-Q[0])*(P[1]-Q[1])<(P[0]-Q[0])*(S[1]-Q[1])&&(l.push(P[0],P[1],2),l.push(S[0],S[1],-1),l.push(Q[0],Q[1],-1),l.push(P[0],P[1],2),l.push(ba[0],ba[1],2),l.push(S[0],S[1],-1),y.push([Q,S,ba,P])),x.push(P[0],P[1],-1,ba[0],ba[1],-1)):x.push(Q[0],Q[1],-1,S[0],S[1],2));U.push([P[0],P[1]])}O.pop();V=G.Gp(h?U:O,[],0,1);y.push(h?U:O);O=0;for(X=V.length;O<X;O+=1)for(U=0;3>U;U+=1)m.push(V[O][U][0],V[O][U][1],3)}}a.Ba=[];for(O in n)n.hasOwnProperty(O)&&(x=[n[O].Vba,n[O].borderColor, n[O].Ub],a.Ba.push([new Float32Array(n[O].XZ),new Float32Array(n[O].MY),new Float32Array(n[O].gp),x,n[O].Ih]));a.Xk=d;return a}function e(a,b){if(a&&!a.length)return-1;if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function g(a,b){for(var c=a.Ba,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},g=0,h=c.length;g<h;g++){for(var k=[],l=0,n=c[g].length;l<n;l++){var p=[],q=[];m(p,q,c[g][l][1],a.ma,b);p.forEach(function(a,b){k.push([a, q[b]])})}if(k.length){var r=[[],[],{width:0.75*c[g][0][0],borderColor:s(e[g])}];k.forEach(function(a){var b=r[0].length/9;b&&(a[1]=a[1].map(function(a){return a+b}));r[0]=r[0].concat(a[0]);r[1]=r[1].concat(a[1])});r[0]=new Float32Array(r[0]);r[1]=new Uint16Array(r[1]);d.push(r)}}a.Ba=d;return a}function h(a){var b=[],c=[],d=[];a=r(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=G.Gp(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d), {},c]}function k(a,b,c,d,e){for(var g="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),h=a.Ba.slice(1),k=h.length-1;0<=k;k--)h[k].nW=k;h.sort(function(a,b){return a[2]>b[2]?1:a.nW>b.nW?1:-1});for(var m={},k=0,n=h.length;k<n;k+=1){var p=h[k],q=p[1].split("&"),r,u,v,x,y;r=u=v=x=y=null;var B,z,G,V,X=null,Q=!1;B=z=G=V=null;q[1]&&(r=s(q[1]));u=parseInt(q[0]);v=q[2];v!==g[0]&&(v===g[1]?B="round":v===g[2]?B="square":0===v.indexOf(g[5])?(X=!0,G=[3,2]):0===v.indexOf(g[3])?(G=v.substring(5).split(")")[0].split(","), G.forEach(function(a,b){G[b]*=e})):0===v.indexOf(g[4])&&(x=r,r=q[4]?s(q[4]):[1,1,1,r[3]],G=[12,12],Q=!0,y=3,u=1));q[3]&&q[4]&&3<q.length&&(y=u+parseInt(q[3]),x=s(q[4]),v=q[5],v!==g[0]&&(v===g[1]?z="round":v===g[2]?z="square":0!==v.indexOf(g[5])&&0===v.indexOf(g[3])&&(y+=1,V=v.substring(5).split(")")[0].split(","),V.forEach(function(a,b){V[b]*=e}))));if(c){if(G)for(q=G.length-1;0<=q;q-=1)G[q]*=e;if(V)for(q=V.length-1;0<=q;q-=1)V[q]*=e}v=[];v.$f=0;var S=[],O=[];l(v,O,S,p[0],a.ti,b,c,d,e,B);"app"=== t&&(u/=4,y/=4);q=[u,r,G,y,x,V,X,Q,B,z,p[3],p[4]];q.mna=!0;p=p[2];m[p]||(m[p]=[]);m[p].push([new Float32Array(v),new Uint16Array(O),q,S])}a.Ba=m;return a}function l(a,b,c,d,e,g,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var q=a.length/11,s=q+6,t=u(d[n],v,g),x=r(t,e,k);if(1<x[1].length){for(var t=x[0],y=x[2],B=0,x=x[1].length;B<x;B+=1){if(0<B){var z=t[2*B]-t[2*B-2],G=t[2*B+1]-t[2*B-1];a.$f+=Math.sqrt(z*z+G*G)*(h?l:1)}var z=t[2*B],G=t[2*B+1],V=y[B][0],X=y[B][1],Q,S;B===x-1?(Q=t[2*x-2],S=t[2*x-1]):(Q= t[2*B+2],S=t[2*B+3]);var O,P;0===B?(O=z,P=G):(O=t[2*B-2],P=t[2*B-1]);if(0!==B){var ba=B===x-1?0:-1;a.push(z,G,V,X,1,O,P,ba,Q,S,a.$f);a.push(z,G,V,X,-1,O,P,ba,Q,S,a.$f)}else a.push(z,G,V,X,0,O,P,0,Q,S,a.$f),a.push(z,G,V,X,1,O,P,0,Q,S,a.$f),a.push(z,G,V,X,1,O,P,1,Q,S,a.$f),a.push(z,G,V,X,0,O,P,1,Q,S,a.$f),a.push(z,G,V,X,-1,O,P,1,Q,S,a.$f),a.push(z,G,V,X,-1,O,P,0,Q,S,a.$f),m&&(b.push(q+2,q+0,q+3),b.push(q+2,q+1,q+0),b.push(q+3,q+0,q+4),b.push(q+4,q+0,q+5));B!==x-1?(ba=0===B?0:1,a.push(z,G,V,X,1,O,P, ba,Q,S,a.$f),a.push(z,G,V,X,-1,O,P,ba,Q,S,a.$f)):(a.push(z,G,V,X,0,O,P,0,Q,S,a.$f),a.push(z,G,V,X,1,O,P,0,Q,S,a.$f),a.push(z,G,V,X,1,O,P,-1,Q,S,a.$f),a.push(z,G,V,X,0,O,P,-1,Q,S,a.$f),a.push(z,G,V,X,-1,O,P,-1,Q,S,a.$f),a.push(z,G,V,X,-1,O,P,0,Q,S,a.$f));B!==x-1?(b.push(s+4*B,s+4*B+3,s+4*B+1),b.push(s+4*B,s+4*B+2,s+4*B+3)):m&&(z=s+4*(x-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(y)}}}function m(a,b,c,d,e){for(var g=[],h=0,k=c.length;h<k;h+=1){var l=[], m=[],n=u(c[h]),p=r(n,d,e);g.push(p[2]);if(1<p[1].length){var q=p[1].length;p[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a:b===q-1&&(c=a);l.push(a[0],a[1],p[2][b][0],p[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],p[2][b][0],p[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=q-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function n(a,b,c,d,e,g,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,p=r(u(d[l],v, g),e,h);if(2<p[1].length&&(n=G.Gp(p[1],[],n),n.length&&(a.push.apply(a,p[0]),b.push.apply(b,n),c.push(p[2]),k)))for(var n=0,q=p[2].length;n<q;n+=1){var s=p[2][n][0]/512,t=p[2][n][1]/512;1==e.x%2&&(s+=0.5);1==e.y%2&&(t+=0.5);k.push(s,t)}}}function p(a,b,c){function d(a,b){for(var c=0,e=a.length;c<e;c++)a[c]+=b;return a}var e=a.Ba,g=[],h=[],k=[],l=[];q(a,h,k,c);for(var m=[[[0,0],[255,0],[255,255],[0,255]]],p=[[0,0],[255,0],[0,255],[255,255]],r=a.ti,u=0,t=p.length;u<t;u+=1){var v=p[u][0]/512,x=p[u][1]/ 512;1==r.x%2&&(v+=0.5);1==r.y%2&&(x+=0.5);l.push(v,x)}g.push([h,k,s("ff"+a.EI.substr(1)),"regions:land",m,l]);e.sort(function(a,b){return"string"===typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});p=1;for(r=e.length;p<r;p+=1)u=e[p],h=[],k=[],m=[],l=[],t=s(u[1].split("&")[0]),n(h,k,m,u[0],a.ti,b,c,l),g.push([h,k,t,u[3],m,l]);b={Tp:[],gs:[],Ia:[],Nh:[],Lp:[]};h=e=c=0;for(k=g.length;h<k;h++)l=g[h],b.Ia.push.apply(b.Ia,l[0]),b.Nh.push.apply(b.Nh,d(l[1],c)),b.Lp.push.apply(b.Lp,l[5]),b.gs.push([l[2], l[3]]),b.Tp.push([l[1].length,e]),e+=l[1].length,c+=l[0].length/2,delete l[0],delete l[1],delete l[5];b.Ia=new Float32Array(b.Ia);b.Nh=new Uint16Array(b.Nh);b.Lp=new Float32Array(b.Lp);g.buffer=b;a.Ba=g;return a}function q(a,b,c,d){var e=a.ti;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var g=256*d;d=a+g;b.push(d,e);e+=g;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function s(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c,2),16)/255);b.push(b.shift());return b}function r(a, b,c,d){var e=0,g=0,e=256*b.x,g=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,p=(g+a[l+1])*c-106744817,q=k.length;if(d||0===b.length)k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]);else if(n!==k[q-2]||p!==k[q-1])n===k[q-2]&&n===k[q-4]?(k[q-1]=p,b[b.length-1][1]=p,h[b.length-1][1]=a[l+1]):p===k[q-1]&&p===k[q-3]?(k[q-2]=n,b[b.length-1][0]=n,h[b.length-1][0]=a[l]):(k.push(n),k.push(p),b.push([n,p]),h.push([a[l],a[l+1]]))}return[k,b,h]}function u(a,b,c){var d= "ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,g;"v5"<b?(e=d.length,g=512):(e=27,d=d.substr(0,27),g=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-g,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}var v,x=Number.EPSILON||2E-16,t,y=!1,B=null,z=!0,G={Df:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]-a[e][0]*a[d][1];return 0.5*c},ZM:function(){return function(a,b){var c=a.length;if(3>c)return null; var d=[],e=[],g=[],h,k,l;if(0<G.Df(a))for(k=0;k<c;k++)e[k]=k;else for(k=0;k<c;k++)e[k]=c-1-k;var m=2*c;for(k=c-1;2<c&&!(0>=m--);){h=k;c<=h&&(h=0);k=h+1;c<=k&&(k=0);l=k+1;c<=l&&(l=0);var n;a:{var p=n=void 0,q=void 0,r=void 0,s=void 0,u=void 0,t=void 0,v=void 0,y=void 0,p=a[e[h]][0],q=a[e[h]][1],r=a[e[k]][0],s=a[e[k]][1],u=a[e[l]][0],t=a[e[l]][1];if(x>(r-p)*(t-q)-(s-q)*(u-p))n=!1;else{var B=void 0,z=void 0,X=void 0,Q=void 0,S=void 0,O=void 0,P=void 0,ba=void 0,ga=void 0,la=void 0,ga=ba=P=y=v=void 0, B=u-r,z=t-s,X=p-u,Q=q-t,S=r-p,O=s-q;for(n=0;n<c;n++)if(v=a[e[n]][0],y=a[e[n]][1],!(v===p&&y===q||v===r&&y===s||v===u&&y===t)&&(P=v-p,ba=y-q,ga=v-r,la=y-s,v-=u,y-=t,ga=B*la-z*ga,P=S*ba-O*P,ba=X*y-Q*v,ga>=-x&&ba>=-x&&P>=-x)){n=!1;break a}n=!0}}if(n){d.push([a[e[h]],a[e[k]],a[e[l]]]);g.push([e[h],e[k],e[l]]);h=k;for(l=k+1;l<c;h++,l++)e[h]=e[l];c--;m=2*c}}return b?g:d}}(),Gp:function(a,b,c,d){var e,g,h,k={};b=0;for(e=a.length;b<e;b++)h=a[b][0]+":"+a[b][1],k[h]=b;a=G.ZM(a,!1);if(!a)return[];if(d)return a; var l=[];b=0;for(e=a.length;b<e;b++)for(g=a[b],d=0;3>d;d++)h=g[d][0]+":"+g[d][1],h=k[h],l.push(h+c);return l},Qda:function(a){return 0>G.Df(a)}};return{RX:function(e,g){function h(a){var b=a.Ba;q&&b&&1<b.length&&b.slice(1).forEach(function(b){if(b&&null===b[1]){var c=b[b.length-1],d=q[c];b[1]=d.browserStyle[d.levelStyleMapping[m]];"road"===a.Wc&&(b[1]=b[1][0],b[4]=d,b[4].id=c)}})}v=e.Ed;y=e.Mda;t=e.mode;z=e.Ky;var l=y?c:d,m=e.uu,n=e.Vu,q=null;B=e.pC;var r=e.Y,s=[],u=Math.pow(2,20-m);e.Lc&&(q=e.Lc.stylemaps); for(var x=0,G=e.Uc.length;x<G;x+=1){var T=e.Uc[x],W=T.Wc;h(T);switch(W){case "region":s.push(p(T,m,u));break;case "road":s.push(k(T,m,n,u,e.KY));break;case "building":s.push(l(T,m,n,r,u,e.Y$,e.mu))}}delete e.Lc;e.Uc=s;if(a){l=[];x=0;for(G=s.length;x<G;x++)if((n=s[x].Ba)&&n.length)for(r=0,u=n.length;r<u;r++)n[r].buffer&&n[r].buffer instanceof ArrayBuffer&&l.push(n[r].buffer);a.vx(l)}g(null,{data:e})},aga:function(a,b){for(var c=a.Uc,d=Math.pow(2,20-a.nc),e=[],h=0,k=c.length;h<k;h++)e.push(g(c[h],d)); a.Uc=e;b(null,{data:a})},TX:function(a,b){var c=a.Nr.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},PX:function(a,b){var c=a.ib,d=a.hj,e=0,g=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+d*Math.cos(e),c[1]+d*Math.sin(e)),e+=g,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},Pna:function(){}}};w.s_=a();w.WE=new w.Os(a,{lazy:"untilCall"});w.l.Br&&w.kf.Zj(null,a)}})(w);(function(){function a(){function a(b,c,d,e,g,k){var l=[0,0,0,0,0],n=d.slice(0,4).concat(l),p=[],s=Math.PI/180*6,A=void 0,I=void 0,A=d.slice(0,2),D=m(e),F=m(g),I=q.normalize(h(D).fg(h(A))),C=q.normalize(h(F).fg(h(A)));q.OK(I,k)?(A=q.oD(I),I=q.oD(C)):(A=q.oD(C),I=q.oD(I),k=[F,D],D=k[0],F=k[1],g=[g,e],e=g[0],g=g[1]);D=Math.ceil(Math.abs(I-A)/s);30<=D&&(D=60-D);for(k=0;k<D;k++)0===k?(n.push.apply(n,e.slice(0,4)),n.push.apply(n,l)):(F=(k*s+A)%(2*Math.PI),n.push.apply(n,d.slice(0,2).concat([0,0])),n.push(1* Math.cos(F),1*Math.sin(F),0,0,0)),0<k&&p.push(0,k,k+1);n.push.apply(n,g.slice(0,4));n.push.apply(n,l);p.push(0,D,D+1);var H=b.length/9;b.push.apply(b,n);c.push.apply(c,p.map(function(a){return a+H}));return n.length/9}function c(c,d,e,g,k,l){function n(a,b,c,d,e){var g=void 0;a.NC(b)||q.AW(a,b)?g=b:c&&d&&e?g=a:c&&!d&&e?g=b:c||d||e?c||!d||e?(g=q.normalize(a.mi(b)),I=q.cos(g,a),g=g.oJ(I)):g=a:g=b;return g}function p(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(A,0,0),l.push(a[2]); if(void 0===c||!1===c)d.push(a[0],a[1]),d.push(b.y,-b.x,0,0),d.push(A,0,0),l.push(a[2])}var s=c.length,E=0,A=0,I=void 0,D=void 0;k&&(g="bevel");c.forEach(function(c,r,H){var K=H[r-1];H=H[r+1];var L=void 0;K&&(A+=q.Fd(c,K));if(0===r||r===s-1)0===r?(void 0===H&&(H=c),L=q.normalize(h(H[0]-c[0],H[1]-c[1])),e.push(0,1,2)):(L=q.normalize(h(c[0]-K[0],c[1]-K[1])),r=d.length/9+2,4===r?e.push(3,2,1):e.push(r-3-E,r-1,r-2)),p(c,L);else{var J=q.normalize(h(c[0]-K[0],c[1]-K[1])),N=q.normalize(h(H[0]-c[0],H[1]- c[1])),L=q.normalize(J.multiply(-1).mi(N));D=q.OK(L,J);I=q.cos(L,J);p(c,n(J,N,D,!0,!0),!0);p(c,n(J,N,D,!0,!1),!1);p(c,n(J,N,D,!1,!0),!0);p(c,n(J,N,D,!1,!1),!1);r=d.length/9;K=r-4;H=K+2;var M=9*K,T=M+9,W=T+9,Z=W+9;D?(W=m(d.slice(T,W)),M=m(d.slice(M,T)),M=q.normalize(h(W).fg(h(M))),M=Math.abs(q.cos(J,M)/q.sin(J,M)*2),d[T+7]=-M,d[Z+7]=M):(Z=m(d.slice(M,T)),T=m(d.slice(T,W)),T=q.normalize(h(Z).fg(h(T))),T=Math.abs(q.cos(T,J)/q.sin(T,J)*2),d[M+7]=-T,d[W+7]=T);q.AW(J,N)?e.push(K,K+1,K-2-E):e.push(K,K-1- E,K+1);"miter"==g&&(D?p(c,n(J,N,0,!0,!0),!0):p(c,n(J,N,0,!0,!0),!1),E=1);if("round"===g){M=N=J=void 0;D?(J=d.slice(9*(K+1),9*(K+2)),N=d.slice(9*K,9*(K+1)),M=d.slice(9*H,9*(H+1))):(J=d.slice(9*K,9*(K+1)),N=d.slice(9*(K+1),9*(K+2)),M=d.slice(9*(H+1),9*(H+2)));L=a(d,e,J,N,M,L.multiply(-1));if(l)for(;0<L--;)l.push(c[2]);E=d.length/9-r}e.push(H,H+1,H+2+E);k||"bevel"!=g&&"miter"!=g||(D?e.push(H,K,K+1):e.push(H,H-1,H+1),"miter"==g&&(D?e.push(H+2,H-2,H):e.push(H+2,H+1,H-1)))}})}function d(a,b,c,d){function e(a, b){var c=void 0;if(a.NC(b))c=b;else{var c=q.normalize(a.mi(b)),d=q.cos(c,a);d>Math.sqrt(3)/2&&(d=Math.sqrt(3)/2);c=c.oJ(d)}return c}function g(a,c,e){if(void 0===e||!0===e)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(m,0,0),d.push(a[2]);if(void 0===e||!1===e)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(m,0,0),d.push(a[2])}for(var k=a[0],l=a[a.length-1],m=0,n=void 0;k[0]===l[0]&&k[1]===l[1]&&k!==l;)a.pop(),l=a[a.length-1];a.push(k);a.push(a[1]);a.unshift(l);var p=a.length;a.forEach(function(a,d, k){var l=k[d-1];k=k[d+1];var r=void 0;l&&(m+=q.Fd(a,l));if(0===d||d===p-1)0===d?(r=q.normalize(h(k[0]-a[0],k[1]-a[1])),c.push(0,1,2)):(r=q.normalize(h(a[0]-l[0],a[1]-l[1])),d=b.length/9+2,c.push(d-3,d-1,d-2)),g(a,r);else{d=q.normalize(h(a[0]-l[0],a[1]-l[1]));k=q.normalize(h(k[0]-a[0],k[1]-a[1]));l=q.normalize(d.multiply(-1).mi(k));n=q.OK(l,d);g(a,e(d,k),!0);g(a,e(d,k),!1);g(a,e(d,k),!0);g(a,e(d,k),!1);a=b.length/9-4;k=a+2;var r=9*a,s=r+9,x=s+9,B=x+9;d=Math.abs(q.cos(d,l)/q.sin(d,l));n?(b[r+7]=d,b[s+ 7]=-d,b[x+7]=-d,b[B+7]=d):(b[r+7]=-d,b[s+7]=d,b[x+7]=d,b[B+7]=-d);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c,d,e){function g(a,b){if(p)for(;0<a--;)p.push(b)}function m(a,b){E.push.apply(E,a.slice(0,k));E.push(b.x,b.y);E.push.apply(E,a.slice(l));E.push.apply(E,a)}var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",p=arguments[4],s=c.length-1,G=d.length,E=[],A=[],I=[d.slice(0,9),d.slice(9,18)],D=[d.slice(G-9,G),d.slice(G-18,G-9)];"square"===n?(n=q.normalize(h(c[0]).fg(h(c[1]))), m(I[0],n),m(I[1],n),n=q.normalize(h(c[s]).fg(h(c[s-1]))),m(D[0],n),m(D[1],n),A.push(0,2,3,3,1,0),A.push(6,7,4,4,7,5),p&&(p.push(c[0][2]),p.push(c[s][2]))):"round"===n&&(n=I[0].slice(0,2).concat(0,0,0,0).concat(I[0].slice(l)),I=a(d,e,n,I[0],I[1],q.normalize(h(c[0]).fg(h(c[1])))),g(I,c[0][2]),n=D[0].slice(0,2).concat(0,0,0,0).concat(D[0].slice(l)),I=a(d,e,n,D[0],D[1],q.normalize(h(c[s]).fg(h(c[s-1])))),g(I,c[s][2]));d.push.apply(d,E);e.push.apply(e,A.map(function(a){return a+G/9}))}function g(a,b){var c= [];a.forEach(function(a){var d=a[0],e=a[1];a=a[2];b&&(d-=p[0],e-=p[1]);var g=c.length-1;if(-1===g)c.push([d,e,a]);else if(d!==c[g][0]||e!==c[g][1]||a!==c[g][2])if(1<=g){var k=q.normalize(h(d-c[g][0],e-c[g][1])),l=q.normalize(h(c[g][0]-c[g-1][0],c[g][1]-c[g-1][1]));k.NC(l)&&a===c[g][2]?c[g]=[d,e,a]:c.push([d,e,a])}else c.push([d,e,a])});return c}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);return w.a.create(s,{x:{value:a},y:{value:b}})}var k,l;function m(a){return[a[0]+n*a[2],a[1]+ n*a[3]]}var n=1;k=4;l=6;var p=[215440491,106744817],q={normalize:function(a){var b=this.length(a);return a.oJ(b)},Qj:function(a,b){return a.multiply(b)},gJ:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.gJ(a,b)/(this.length(a)*this.length(b))},cos:function(a,b){return this.Qj(a,b)/(this.length(a)*this.length(b))},OK:function(a,b){return 0<this.gJ(a,b)},Fd:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+ Math.pow(b[1]-a[1],2))},AW:function(a,b){return a.multiply(-1).NC(b)},oD:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}},s={mi:function(a){return h(this.x+a.x,this.y+a.y)},fg:function(a){return h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?h(this.x*a,this.y*a):this.x*a.x+this.y*a.y},oJ:function(a){return h(this.x/a,this.y/a)},NC:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"bevel":h,k= a.lineCap,k=void 0===k?"butt":k,l=a.Zda,l=void 0===l?!1:l,m=a.tn,n=void 0===m?!1:m,p=a.LX,m=a.Iia,q=void 0===m?!0:m,m=a.Sda,s=[],A=[],I=g(a.Nr,void 0===p?!0:p),p=[];l?(d(I,s,A,p),h=s.length,[0,1,2,h/9-1,h/9-2].forEach(function(a){s[9*a+8]=-1})):(c(I,s,A,h,n,p),e(I,s,A,k,p));q&&(s=new Float32Array(s),A=65535<A.length?new Uint32Array(A):new Uint16Array(A));h=[s,A];m&&h.push(p);if(b)b(null,{data:h});else return h}}}w.uN=a();w.Jja=new w.Os(a,{})})();w.pk={Jda:function(a,b,c){b=w.pk.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.ab=b;return!0},createProgram:function(a,b,c){b=w.pk.bX(a,a.VERTEX_SHADER,b);c=w.pk.bX(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.bindAttribLocation(d,0,"a_Position");a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)), a.deleteProgram(d),a.deleteShader(c),a.deleteShader(b),null)},bX:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)},Pe:function(a,b,c,d){var e=d,g=!1;"number"!==typeof d&&(e=d.toString(),g=!0);if(c.uT!==e){var h="uniform"+b;if(g&&2===b.length)a[h].apply(a,[c].concat(d));else a[h](c, d);c.uT=e}},Mx:function(a){a.length||(a=[a]);for(var b=0,c=a.length;b<c;b++)delete a[b].uT}};w.Q.uf.Yc=w.Q.Gd.zi.extend({ga:[w.Ls],B:function(a,b){this.Ni=20;this.kb=Math.min(2,window.devicePixelRatio||1);this.qp=1;arguments.callee.oa.apply(this,arguments);this.X("mapStyle",a.g);this.X("style",a.g);this.bg=this.ji=!0;a.g.J.vn&&this.Ax(a,b);this.Cm=0;this.Jj={};this.nD()||this.set("reload")},R0:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", S_:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.q&&(this.q.ta=!1);this.wa.clear();this.Qa&&this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);this.set("display")},Fu:function(a){if(this.q&&a.XK===this.q.Ac)for(var b=0,c=a.Uc.length;b<c;b+=1)this.Qy(a.Uc[b],a.uu,a.Vu,a.Y)},cM:function(a){for(var b=this.Pa,c=a.buffer,d=0,e=a.length;d<e;d+=1){var g=a[d];this.g.jk&&g[3]&&!this.g.ec&&(g[2]=this.T.Ro(g[2],g[3]),c.gs[d][0]=g[2])}c.Ia=this.wf(b.ARRAY_BUFFER,c.Ia);c.Nh=this.wf(b.ELEMENT_ARRAY_BUFFER,c.Nh)},mM:function(a){for(var b= 0,c=a.length;b<c;b+=1){var d=a[b];d.Kf=d[1].length;d[0]=this.wf(this.Pa.ARRAY_BUFFER,d[0]);d[1]=this.wf(this.Pa.ELEMENT_ARRAY_BUFFER,d[1]);this.g.jk&&d[2][10]&&!this.g.ec&&(d[2][1]=this.T.Uj(d[2][1],d[2][10],1),d[2][4]=this.T.Uj(d[2][4],d[2][10],0))}},OI:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.Ny=d[0].length/3;d[0]=this.wf(this.Pa.ARRAY_BUFFER,d[0]);d.GD=d[1].length/3;d[1]=this.wf(this.Pa.ARRAY_BUFFER,d[1]);d.Oy=d[2].length/3;d[2]=this.wf(this.Pa.ARRAY_BUFFER,d[2]);if(this.g.jk&& d[3][2]&&!this.g.ec){var e=this.T.gr(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},wf:function(a,b){if(b.length){var c=this.Pa,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},jV:function(a){var b=a.ma,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.qr(e,h,d));m||l===c||(m=this.qr(e,l,d));m||k===c||(m=this.qr(e,k,d));return m?(a.status=m.status,a.qa=m.qa,a.hc=m.hc,a.Pc=m.Pc,a.Ga={building:m.Ga.building,region:m.Ga.region,road:m.Ga.road, en:(b.x-m.ma.x)/g+m.Ga.en},!0):!1},qr:function(a,b,c){if((a=this.wa.get(a+"/"+b+"/"+c))&&a.Ga)return a},Qy:function(a){var b=a.Wc,c=this.wa.get(a.ll);if(c){c.Ga||(c.Ga={en:0});c.Ga[b]=a.Ba;if("region"===b)this.cM(a.Ba);else if("road"===b)for(var d in a.Ba)a.Ba.hasOwnProperty(d)&&this.mM(a.Ba[d]);else"building"===b&&(this.OI(a.Ba),a.Xk&&a.Xk.length&&!c.Te&&(c.Te={},c.Te.je=a.Xk,w.pj&&w.pj.r("vecTileParsed.buildings",{Ln:c})));b===this.q.xa[this.q.xa.length-1]&&(c.qa=!0,this.set("display"))}},ld:function(){if(this.rg&& !this.q.ta){var a=this.q;this.g.Ey||w.Yd.ue.end({key:"rb",index:2,id:this.g.J.id});a.ta=!0;a.cd?a.ia("renderComplete"):(a.cd=!0,a.ia("complete"))}},kc:function(a,b){!window.wa&&this.wa&&(window.wa=this.wa);this.rk=a.rk;this.mm(a,b);this.ld();a.kD||(a.G$=this.rg,this.Tu(a,b),this.ep=this.gb,this.pi&&this.set("display",0))},gi:function(){return this.Qa},Py:function(){w.Q.uf.Yc.Go+=1;this.Qa&&w.C.I(this.Qa,"webglcontextlost",this.Py,this);this.Qa.parentNode&&this.Qa.parentNode.removeChild(this.Qa);if(1< w.Q.uf.Yc.Go)this.OD();else{var a=this.Qa.className;this.Qa=document.createElement("canvas");this.Qa.className=a;this.nD()}this.set("reload");new w.Sa.fb(w.A.Rb+"://webapi.amap.com/count?"+["type=glfail","c="+w.Q.uf.Yc.Go,"crd="+w.l.qK,"k="+w.A.key,"u="+w.A.Sm,"m="+(w.l.Y?1:0),"pf="+w.l.Pr,"dpr="+window.devicePixelRatio,"scale="+(w.l.SE||0),"detect="+w.l.ja].join("&"))},OD:function(){w.l.Je=!1;this.q&&this.q.g.J&&(this.q.g.set("baseRender",w.l.SU?"dv":"d"),this.q.g.J.fL(),this.q.Q=null,this.q.fa.up(), this.q=null);this.Qa=this.T=null},Ef:function(a){this.Qa=document.createElement("canvas");this.Qa.className=a||"amap-layer"},nD:function(){if(1<w.Q.uf.Yc.Go)return this.OD(),!1;var a=this.Pa=this.Qa.getContext(w.l.q_,w.l.r_);if(a)w.C.h(this.Qa,"webglcontextlost",this.Py,this);else return this.OD(),!1;w.pk.Jda(a,this.R0,this.S_);this.mN=a.getUniformLocation(a.ab,"u_xDelta");this.d_=a.getUniformLocation(a.ab,"u_othMatrix");this.g_=a.getUniformLocation(a.ab,"u_zoomMatrix");this.c_=a.getUniformLocation(a.ab, "u_modelMatrix");this.mf=a.getAttribLocation(a.ab,"a_Position");this.Lj=a.getAttribLocation(a.ab,"a_op");this.Kj=a.getAttribLocation(a.ab,"a_Previous");this.xh=a.getAttribLocation(a.ab,"a_Next");this.Gt=a.getAttribLocation(a.ab,"a_Tags");a.enableVertexAttribArray(this.mf);this.Sh=a.getUniformLocation(a.ab,"u_FragColor");this.mv=a.getUniformLocation(a.ab,"u_FragColor2");this.ui=a.getUniformLocation(a.ab,"u_type");this.os=a.getUniformLocation(a.ab,"u_width");this.eN=a.getUniformLocation(a.ab,"u_isDash"); this.fN=a.getUniformLocation(a.ab,"u_onlyBorder");this.bN=a.getUniformLocation(a.ab,"u_dash");this.jN=a.getUniformLocation(a.ab,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.Hu=this.St=this.tn=void 0;this.qk=0;return!0},Ur:function(a){var b=Math.pow(2,a.W.zoom-this.re),c=a.W.gb.Ua(this.ep).wc(this.qi);this.transform={translate:this.transform[0].translate.add(c), scale:b,rotate:0};this.gb=a.W.gb},Tu:function(a,b){var c=this.DI(a,b),d=this.Pa;d.clear(d.COLOR_BUFFER_BIT);var e=this.q.ja?this.kb:this.qp,g=0,h=0;0!==a.W.rotation?(g=2*Math.floor(a.W.Aa.Vb.x)*e,h=2*Math.floor(a.W.Aa.Vb.y)*e):(g=a.size.width*e,h=a.size.height*e);g&&h&&(this.Qa.width=g,this.Qa.height=h,d.viewport(0,0,this.Qa.width,this.Qa.height),this.vp.apply(this,c),this.Qe(a))},zp:256*Math.pow(2,20),tJ:function(a,b){w.pk.Mx([this.Sh]);for(var c=0,d=b.length;c<d;c++){var e=b[c],g=e.Ga.region;if(g&& g.length){this.Xm(e.Ga.en*this.zp);e=g.buffer;a.bindBuffer(a.ARRAY_BUFFER,e.Ia);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.Nh);for(var h=0,k=e.Tp.length;h<k;h++){var l=e.gs[h],m=l[0];(l=l[1])&&this.g.ec&&(m=this.T.Ro(m,l),g[h].ed=m);m&&(a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,8,0),a.uniform4f(this.Sh,m[0],m[1],m[2],m[3]),a.drawElements(a.TRIANGLES,e.Tp[h][0],a.UNSIGNED_SHORT,2*e.Tp[h][1]))}}}},uJ:function(a,b){var c=w.pk,d=this.q.ja?this.kb:this.qp;c.Mx([this.Sh,this.ui,this.os]);for(var e in b)if(b.hasOwnProperty(e)){for(var g= b[e],h=0;h<g.length;h+=1){var k=g[h],l=k[2],m=l[4],n=l[10];n&&this.g.ec&&(m=this.T.Uj(m,n,0),k.ed=m);if(m){n="square"===k[2][9]?3:"round"===k[2][9]?4:2;c.Pe(a,"1i",this.ui,n);var p=this.uw(l)[1];p&&(this.Xm(k.qk*this.zp),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.Lj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.Kj,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.xh,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.Kf, c.Pe(a,"1f",this.os,p*d),c.Pe(a,"4f",this.Sh,m),this.Wm(l[5]?1:0,l[5],0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0))}}for(h=0;h<g.length;h+=1)if(k=g[h],l=k[2],m=this.uw(l)[0])p=l[1],(n=l[10])&&this.g.ec&&(p=this.T.Uj(p,n,1),k.ed=p),p&&(n="square"===k[2][8]?3:"round"===k[2][8]?4:2,c.Pe(a,"1i",this.ui,n),this.Xm(k.qk*this.zp),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.Lj,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.Kj,3,a.FLOAT, !1,44,20),a.vertexAttribPointer(this.xh,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.Kf,c.Pe(a,"1f",this.os,m*d),c.Pe(a,"4f",this.Sh,p),this.Wm(l[2]?1:0,l[2],l[6]?1:0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0))}},fc:new w.G(215440491,106744817),vp:function(a,b,c){if(a.length){this.hc+=1;b=this.Qa.width;c=this.Qa.height;var d=this.Pa;b=(new w.ge).dZ(-b/2,b/2,c/2,-c/2,0);c=Math.pow(2,this.zoom-this.Ni)*(this.q.ja?this.kb:this.qp);c=(new w.ge).scale(c,c,1);var e=this.gb.wc(this.S/ Math.pow(2,this.Ni-this.zoom)).Ua(this.fc),e=(new w.ge).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.d_,!1,b.elements);d.uniformMatrix4fv(this.g_,!1,c.elements);d.uniformMatrix4fv(this.c_,!1,e.elements);d.uniform1f(this.jN,Math.pow(2,this.zoom-this.Ni)*(this.q.ja?this.kb:1));b=this.Fm=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.Lj);d.disableVertexAttribArray(this.Kj);d.disableVertexAttribArray(this.xh);d.disableVertexAttribArray(this.Gt);this.Wm(0,void 0,void 0);d.uniform1i(this.ui, 0);this.Xm(0);for(var g=0,h=e.length;g<h;g+=1){var k=e[g];e[g].Ga&&(k.hc=this.hc,b.push(k))}this.tJ(d,e);d.enableVertexAttribArray(this.Lj);d.enableVertexAttribArray(this.Kj);d.enableVertexAttribArray(this.xh);d.disableVertexAttribArray(this.Gt);if(e.length){for(var l={},g=0,h=e.length;g<h;g+=1){var k=e[g],m=k.Ga.road;if(m)for(var n in m)if(m.hasOwnProperty(n)){l[n]||(l[n]=[]);for(var p=0,q=m[n].length;p<q;p+=1)m[n][p].qk=k.Ga.en,l[n].push(m[n][p])}}this.uJ(d,l,e[0].ma.z)}if(!(14>this.zoom))for(d.uniform1i(this.ui, 1),this.Wm(0,void 0,void 0),d.disableVertexAttribArray(this.Lj),d.disableVertexAttribArray(this.Kj),d.disableVertexAttribArray(this.xh),d.enableVertexAttribArray(this.Gt),g=0,h=e.length;g<h;g+=1)k=e[g],k.Ga.building&&this.KC(d,k)}}},KC:function(a,b){for(var c=b.Ga.building,d=0;d<c.length;d+=1){var e=c[d],g=e[3][0],h=e[3][1];if(!e||!g)break;var k=e[3][2];k&&this.g.ec&&(h=this.T.gr(g,h,k),g=h[0],h=h[1],e.ed=g);if(g||h)g||(g=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.mv,g[0],g[1],g[2],g[3]),a.uniform4f(this.Sh, h[0],h[1],h[2],h[3]),e.Ny&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Gt,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.Ny)),e.Oy&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Gt,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.Oy)),e.GD&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.mf,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.Gt,1,a.FLOAT,!1,12,8), a.drawArrays(a.TRIANGLES,0,e.GD))}},Wm:function(a,b,c){var d=this.Pa;a!==this.tn&&(d.uniform1i(this.eN,a),this.tn=a);a&&b!==this.St&&(this.St=b,d.uniform4f(this.bN,b[0],b[1],b[2]||0,b[3]||0));c!==this.Hu&&(d.uniform1i(this.fN,c),this.Hu=c)},Xm:function(a){a!==this.qk&&(this.Pa.uniform1f(this.mN,a),this.qk=a)},Qe:function(){this.transform={translate:{x:this.Qa.width/2,y:this.Qa.height/2},scale:this.q.ja?1/this.kb:1/this.qp,rotate:0}},oI:function(a,b,c){var d=null;if(a.length&&c)d=a[11].id+"-"+c,this.Jj[d]&& (a[0]=this.Jj[d][0],a[3]=this.Jj[d][3]);else return c=[],b&&b[0]&&(c=b[0].split("&")),(b=c[2])&&0===b.indexOf("railway")?(a[0]=1,a[3]=3):a[0]=parseInt(c[0])||0,c[3]&&c[4]&&3<c.length?(a[3]=a[0]+parseInt(c[3]),0===w.a.indexOf(c[5],"dash")&&(a[3]+=1)):a[3]=0,d&&void 0===this.Jj[d]&&(this.Jj[d]=[a[0],0,0,a[3]]),a},uw:function(a){function b(a,b,c){var d;a&&b?d=a+c%1*(b-a):0===a&&b?d=Math.max(0,c%1-0.5)/0.5*b:0===a&&0===b?d=0:0!==a&&0===b&&(d=0);return w.a.Sc(d,3)}var c=a[11].browserStyle,d=a[11].levelStyleMapping; if(18<this.zoom){var e=this.Fi(a,18,c,d);a=Math.pow(2,this.zoom-18);return[e[0]*a,e[3]*a]}if(w.a.zW(this.zoom))return e=this.Fi(a,this.zoom,c,d),[e[0],e[3]];e=this.Fi(a,Math.floor(this.zoom),c,d);c=this.Fi(a,Math.ceil(this.zoom),c,d);a=b(e[0],c[0],this.zoom);e=b(e[3],c[3],this.zoom);return[a,e]},Fi:function(a,b,c,d){a=a[11].id+"-"+b;this.Jj[a]||(this.Jj[a]=this.oI([],c[d[b]]));return this.Jj[a]}});w.Q.uf.Yc.Go=0; ')
_jsload_('sync', '(function(){if(w.A.Cc){var a=function(){var a=w.A.Cc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(w.A.Cc+" is not a function!");setTimeout(c,1)}else if(b)throw Error("Can not find callback: "+w.A.Cc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+w.A.key,"t="+c];c.push("resolution="+ window.innerWidth+"*"+window.innerHeight);c.push("mob="+(w.l.Y?1:0));c.push("vt="+(w.l.Fx?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+w.l.SE||0);c.push("detect="+w.l.ja);c=w.A.sd+"/v3/log/init?"+c.join("&");new w.Sa.fb(c,{callback:"callback"})})(); ')